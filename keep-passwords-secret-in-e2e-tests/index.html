<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Keep passwords secret in E2E tests | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Visible password Do not hardcode passwords Validate password Avoid UI login Continuous integration Plugins Conclusions   Note: source code for this blog post is the repository bahmutov&#x2F;keep-password">
<meta property="og:type" content="article">
<meta property="og:title" content="Keep passwords secret in E2E tests">
<meta property="og:url" content="https://glebbahmutov.com/blog/keep-passwords-secret-in-e2e-tests/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="Visible password Do not hardcode passwords Validate password Avoid UI login Continuous integration Plugins Conclusions   Note: source code for this blog post is the repository bahmutov&#x2F;keep-password">
<meta property="og:locale">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/login-spec.gif">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/no-typing-empty-strings.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/empty-password.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/shown-password.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/hide.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/partial-should.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/should-cb.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/login-form.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/api-login.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/login-intellisense.jpeg">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/first-run.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/context.png">
<meta property="og:image" content="https://glebbahmutov.com/blog/images/secret/visible-password.png">
<meta property="article:published_time" content="2019-12-01T05:00:00.000Z">
<meta property="article:modified_time" content="2021-06-15T13:13:30.301Z">
<meta property="article:author" content="Gleb Bahmutov">
<meta property="article:tag" content="testing">
<meta property="article:tag" content="cypress">
<meta property="article:tag" content="security">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://glebbahmutov.com/blog/images/secret/login-spec.gif">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="preload" href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" as="style">
  
<link rel="stylesheet" href="../css/style.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-titles">
      <div id="header-title" class="inner">
        <h1 id="logo-wrap">
          <a href="../index.html" id="logo">Better world by better software</a>
        </h1>
        <!--
        
        -->
        <!-- <span class="no-mobile">Software advice from</span> -->
        <h2 id="subtitle-wrap">
          <span class="subtitle">
            <a id="subtitle" href="https://glebbahmutov.com">Gleb Bahmutov PhD</a>
            <a id="nav-house-link" class="nav-icon" href="/" title="Home"></a>
            
              <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
            
            <a id="nav-search-btn" class="nav-icon" title="Search"></a>
            <div id="search-form-wrap">
              <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://glebbahmutov.com/blog"></form>
            </div>
          </span>
        </h2>

      </div>
    </div>
    <div id="climate-crisis">
      <h2>Our planet üåè is in danger</h2>
      <h3>Act today: <a href="/blog/climate-emergency/">what you can do</a></h3>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-keep-passwords-secret-in-e2e-tests" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2019-12-01T05:00:00.000Z" itemprop="datePublished">Dec 1 2019</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/products/">products</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Keep passwords secret in E2E tests
    </h1>

    <h2 class="article-title" itemprop="name">
      How to pass passwords and tokens during Cypress tests to avoid accidentally revealing them in screenshots, videos and logs
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- toc -->
<ul>
<li><a href="#visible-password">Visible password</a></li>
<li><a href="#do-not-hardcode-passwords">Do not hardcode passwords</a></li>
<li><a href="#validate-password">Validate password</a></li>
<li><a href="#avoid-ui-login">Avoid UI login</a></li>
<li><a href="#continuous-integration">Continuous integration</a></li>
<li><a href="#plugins">Plugins</a></li>
<li><a href="#conclusions">Conclusions</a></li>
</ul>
<!-- tocstop -->
<p><strong>Note:</strong> source code for this blog post is the repository <a target="_blank" rel="noopener" href="https://github.com/bahmutov/keep-password-secret">bahmutov/keep-password-secret</a>.</p>
<h2><span id="visible-password">Visible password</span></h2><p>Imagine we have a password-protected web application. For example I have cloned <a target="_blank" rel="noopener" href="https://github.com/passport/express-4.x-local-example">passport/express-4.x-local-example</a> - you need to enter login and password to see your personal profile. We can easily write an end-to-end test for this application using <a target="_blank" rel="noopener" href="https://www.cypress.io">Cypress</a> test runner.</p>
<figure class="highlight js"><figcaption><span>cypress/integration/login-spec.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;logs in&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  cy.visit(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">  cy.get(<span class="string">&#x27;[name=username]&#x27;</span>).type(<span class="string">&#x27;jack&#x27;</span>)</span><br><span class="line">  cy.get(<span class="string">&#x27;[name=password]&#x27;</span>).type(<span class="string">&#x27;secret&#x27;</span>)</span><br><span class="line">  cy.get(<span class="string">&#x27;[type=Submit]&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line">  cy.contains(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;profile&#x27;</span>).should(<span class="string">&#x27;be.visible&#x27;</span>).click()</span><br><span class="line">  cy.url().should(<span class="string">&#x27;match&#x27;</span>, <span class="regexp">/profile$/</span>)</span><br><span class="line">  cy.contains(<span class="string">&#x27;Email: jack@example.com&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>This test passes, as you can see from the test run video. It also shows the danger: the password is clearly shown in the video during &quot;TYPE&quot; command!</p>
<p><img src="/blog/images/secret/login-spec.gif" alt="Login spec showing the password during cy.type"></p>
<p>In this blog post I will show how to ways to mitigate the security risk of showing secret information like the password text during end-to-end tests. In this case, the password is local - and it is probably fine to show it in plain text. But in other situations, when testing staging or production environment, the password to the test account should NOT be visible.</p>
<h2><span id="do-not-hardcode-passwords">Do not hardcode passwords</span></h2><p>The first thing I would do is to remove the hard-coded password value from the test files. Right now we have the password in each spec file source code as a string <code>cy.type(&#39;secret&#39;)</code>, and instead I will pass it as an environment variable.</p>
<figure class="highlight js"><figcaption><span>cypress/integration/no-password-spec.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;logs in using env variables&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> username = Cypress.env(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> password = Cypress.env(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  cy.visit(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">  cy.get(<span class="string">&#x27;[name=username]&#x27;</span>).type(username)</span><br><span class="line">  cy.get(<span class="string">&#x27;[name=password]&#x27;</span>).type(password)</span><br><span class="line">  cy.get(<span class="string">&#x27;[type=Submit]&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line">  cy.contains(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;profile&#x27;</span>).should(<span class="string">&#x27;be.visible&#x27;</span>).click()</span><br><span class="line">  cy.url().should(<span class="string">&#x27;match&#x27;</span>, <span class="regexp">/profile$/</span>)</span><br><span class="line">  cy.contains(<span class="string">&#x27;Email: jack@example.com&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>I believe in most cases, the <code>username</code> can be public, while <code>password</code> should be secret. Thus it is ok to store the <code>username</code> in the <code>env</code> object of <code>cypress.json</code> file. And for completeness and clarity, I store an empty value for the <code>password</code> key - this tells anyone reading the tests to expect to pass the password to make the tests work.</p>
<figure class="highlight json"><figcaption><span>cypress.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;http://localhost:3000&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;env&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;jack&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Great - if we run Cypress now, the test will fail, because <a target="_blank" rel="noopener" href="https://on.cypress.io/type">cy.type</a> refuses to type an empty string.</p>
<p><img src="/blog/images/secret/no-typing-empty-strings.png" alt="cy.type will not type an empty password string"></p>
<p>Cypress allows several ways to pass the environment variables, in this case, the secure way is to use an environment variable <code>CYPRESS_password=...</code> when running Cypress. Cypress will stick all unknown environment variables that start with prefix <code>CYPRESS_</code> into the <code>env</code> object automatically.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> CYPRESS_password=secret npx cypress open|run</span></span><br></pre></td></tr></table></figure>
<p>When running tests locally I <em>strongly</em> recommend using my <a target="_blank" rel="noopener" href="https://github.com/bahmutov/as-a">as-a</a> utility to load groups of environment variables conveniently and cross-platform. In file <code>~/.as-a/.as-a.ini</code> I will add one more INI section and will place the secret password variable there.</p>
<figure class="highlight ini"><figcaption><span>~/.as-a/.as-a.ini</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[kps]</span></span><br><span class="line"><span class="comment">; group of environment variables for keep-password-secret app</span></span><br><span class="line"><span class="attr">CYPRESS_password</span>=secret</span><br></pre></td></tr></table></figure>
<p>When running Cypress from my terminal I use</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">as-a kps npx cypress open</span><br></pre></td></tr></table></figure>
<p>The password variable (and any other values in the block <code>kps</code>) will be injected just for the duration of the above command.</p>
<p>On Continuous Integration server, just set a secure environment variable <code>CYPRESS_password</code> to value <code>secret</code>. Most CIs mask such values automatically in the logs.</p>
<h2><span id="validate-password">Validate password</span></h2><p>If the user forgets to open Cypress with <code>CYPRESS_password=...</code>, or if the variable is not set on CI we get a cryptic error &quot;TYPE cannot type an empty string&quot;. It would be much nicer to give a meaningful error if the password string is empty, right. Here is an updated test that first verifies the username and password values before using them.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;logs in using env variables&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> username = Cypress.env(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> password = Cypress.env(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  expect(username, <span class="string">&#x27;username was set&#x27;</span>).to.be.a(<span class="string">&#x27;string&#x27;</span>).and.not.be.empty</span><br><span class="line">  expect(password, <span class="string">&#x27;password was set&#x27;</span>).to.be.a(<span class="string">&#x27;string&#x27;</span>).and.not.be.empty</span><br><span class="line"></span><br><span class="line">  cy.visit(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">  cy.get(<span class="string">&#x27;[name=username]&#x27;</span>).type(username)</span><br><span class="line">  cy.get(<span class="string">&#x27;[name=password]&#x27;</span>).type(password)</span><br><span class="line">  cy.get(<span class="string">&#x27;[type=Submit]&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line">  cy.contains(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;profile&#x27;</span>).should(<span class="string">&#x27;be.visible&#x27;</span>).click()</span><br><span class="line">  cy.url().should(<span class="string">&#x27;match&#x27;</span>, <span class="regexp">/profile$/</span>)</span><br><span class="line">  cy.contains(<span class="string">&#x27;Email: jack@example.com&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>It is working - if the developer is running Cypress test without <code>CYPRESS_password=...</code> they will get a nice error.</p>
<p><img src="/blog/images/secret/empty-password.png" alt="Explicit empty password error"></p>
<p>But this is dangerous too - notice that the username assertion <code>expect(username, &#39;username was set&#39;).to.be.a(&#39;string&#39;).and.not.be.empty</code> <em>prints the value</em> in the Command Log. If the password <em>is set</em> it will be visible in the video and any screenshot.</p>
<p><img src="/blog/images/secret/shown-password.png" alt="Actual password is shown when assertion passes"></p>
<p>To avoid assertion values reflected in the Command Log, we must throw an error ourselves like this.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> username = Cypress.env(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> password = Cypress.env(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// it is ok for the username to be visible in the Command Log</span></span><br><span class="line">expect(username, <span class="string">&#x27;username was set&#x27;</span>).to.be.a(<span class="string">&#x27;string&#x27;</span>).and.not.be.empty</span><br><span class="line"><span class="comment">// but the password value should not be shown</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> password !== <span class="string">&#x27;string&#x27;</span> || !password) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Missing password value, set using CYPRESS_password=...&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Finally, we can avoid <code>cy.type(password)</code> showing the value it is typing by using <code>cy.type(password, &#123;log: false&#125;)</code> option.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cy.get(<span class="string">&#x27;[name=password]&#x27;</span>).type(password, &#123;<span class="attr">log</span>: <span class="literal">false</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>Now the Command Log will not reveal the secret password value in the video or screenshot</p>
<p><img src="/blog/images/secret/hide.png" alt="Password is no longer shown"></p>
<p>Finally, sometimes I see assertions chained at the end of <code>cy.type</code> to confirm right away the value of the input element like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cy.get(<span class="string">&#x27;[name=username]&#x27;</span>)</span><br><span class="line">  .type(username)</span><br><span class="line">  .should(<span class="string">&#x27;have.value&#x27;</span>, username)</span><br><span class="line">cy.get(<span class="string">&#x27;[name=password]&#x27;</span>)</span><br><span class="line">  .type(password, &#123;<span class="attr">log</span>: <span class="literal">false</span>&#125;)</span><br><span class="line">  .should(<span class="string">&#x27;have.value&#x27;</span>, password)</span><br></pre></td></tr></table></figure>
<p>The assertion <code>.should(&#39;have.value&#39;, ...)</code> also prints the value in the Command Log as shown below, revealing the password, even if just part of it in this case.</p>
<p><img src="/blog/images/secret/partial-should.png" alt="Implicit assertion revealing a part of the asserted value"></p>
<p>To avoid this, again we need to throw our own error by using <a target="_blank" rel="noopener" href="https://on.cypress.io/should#Function"><code>should(callback)</code></a> assertion form.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cy.get(<span class="string">&#x27;[name=password]&#x27;</span>)</span><br><span class="line">  .type(password, &#123; <span class="attr">log</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">  .should(el$ =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (el$.val() !== password) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Different value of typed password&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>The custom errors are not shown in the Command Log.</p>
<p><img src="/blog/images/secret/should-cb.png" alt="Should with callback function with custom error does not reveal value"></p>
<h2><span id="avoid-ui-login">Avoid UI login</span></h2><p>It is fine to test the Login user interface - but every test after that should NOT use UI to log in. It is <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=5XQOK0v_YRE">slow and unnecessary</a>. Instead, check how the web application performs the login by looking at the DevTools during UI login. In our case, the application is performing a POST request to <code>/login</code> with the username and password form.</p>
<p><img src="/blog/images/secret/login-form.png" alt="Inspecting login network call to find POST form submission"></p>
<p>Find the recipe that matches this method among <a target="_blank" rel="noopener" href="https://github.com/cypress-io/cypress-example-recipes#logging-in-recipes">Cypress Logging in recipes</a>. In this case it is <a target="_blank" rel="noopener" href="https://github.com/cypress-io/cypress-example-recipes/tree/master/examples/logging-in__html-web-forms">HTML Web Form</a> recipe. Copying the recipe to get the following test that uses <a target="_blank" rel="noopener" href="https://on.cypress.io/request"><code>cy.request</code></a> to make the form submission post and automatically sets any returned cookies.</p>
<figure class="highlight js"><figcaption><span>cypress/integration/api-login-spec.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;logs in using cy.request&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> username = Cypress.env(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> password = Cypress.env(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// it is ok for the username to be visible in the Command Log</span></span><br><span class="line">  expect(username, <span class="string">&#x27;username was set&#x27;</span>).to.be.a(<span class="string">&#x27;string&#x27;</span>).and.not.be.empty</span><br><span class="line">  <span class="comment">// but the password value should not be shown</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> password !== <span class="string">&#x27;string&#x27;</span> || !password) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Missing password value, set using CYPRESS_password=...&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  cy.request(&#123;</span><br><span class="line">    method: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    url: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    form: <span class="literal">true</span>,</span><br><span class="line">    body: &#123;</span><br><span class="line">      username,</span><br><span class="line">      password</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  cy.getCookie(<span class="string">&#x27;connect.sid&#x27;</span>).should(<span class="string">&#x27;exist&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// now visit the profile page</span></span><br><span class="line">  cy.visit(<span class="string">&#x27;/profile&#x27;</span>).contains(<span class="string">&#x27;Email: jack@example.com&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/blog/images/secret/api-login.png" alt="Test that logs in using cy.request API call"></p>
<p>Beautiful, it is working, and we can make the login reusable by making it into a <a target="_blank" rel="noopener" href="https://on.cypress.io/custom-commands">Cypress custom command</a> or by creating a reusable function (which is simpler in my opinion). I will create and export <code>login</code> function from <code>cypress/support/index.js</code> file to be used in any test that wants to log in via API. Only tests that explicitly test the login page should not use this function - the rest can quickly login without going through the UI.</p>
<figure class="highlight js"><figcaption><span>cypress/support/index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Logs the user by making API call to POST /login.</span></span><br><span class="line"><span class="comment"> * Make sure &quot;cypress.json&quot; + CYPRESS_ environment variables</span></span><br><span class="line"><span class="comment"> * have username and password values set.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> login = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> username = Cypress.env(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> password = Cypress.env(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// it is ok for the username to be visible in the Command Log</span></span><br><span class="line">  expect(username, <span class="string">&#x27;username was set&#x27;</span>).to.be.a(<span class="string">&#x27;string&#x27;</span>).and.not.be.empty</span><br><span class="line">  <span class="comment">// but the password value should not be shown</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> password !== <span class="string">&#x27;string&#x27;</span> || !password) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Missing password value, set using CYPRESS_password=...&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  cy.request(&#123;</span><br><span class="line">    method: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    url: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    form: <span class="literal">true</span>,</span><br><span class="line">    body: &#123;</span><br><span class="line">      username,</span><br><span class="line">      password</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  cy.getCookie(<span class="string">&#x27;connect.sid&#x27;</span>).should(<span class="string">&#x27;exist&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>I really like small reusable function, partly because I can document them using JSDoc comments, as above. This gives me intelligent code completion in any place I import and use <code>login</code> function, for example from the spec file.</p>
<p><img src="/blog/images/secret/login-intellisense.jpeg" alt="Hovering over `login` shows JSDoc comments"></p>
<h2><span id="continuous-integration">Continuous integration</span></h2><p>To run <a target="_blank" rel="noopener" href="https://on.cypress.io/ci">Cypress test on CI</a> I will use CircleCI - it is simple to set up, especially by using <a target="_blank" rel="noopener" href="https://github.com/cypress-io/circleci-orb">Cypress CircleCI Orb</a>.</p>
<figure class="highlight yaml"><figcaption><span>circle.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">2.1</span></span><br><span class="line"><span class="attr">orbs:</span></span><br><span class="line">  <span class="attr">cypress:</span> <span class="string">cypress-io/cypress@1</span></span><br><span class="line"><span class="attr">workflows:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">jobs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">cypress/run:</span></span><br><span class="line">          <span class="attr">start:</span> <span class="string">&#x27;npm start&#x27;</span></span><br><span class="line">          <span class="attr">wait-on:</span> <span class="string">&#x27;http://localhost:3000&#x27;</span></span><br><span class="line">          <span class="comment"># save test run videos and screenshots on CircleCI</span></span><br><span class="line">          <span class="comment"># and they are publicly viewable, so make sure there</span></span><br><span class="line">          <span class="comment"># are no passwords in clear text!</span></span><br><span class="line">          <span class="attr">store_artifacts:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>You can find the project at <a target="_blank" rel="noopener" href="https://circleci.com/gh/bahmutov/keep-password-secret">https://circleci.com/gh/bahmutov/keep-password-secret</a>. <a target="_blank" rel="noopener" href="https://circleci.com/gh/bahmutov/keep-password-secret/2">The first run fails</a> - because I have not set <code>CYPRESS_password</code> environment variable yet.</p>
<p><img src="/blog/images/secret/first-run.png" alt="Run fails because we have not set CYPRESS_password yet"></p>
<p>We can set the required <a target="_blank" rel="noopener" href="https://circleci.com/docs/2.0/env-vars/">environment variable on CircleCI</a>, but I really like the new <a target="_blank" rel="noopener" href="https://circleci.com/docs/2.0/contexts/">CircleCI security contexts</a> because they:</p>
<ul>
<li>allow explicitly listing the context that a job expects in the circle.yml file</li>
<li>inject or stop the job depending on the security permission of the context</li>
</ul>
<p>So I will create a new security context <code>keep-password-secret</code> and will add the variable password there</p>
<p><img src="/blog/images/secret/context.png" alt="Created security context with the password environment variable"></p>
<p><strong>Tip:</strong> longer passwords are better, because UI masking still reveals a half of the word!</p>
<p>Change the <code>cypress/run</code> job by requiring the new context we have created</p>
<figure class="highlight yml"><figcaption><span>circle.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">2.1</span></span><br><span class="line"><span class="attr">orbs:</span></span><br><span class="line">  <span class="attr">cypress:</span> <span class="string">cypress-io/cypress@1</span></span><br><span class="line"><span class="attr">workflows:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">jobs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">cypress/run:</span></span><br><span class="line">          <span class="attr">context:</span> <span class="string">keep-password-secret</span></span><br><span class="line">          <span class="attr">start:</span> <span class="string">&#x27;npm start&#x27;</span></span><br><span class="line">          <span class="attr">wait-on:</span> <span class="string">&#x27;http://localhost:3000&#x27;</span></span><br><span class="line">          <span class="comment"># save test run videos and screenshots on CircleCI</span></span><br><span class="line">          <span class="comment"># and they are publicly viewable, so make sure there</span></span><br><span class="line">          <span class="comment"># are no passwords in clear text!</span></span><br><span class="line">          <span class="attr">store_artifacts:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>And the <a target="_blank" rel="noopener" href="https://circleci.com/gh/bahmutov/keep-password-secret/3">tests pass</a>! Check out the test artifacts - you can see password in the video <code>login-spec.js.mp4</code> that shows the original, insecure spec file.</p>
<p><img src="/blog/images/secret/visible-password.png" alt="Password is visible in the public video stored on the CI"></p>
<p>But the password should not be visible in any other video - because we have modified the spec code to be less &quot;chatty&quot;.</p>
<h2><span id="plugins">Plugins</span></h2><p>Watch out for any <a target="_blank" rel="noopener" href="https://on.cypress.io/plugins">plugins</a> you use with Cypress Test Runner - they might be printing secrets too. For example, I will add <a target="_blank" rel="noopener" href="https://github.com/bahmutov/cypress-failed-log">cypress-failed-log</a> plugin that prints commands to the terminal.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i -D cypress-failed-log</span><br></pre></td></tr></table></figure>
<p>The add to the support file the following
<figure class="highlight js"><figcaption><span>cypress/support/index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;cypress-failed-log&#x27;</span>)</span><br></pre></td></tr></table></figure>
and to the plugins file
<figure class="highlight js"><figcaption><span>cypport/plugins/index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">on, config</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// `on` is used to hook into various events Cypress emits</span></span><br><span class="line">  <span class="comment">// `config` is the resolved Cypress config</span></span><br><span class="line">  on(<span class="string">&#x27;task&#x27;</span>, &#123;</span><br><span class="line">    failed: <span class="built_in">require</span>(<span class="string">&#x27;cypress-failed-log/src/failed&#x27;</span>)()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Let&#39;s try this module. Let&#39;s run it locally WITH <code>CYPRESS_password=secret</code> set. I will be using <code>npm test</code> script</p>
<figure class="highlight json"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;node ./server&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;dev&quot;</span>: <span class="string">&quot;start-test 3000 &#x27;cypress open&#x27;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;start-test 3000 &#x27;cypress run&#x27;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>When running <code>as-a kps npm test</code> everything runs ok - nothing sensitive is printed to the terminal. But make a test fail - for example like this</p>
<figure class="highlight js"><figcaption><span>cypress/integration/no-password-spec.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;logs in using env variables&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> username = Cypress.env(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> password = Cypress.env(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  ... the rest <span class="keyword">of</span> the test</span><br><span class="line">  <span class="comment">// and now an incorrect assertion</span></span><br><span class="line">  cy.contains(<span class="string">&#x27;Email: jack@example.com2&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Let&#39;s test this - to make sure no sensitive information is printed on failure.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ as-a kps npx start-test 3000 \</span><br><span class="line">  <span class="string">&#x27;cypress run --spec cypress/integration/no-password-spec.js&#x27;</span></span><br></pre></td></tr></table></figure>
<p>The spec runs, fails - and the <code>cypress-failed-log</code> plugin prints the each command - but does not reveal anything sensitive.</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">  1) logs in using env variables</span><br><span class="line">assert username was set: expected jack to be a string</span><br><span class="line">assert username was set: expected jack not to be empty</span><br><span class="line">visit /login</span><br><span class="line">get [name=username]</span><br><span class="line">type jack</span><br><span class="line">assert expected &lt;input&gt; to have value jack</span><br><span class="line">get [name=password]</span><br><span class="line">get [type=Submit]</span><br><span class="line">click</span><br><span class="line">form sub --submitting form--</span><br><span class="line">page load --waiting for new page to load--</span><br><span class="line">new url http://localhost:3000/</span><br><span class="line">contains a, profile</span><br><span class="line">assert expected &lt;a&gt; to be visible</span><br><span class="line">click</span><br><span class="line">page load --waiting for new page to load--</span><br><span class="line">new url http://localhost:3000/profile</span><br><span class="line">url</span><br><span class="line">assert expected http://localhost:3000/profile to match /profile$/</span><br><span class="line">contains Email: jack@example.com2</span><br><span class="line"></span><br><span class="line">  0 passing (8s)</span><br><span class="line">  1 failing</span><br><span class="line"></span><br><span class="line">  1)  logs in using env variables:</span><br><span class="line">     CypressError: Timed out retrying: Expected to find content: &#x27;Email: jack@example.com2&#x27; but never did.</span><br></pre></td></tr></table></figure>
<p>Perfect. This plugin also saves a JSON file with the error - and the file does not reveal the password either.</p>
<figure class="highlight json"><figcaption><span>cypress/logs/failed-logs-in-using-env-variables.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;specName&quot;</span>: <span class="string">&quot;no-password-spec.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;logs in using env variables&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;suiteName&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;testName&quot;</span>: <span class="string">&quot; logs in using env variables&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;testError&quot;</span>: <span class="string">&quot;Timed out retrying: Expected to find content: &#x27;Email: jack@example.com2&#x27; but never did.&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;testCommands&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;assert username was set: expected **jack** to be a string&quot;</span>,</span><br><span class="line">    <span class="string">&quot;assert username was set: expected **jack** not to be empty&quot;</span>,</span><br><span class="line">    <span class="string">&quot;visit /login&quot;</span>,</span><br><span class="line">    <span class="string">&quot;get [name=username]&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type jack&quot;</span>,</span><br><span class="line">    <span class="string">&quot;assert expected **&lt;input&gt;** to have value **jack**&quot;</span>,</span><br><span class="line">    <span class="string">&quot;get [name=password]&quot;</span>,</span><br><span class="line">    <span class="string">&quot;get [type=Submit]&quot;</span>,</span><br><span class="line">    <span class="string">&quot;click &quot;</span>,</span><br><span class="line">    <span class="string">&quot;form sub --submitting form--&quot;</span>,</span><br><span class="line">    <span class="string">&quot;page load --waiting for new page to load--&quot;</span>,</span><br><span class="line">    <span class="string">&quot;new url http://localhost:3000/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;contains a, profile&quot;</span>,</span><br><span class="line">    <span class="string">&quot;assert expected **&lt;a&gt;** to be **visible**&quot;</span>,</span><br><span class="line">    <span class="string">&quot;click &quot;</span>,</span><br><span class="line">    <span class="string">&quot;page load --waiting for new page to load--&quot;</span>,</span><br><span class="line">    <span class="string">&quot;new url http://localhost:3000/profile&quot;</span>,</span><br><span class="line">    <span class="string">&quot;url &quot;</span>,</span><br><span class="line">    <span class="string">&quot;assert expected **http://localhost:3000/profile** to match /profile$/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;contains Email: jack@example.com2&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;screenshot&quot;</span>: <span class="string">&quot;logs-in-using-env-variables-failed.png&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Great - this plugin seems safe to use.</p>
<h2><span id="conclusions">Conclusions</span></h2><p>Keeping sensitive information out of public logs, screenshots and videos is a very important and ongoing concern. Make sure that every commit even if it  <em>only changes the tests</em> goes through code review. If a password has been accidentally revealed, even during the pull request, revoke it and use a new one. For example, here is a quick way to get a random password using Node from the terminal</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node -p <span class="string">&quot;crypto.randomBytes(16).toString(&#x27;hex&#x27;)&quot;</span></span><br><span class="line">d01ce7056fb2eab425161dcfa5bdb502</span><br></pre></td></tr></table></figure>
<p>Read more about Cypress and ways to use it in the linked resourced</p>
<ul>
<li><a href="../cypress-tips-and-tricks/">Cypress tips and tricks</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cypress.io/blog">Cypress technical blog</a></li>
<li>My <a href="../cypress-talks/">recent Cypress talks</a></li>
</ul>

      
    </div>

    
      <footer class="article-footer personal-links">
  <p>
    Follow Gleb Bahmutov <a target="_blank" rel="noopener" href="https://twitter.com/bahmutov">@bahmutov</a>,
    see his projects at <a href="https://glebbahmutov.com">glebbahmutov.com</a>,
    watch his Cypress <a target="_blank" rel="noopener" href="https://www.youtube.com/c/glebbahmutov/videos">videos</a>,
    browse his <a target="_blank" rel="noopener" href="https://slides.com/bahmutov">presentations</a>
  </p>
  <p>
    Want to know more about Cypress? Check out <a href="https://cypress.tips" target="_blank">cypress.tips</a>
  </p>
</footer>
<script src="https://rawgit.com/toddmotto/linkjuice/702066a37124081e7ad1a972844a9a91115be05a/dist/linkjuice.js"></script>
<script>
function contentFn (node, icon) {
  const s = '<a href="#' + node.id + '" class="linkjuice">' +
    node.innerHTML + ' ' + icon + '</a>\n'
  return s
}
linkjuice.init('.article-entry', {
  selectors: ['h2 span'],
  icon: '<span class="link-symbol">#</span>',
  contentFn: contentFn
});
</script>

    

    <footer class="article-footer">
      <a data-url="https://glebbahmutov.com/blog/keep-passwords-secret-in-e2e-tests/" data-id="ckywznogs00pmmvvgfbyhd9gv" class="article-share-link">Share</a>
      
        <a href="https://glebbahmutov.com/blog/keep-passwords-secret-in-e2e-tests/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/cypress/" rel="tag">cypress</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/security/" rel="tag">security</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/testing/" rel="tag">testing</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../paint-roof-white/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Paint roof white
        
      </div>
    </a>
  
  
    <a href="../mocha-and-sinon/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">How to set up Mocha with Sinon.js</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    <style>
#carbonads {
  display: block;
  overflow: hidden;
  font-size: 11px;
  font-family: Verdana, "Helvetica Neue", Helvetica, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: #258fb8;
  text-decoration: none;
}

#carbonads a:hover {
  text-decoration: underline;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  float: left;
  margin-right: 1em;
}

.carbon-img img { display: block; }

.carbon-text {
  display: block;
  float: left;
  text-align: left;
  margin-top: 0.5em;
}
@media screen and (min-width: 1024px) {
  .carbon-text {
    max-width: calc(100% - 130px - 1em);
  }
}

.carbon-poweredby {
  /*position: absolute;
  right: 0;
  bottom: 0;*/
  float: right;
  display: block;
  font-size: 11px;
}
</style>
<div class="widget-wrap">
  <div class="widget-title">&nbsp;</div>
  <div class="widget">
    <!-- Carbon Ads -->
    <script async type="text/javascript"
      src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=glebbahmutovcom"
      id="_carbonads_js"></script>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/climate/">climate</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">142</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">448</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="../tags/11ty/" rel="tag">11ty</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/" rel="tag">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/a11y/" rel="tag">a11y</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/" rel="tag">advice</a><span class="tag-list-count">112</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/algolia/" rel="tag">algolia</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/" rel="tag">angularjs</a><span class="tag-list-count">58</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/" rel="tag">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/" rel="tag">assertions</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ast/" rel="tag">ast</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/" rel="tag">boilerplate</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/" rel="tag">browser</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ci/" rel="tag">ci</a><span class="tag-list-count">27</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/circle/" rel="tag">circle</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/climate/" rel="tag">climate</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/code-coverage/" rel="tag">code coverage</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cyclejs/" rel="tag">cyclejs</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cypress/" rel="tag">cypress</a><span class="tag-list-count">177</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cypress-dashboard/" rel="tag">cypress dashboard</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/" rel="tag">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/" rel="tag">db</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/docker/" rel="tag">docker</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/documentation/" rel="tag">documentation</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/" rel="tag">es6</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/" rel="tag">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/" rel="tag">functional</a><span class="tag-list-count">70</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/" rel="tag">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/" rel="tag">git</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/github/" rel="tag">github</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/graphql/" rel="tag">graphql</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/" rel="tag">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/" rel="tag">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/hiring/" rel="tag">hiring</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/hyperapp/" rel="tag">hyperapp</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/" rel="tag">immutable</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/" rel="tag">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/" rel="tag">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">166</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/" rel="tag">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/markdown/" rel="tag">markdown</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/model-based-testing/" rel="tag">model-based testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/" rel="tag">modular development</a><span class="tag-list-count">28</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/netlify/" rel="tag">netlify</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/" rel="tag">nodejs</a><span class="tag-list-count">84</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/" rel="tag">performance</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/presentation/" rel="tag">presentation</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/" rel="tag">promises</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/" rel="tag">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ramda/" rel="tag">ramda</a><span class="tag-list-count">28</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/react/" rel="tag">react</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/react-native/" rel="tag">react native</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/" rel="tag">reactive</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/" rel="tag">reactjs</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/renovate/" rel="tag">renovate</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/screencast/" rel="tag">screencast</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/" rel="tag">security</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/" rel="tag">sentry</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/service-workers/" rel="tag">service workers</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/state-machine/" rel="tag">state machine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/" rel="tag">testing</a><span class="tag-list-count">134</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/" rel="tag">tutorial</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/typescript/" rel="tag">typescript</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/" rel="tag">ui</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/vercel/" rel="tag">vercel</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/visual-testing/" rel="tag">visual testing</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/vuejs/" rel="tag">vuejs</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/" rel="tag">web workers</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/webpack/" rel="tag">webpack</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/11ty/" style="font-size: 10.42px;">11ty</a> <a href="../tags/QUnit/" style="font-size: 11.67px;">QUnit</a> <a href="../tags/a11y/" style="font-size: 10.83px;">a11y</a> <a href="../tags/advice/" style="font-size: 18.75px;">advice</a> <a href="../tags/algolia/" style="font-size: 10.42px;">algolia</a> <a href="../tags/angularjs/" style="font-size: 17.5px;">angularjs</a> <a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a> <a href="../tags/assertions/" style="font-size: 13.33px;">assertions</a> <a href="../tags/ast/" style="font-size: 12.92px;">ast</a> <a href="../tags/boilerplate/" style="font-size: 15px;">boilerplate</a> <a href="../tags/browser/" style="font-size: 15.42px;">browser</a> <a href="../tags/ci/" style="font-size: 16.25px;">ci</a> <a href="../tags/circle/" style="font-size: 13.75px;">circle</a> <a href="../tags/climate/" style="font-size: 14.58px;">climate</a> <a href="../tags/code-coverage/" style="font-size: 14.58px;">code coverage</a> <a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a> <a href="../tags/cyclejs/" style="font-size: 12.5px;">cyclejs</a> <a href="../tags/cypress/" style="font-size: 20px;">cypress</a> <a href="../tags/cypress-dashboard/" style="font-size: 13.75px;">cypress dashboard</a> <a href="../tags/d3/" style="font-size: 10.83px;">d3</a> <a href="../tags/db/" style="font-size: 14.58px;">db</a> <a href="../tags/docker/" style="font-size: 14.17px;">docker</a> <a href="../tags/documentation/" style="font-size: 12.08px;">documentation</a> <a href="../tags/es6/" style="font-size: 14.58px;">es6</a> <a href="../tags/es7/" style="font-size: 10px;">es7</a> <a href="../tags/functional/" style="font-size: 17.92px;">functional</a> <a href="../tags/generators/" style="font-size: 11.67px;">generators</a> <a href="../tags/git/" style="font-size: 15px;">git</a> <a href="../tags/github/" style="font-size: 15.42px;">github</a> <a href="../tags/graphql/" style="font-size: 11.67px;">graphql</a> <a href="../tags/grunt/" style="font-size: 12.5px;">grunt</a> <a href="../tags/gulp/" style="font-size: 10.83px;">gulp</a> <a href="../tags/hiring/" style="font-size: 11.25px;">hiring</a> <a href="../tags/hyperapp/" style="font-size: 12.5px;">hyperapp</a> <a href="../tags/immutable/" style="font-size: 11.67px;">immutable</a> <a href="../tags/interview/" style="font-size: 10.83px;">interview</a> <a href="../tags/jade/" style="font-size: 11.25px;">jade</a> <a href="../tags/javascript/" style="font-size: 19.58px;">javascript</a> <a href="../tags/jshint/" style="font-size: 10.83px;">jshint</a> <a href="../tags/markdown/" style="font-size: 13.75px;">markdown</a> <a href="../tags/model-based-testing/" style="font-size: 10px;">model-based testing</a> <a href="../tags/modular-development/" style="font-size: 16.67px;">modular development</a> <a href="../tags/netlify/" style="font-size: 11.25px;">netlify</a> <a href="../tags/nodejs/" style="font-size: 18.33px;">nodejs</a> <a href="../tags/performance/" style="font-size: 15.83px;">performance</a> <a href="../tags/presentation/" style="font-size: 12.5px;">presentation</a> <a href="../tags/promises/" style="font-size: 17.08px;">promises</a> <a href="../tags/proposal/" style="font-size: 10.42px;">proposal</a> <a href="../tags/ramda/" style="font-size: 16.67px;">ramda</a> <a href="../tags/react/" style="font-size: 11.67px;">react</a> <a href="../tags/react-native/" style="font-size: 11.25px;">react native</a> <a href="../tags/reactive/" style="font-size: 14.17px;">reactive</a> <a href="../tags/reactjs/" style="font-size: 11.25px;">reactjs</a> <a href="../tags/renovate/" style="font-size: 11.67px;">renovate</a> <a href="../tags/screencast/" style="font-size: 10px;">screencast</a> <a href="../tags/security/" style="font-size: 13.33px;">security</a> <a href="../tags/sentry/" style="font-size: 13.75px;">sentry</a> <a href="../tags/service-workers/" style="font-size: 12.08px;">service workers</a> <a href="../tags/state-machine/" style="font-size: 10px;">state machine</a> <a href="../tags/testing/" style="font-size: 19.17px;">testing</a> <a href="../tags/tutorial/" style="font-size: 15.42px;">tutorial</a> <a href="../tags/typescript/" style="font-size: 12.5px;">typescript</a> <a href="../tags/ui/" style="font-size: 10.42px;">ui</a> <a href="../tags/vercel/" style="font-size: 13.33px;">vercel</a> <a href="../tags/visual-testing/" style="font-size: 11.25px;">visual testing</a> <a href="../tags/vuejs/" style="font-size: 11.67px;">vuejs</a> <a href="../tags/web-workers/" style="font-size: 12.08px;">web workers</a> <a href="../tags/webpack/" style="font-size: 10.83px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2022/01/">January 2022</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/12/">December 2021</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/11/">November 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/10/">October 2021</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/09/">September 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/08/">August 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/07/">July 2021</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/06/">June 2021</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/05/">May 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/04/">April 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/03/">March 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/02/">February 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/01/">January 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/12/">December 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/11/">November 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/10/">October 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/09/">September 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/07/">July 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/04/">April 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/03/">March 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/02/">February 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/01/">January 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/12/">December 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/11/">November 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/10/">October 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/09/">September 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/08/">August 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/07/">July 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/06/">June 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/05/">May 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/04/">April 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/03/">March 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/01/">January 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/12/">December 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/11/">November 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/09/">September 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/08/">August 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/06/">June 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/04/">April 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/03/">March 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/01/">January 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/11/">November 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/09/">September 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/07/">July 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/06/">June 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/05/">May 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/04/">April 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/03/">March 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/02/">February 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/01/">January 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/12/">December 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/10/">October 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/09/">September 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/08/">August 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/07/">July 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/06/">June 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/05/">May 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/04/">April 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/03/">March 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/02/">February 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/01/">January 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../wordle-page-objects/">Wordle Page Objects</a>
          </li>
        
          <li>
            <a href="../network-requests-with-cypress/">How To Check Network Requests Using Cypress</a>
          </li>
        
          <li>
            <a href="../pick-tests-using-pull-request/">Pick Tests To Run Using The Pull Request Text</a>
          </li>
        
          <li>
            <a href="../visit-non-html-page/">Visit Non-HTML Page</a>
          </li>
        
          <li>
            <a href="../know-your-tests/">Know Your Tests</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'https://glebbahmutov.com/blog/keep-passwords-secret-in-e2e-tests/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="../fancybox/jquery.fancybox.css">

  
<script src="../fancybox/jquery.fancybox.pack.js"></script>




<script src="../js/script.js"></script>


  </div>
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
<script>
(function centerMainOnAsideScroll () {
  // when aside side bar scrolls outside the view
  // it centers the main content.
  const main = document.querySelector('#main')
  const aside = document.querySelector('aside#sidebar')
  console.assert(main, 'could not get #main')
  console.assert(aside, 'could not get aside')
  // initially the aside sidebar is visible
  let asideVisible = true

  function centerMain () {
    console.log('adding class center-main')
    main.classList.add('center-main')
  }
  function leftMain () {
    main.classList.remove('center-main')
  }

  function callWhenAsideScrollsUp (becameInvisible, becameVisible) {
    return function () {
      const border = 50
      const rect = aside.getBoundingClientRect()
      if (asideVisible && rect.bottom < -border) {
        asideVisible = false
        becameInvisible()
      }

      if (!asideVisible && window.scrollY < border) {
        asideVisible = true
        becameVisible()
      }
    }
  }
  const throttleWaitMs = 250
  const onScroll = _.throttle(
    callWhenAsideScrollsUp(centerMain, leftMain),
    throttleWaitMs
  )
  window.addEventListener('scroll', onScroll)
}())
</script>

</body>
</html>
