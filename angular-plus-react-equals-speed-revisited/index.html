<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Angular plus React equals Speed revisited | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Recently I was lucky to attend ng-conf 2015 where I watched an interesting presentation by Dave Smith @djsmith42 &quot;Angular + React &#x3D; Speed&quot;. You can watch the presentation online at https:&#x2F;&#x2F;y">
<meta property="og:type" content="article">
<meta property="og:title" content="Angular plus React equals Speed revisited">
<meta property="og:url" content="https://glebbahmutov.com/blog/angular-plus-react-equals-speed-revisited/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="Recently I was lucky to attend ng-conf 2015 where I watched an interesting presentation by Dave Smith @djsmith42 &quot;Angular + React &#x3D; Speed&quot;. You can watch the presentation online at https:&#x2F;&#x2F;y">
<meta property="og:locale">
<meta property="og:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/vanilla-angular-directive.png">
<meta property="og:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/vanilla-angular-profile.png">
<meta property="og:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/react-update.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/react-update-cpu-profile.png">
<meta property="og:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/local-digest-profile.png">
<meta property="og:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/desired-paths.png">
<meta property="og:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/digest-flow.png">
<meta property="article:published_time" content="2015-03-25T04:00:00.000Z">
<meta property="article:modified_time" content="2021-06-15T13:13:30.226Z">
<meta property="article:author" content="Gleb Bahmutov">
<meta property="article:tag" content="angularjs">
<meta property="article:tag" content="performance">
<meta property="article:tag" content="reactjs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/vanilla-angular-directive.png">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="preload" href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" as="style">
  
<link rel="stylesheet" href="../css/style.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-titles">
      <div id="header-title" class="inner">
        <h1 id="logo-wrap">
          <a href="../index.html" id="logo">Better world by better software</a>
        </h1>
        <!--
        
        -->
        <!-- <span class="no-mobile">Software advice from</span> -->
        <h2 id="subtitle-wrap">
          <span class="subtitle">
            <a id="subtitle" href="https://glebbahmutov.com">Gleb Bahmutov PhD</a>
            <a id="nav-house-link" class="nav-icon" href="/" title="Home"></a>
            
              <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
            
            <a id="nav-search-btn" class="nav-icon" title="Search"></a>
            <div id="search-form-wrap">
              <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://glebbahmutov.com/blog"></form>
            </div>
          </span>
        </h2>

      </div>
    </div>
    <div id="climate-crisis">
      <h2>Our planet üåè is in danger</h2>
      <h3>Act today: <a href="/blog/climate-emergency/">what you can do</a></h3>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-angular-plus-react-equals-speed-revisited" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2015-03-25T04:00:00.000Z" itemprop="datePublished">Mar 25 2015</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/products/">products</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Angular plus React equals Speed revisited
    </h1>

    <h2 class="article-title" itemprop="name">
      Speeding up Angular 1.x demo to be on par with React
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Recently I was lucky to attend <a target="_blank" rel="noopener" href="http://www.ng-conf.org/">ng-conf 2015</a> where I watched an interesting
presentation by Dave Smith <a target="_blank" rel="noopener" href="https://twitter.com/djsmith42">@djsmith42</a> &quot;Angular + React = Speed&quot;. You can watch the presentation
online at <a target="_blank" rel="noopener" href="https://youtu.be/XQM0K6YG18s">https://youtu.be/XQM0K6YG18s</a>. During the presentation
Dave was live programming and forgot to take average delay of 250ms from the Angular 1.x and React demos,
making it unintentionally appear as if React is slower than the third Angular 2.0 implementation.
The comments under the video explain the mistake, and you can play with Angular 1.x / React implementation
by trying the <a target="_blank" rel="noopener" href="https://github.com/djsmith42/angular_react_directive_example/">code yourself</a>.</p>
<p>I downloaded the code and took a quick look. The example has 2 calendars, first implemented using Angular 1.x,
and the second using React widget included from an Angular wrapper.</p>
<p><strong>TL;DR</strong> I measured each application&#39;s performance and optimized the Angular 1.x performance; 
the improved version runs in 700ms (compared to original 15 seconds), making it comparable to React.</p>
<p><img src="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/vanilla-angular-directive.png" alt="Calendar screenshot"></p>
<p>Each of the 2 examples shows the same feature: a table implemented as a custom widget that shows a calendar.
Each cell of the calendar is a custom cell widget. You can click on a cell and it simulates an AJAX request 
to the server to fetch number of available time slots. For example I clicked on 3 cells.</p>
<h2><span id="plan-of-attack">Plan of attack</span></h2><p>During the presentation, the React blew Angular 1.x implementation out of the water. 
I was <a href="../improving-angular-web-app-performance-example/">very successful</a> 
in my work improving an angular app&#39;s speed and  wanted to investigate this very bad performance a little closer. 
In this blog post I will:</p>
<ul>
<li>describe the Angular 1.x application</li>
<li>measure its performance and will point some obvious bottlenecks</li>
<li>measure the React implementation&#39;s performance</li>
<li>improve the Angular 1.x application performance by removing the global digest cycle</li>
</ul>
<p>To better compare the implementation I clamped the synthetic timeout delay to 0ms, instead of the
initial 10 seconds. This makes the model (scopes) and view updates the main application bottlenecks.</p>
<h2><span id="angular-1x-code">Angular 1.x code</span></h2><p>The code to render vanilla Angular 1.x custom directive is below (the code uses ES6 string templates)</p>
<pre><code>angular.module(&apos;myapp&apos;, [])
  .directive(&quot;myCalendar&quot;, function() &#123;
    return &#123;
        restrict: &apos;E&apos;,
        scope: true,
        replace: true,
        template:`
          &lt;div&gt;
           &lt;button class=&quot;btn&quot; ng-hide=&quot;loaded&quot; ng-click=&quot;load()&quot;&gt;Load&lt;/button&gt;
           &lt;button class=&quot;btn&quot; ng-show=&quot;loaded&quot; ng-click=&quot;searchAll()&quot;&gt;Search all month&lt;/button&gt;
           &lt;table ng-if=&quot;loaded&quot;&gt;
            &lt;tr&gt;
             &lt;th ng-repeat=&quot;day in days&quot; class=&quot;day-header&quot;&gt;
               &#123;&#123;day&#125;&#125;
             &lt;/th&gt;
            &lt;/tr&gt;
            &lt;tr ng-repeat=&quot;hour in hours&quot;&gt;
             &lt;td ng-repeat=&quot;day in days&quot; class=&quot;hour-cell&quot;&gt;
               &lt;my-calendar-cell hour=&quot;&#123;&#123;hour&#125;&#125;&quot; day=&quot;&#123;&#123;day&#125;&#125;&quot;&gt;&lt;/my-calendar-cell&gt;
             &lt;/td&gt;
            &lt;/tr&gt;
           &lt;/table&gt;
         &lt;/button&gt;
         `,
        link: function(scope, element, attrs) &#123;
            scope.loaded = false;
            scope.hours = _.range(24);
            scope.days = DAYS;
            scope.searchAll = function() &#123;
              scope.$broadcast(&apos;allSearchRequested&apos;);
            &#125;
            scope.load = function() &#123;
              scope.loaded = true;
            &#125;
        &#125;
    &#125;
&#125;)
</code></pre><p>The calendar is simply a nested <code>ng-repeat</code> list</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">ng-repeat</span>=<span class="string">&quot;hour in hours&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span> <span class="attr">ng-repeat</span>=<span class="string">&quot;day in days&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hour-cell&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">my-calendar-cell</span> <span class="attr">hour</span>=<span class="string">&quot;&#123;&#123;hour&#125;&#125;&quot;</span> <span class="attr">day</span>=<span class="string">&quot;&#123;&#123;day&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-calendar-cell</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The &quot;Search all month&quot; button executes a broadcast to all cells</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scope.searchAll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  scope.$broadcast(<span class="string">&#x27;allSearchRequested&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The individual calendar cell code is similarly simple</p>
<pre><code>directive(&quot;myCalendarCell&quot;, function() &#123;
  return &#123;
    restrict: &apos;E&apos;,
    replace: true,
    scope: true,
    template: `
      &lt;div ng-click=&quot;cellClicked(day, hour)&quot; ng-class=&quot;cellClass()&quot;&gt;
        &lt;div ng-if=&quot;showHour()&quot; class=&quot;time&quot;&gt;
          &#123;&#123;hour&#125;&#125;:00
        &lt;/div&gt;
        &lt;div ng-if=&quot;showSpinner()&quot;&gt;
          ...
        &lt;/div&gt;
        &lt;div ng-if=&quot;showSearchResults()&quot;&gt;
          &lt;div&gt;&#123;&#123;status.searchResults.options&#125;&#125;&lt;/div&gt;
          &lt;div class=&quot;result-label&quot;&gt;results&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      `,
    link: function(scope, element, attrs) &#123;
      scope.day = attrs.day;
      scope.hour = attrs.hour;
      scope.status = &#123;&#125;;
    &#125;,
    controller: function($scope, $rootScope, $timeout) &#123;
      $scope.showSpinner = function() &#123;
        return $scope.status.isSearching;
      &#125;
      $scope.showHour = function() &#123;
        return !$scope.status.isSearching &amp;&amp; !$scope.status.searchResults;
      &#125;
      $scope.showSearchResults = function() &#123;
        return $scope.status.searchResults;
      &#125;
      $scope.cellClass = function() &#123;
        if ($scope.status.isSearching) &#123;
          return &apos;searching&apos;;
        &#125; else if ($scope.status.searchResults) &#123;
          if ($scope.status.searchResults.options &gt; 3) &#123;
            return &apos;good-results&apos;
          &#125; else if ($scope.status.searchResults.options &gt; 1) &#123;
            return &apos;weak-results&apos;
          &#125; else &#123;
            return &apos;bad-results&apos;
          &#125;
        &#125;
      &#125;
      $scope.cellClicked = function() &#123;
        delete $scope.status.searchResults;
        $scope.status.isSearching = true;
        // Simulate an AJAX request:
        $timeout(function() &#123;
          $scope.status.isSearching = false;
          $scope.status.searchResults = &#123;options: Math.floor(Math.random() * 5)&#125;;
        &#125;, randomMillis());
      &#125;
      $scope.$on(&apos;allSearchRequested&apos;, function() &#123;
        $scope.cellClicked();
      &#125;);
    &#125;
  &#125;
&#125;)
</code></pre><p>We can trigger the search by clicking the cell or by receiving an even <code>allSearchRequested</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-click</span>=<span class="string">&quot;cellClicked(day, hour)&quot;</span> <span class="attr">ng-class</span>=<span class="string">&quot;cellClass()&quot;</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$scope.cellClicked = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">delete</span> $scope.status.searchResults;</span><br><span class="line">  $scope.status.isSearching = <span class="literal">true</span>;</span><br><span class="line">  <span class="comment">// Simulate an AJAX request:</span></span><br><span class="line">  $timeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $scope.status.isSearching = <span class="literal">false</span>;</span><br><span class="line">    $scope.status.searchResults = &#123;<span class="attr">options</span>: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">5</span>)&#125;;</span><br><span class="line">  &#125;, randomMillis());</span><br><span class="line">&#125;</span><br><span class="line">$scope.$on(<span class="string">&#x27;allSearchRequested&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $scope.cellClicked();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3><span id="angular-1x-performance">Angular 1.x performance</span></h3><p>I am running the examples using angular 1.4.0-beta.6. The calendar&#39;s performance is atrocious. The &quot;Search all month&quot;
takes around 15 seconds!</p>
<p><img src="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/vanilla-angular-profile.png" alt="Angular 1.x cpu profile"></p>
<p>Using <a target="_blank" rel="noopener" href="https://github.com/bahmutov/code-snippets/blob/master/ng-count-watchers.js">ng-count-watchers</a> code snippet I counted 5272 watchers in this page. The majority come
from this Angular 1.x calendar. </p>
<figure class="highlight html"><figcaption><span>individual cell template</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-click</span>=<span class="string">&quot;cellClicked(day, hour)&quot;</span> <span class="attr">ng-class</span>=<span class="string">&quot;cellClass()&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-if</span>=<span class="string">&quot;showHour()&quot;</span> <span class="attr">class</span>=<span class="string">&quot;time&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;hour&#125;&#125;:00</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-if</span>=<span class="string">&quot;showSpinner()&quot;</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-if</span>=<span class="string">&quot;showSearchResults()&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;status.searchResults.options&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;result-label&quot;</span>&gt;</span>results<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The watchers are created for these expressions</p>
<ul>
<li><code>ng-class=&quot;cellClass()&quot;</code></li>
<li><code>ng-if=&quot;showHour()&quot;</code></li>
<li><code>&#123;&#123;hour&#125;&#125;:00</code></li>
<li><code>ng-if=&quot;showSpinner()&quot;</code></li>
<li><code>ng-if=&quot;showSearchResults()&quot;</code></li>
<li><code>&#123;&#123;status.searchResults.options&#125;&#125;</code></li>
</ul>
<p>Each cell has 6 watch expressions, and there are 720 cells, making it every expensive table to update. 
The idle digest cycle runs for about 14ms measured using <a target="_blank" rel="noopener" href="https://github.com/bahmutov/code-snippets/blob/master/ng-idle-apply-timing.js">ng-idle-apply-timing.js</a>.</p>
<p>While this is not too bad, the fact that we have to rerun it on every cell update means we are running
the entire digest cycle many times. Using <a target="_blank" rel="noopener" href="https://github.com/bahmutov/code-snippets/blob/master/ng-count-digest-cycles.js">ng-count-digest-cycles.js</a> code snippet I observed
1490 digest cycles during the calendar computation.</p>
<h2><span id="react-performance">React performance</span></h2><p>React implementation takes around 700ms to generate the values and update the calendar. You can
see how fast it performs from the screen capture below</p>
<p><img src="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/react-update.gif" alt="React update"></p>
<p>Here is the CPU profile</p>
<p><img src="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/react-update-cpu-profile.png" alt="React update CPU profile"></p>
<h2><span id="improving-angular-1x-performance-by-removing-global-scope-apply">Improving Angular 1.x performance by removing global scope apply</span></h2><p>The simplest bottleneck to remove was to stop rechecking all cells whenever single cell fetched its own
data. The current code simulated an Ajax request using <code>$timeout</code> call that triggers global digest cycle.
Angular 1.4 has a new parameter in <a target="_blank" rel="noopener" href="https://docs.angularjs.org/api/ng/service/$timeout">$timeout</a>, and we simply pass <code>false</code> to avoid automatic
<code>$rootScope.$apply()</code> after we get fake data back.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$scope.cellClicked = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">delete</span> $scope.status.searchResults;</span><br><span class="line">  $scope.status.isSearching = <span class="literal">true</span>;</span><br><span class="line">  <span class="comment">// Simulate an AJAX request:</span></span><br><span class="line">  $timeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $scope.status.isSearching = <span class="literal">false</span>;</span><br><span class="line">    $scope.status.searchResults = &#123;<span class="attr">options</span>: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">5</span>)&#125;;</span><br><span class="line">    $scope.$digest();</span><br><span class="line">  &#125;, randomMillis(), <span class="literal">false</span>); <span class="comment">// false - do not invoke $scope.$apply</span></span><br><span class="line">&#125;</span><br><span class="line">$scope.$on(<span class="string">&#x27;allSearchRequested&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $scope.cellClicked();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Instead of automatically calling <code>$rootScope.$apply()</code> at the end of the <code>$timeout</code> we manually
call <code>$scope.$digest()</code> that only updates the current cell&#39;s scope (any any children scopes). </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$timeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  $scope.$digest();</span><br><span class="line">&#125;, delay, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>This is  a LOT <a href="../local-angular-scopes/">more efficient</a>.
Let us measure the performance of this change. Remember, at the end of each request we do NOT
check every watch expression in the <em>entire calendar</em>. Instead we update the scope object and run the digest
cycle in the current cell and update its DOM via two-way binding.</p>
<p><img src="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/local-digest-profile.png" alt="Local digest CPU profile"></p>
<p><strong>BOOM!</strong> 650ms. The calendar updates as quick as the React version. 3 word change. The global digest
cycle ran only twice.</p>
<h2><span id="discussion">Discussion</span></h2><p>The original example repo has a pull request <a target="_blank" rel="noopener" href="https://github.com/djsmith42/angular_react_directive_example/pull/2">#2</a>
where Lucas Galfas√≥ uses the same approach (local digest cycle) + one time bindings to speed up the
Angular 1.x version. Dave Smith rejects running the local digest cycle because this is not an option when
executing <code>$http</code> requests.</p>
<blockquote>
<p>Your most significant change is the localApply = false for the call to $timeout with a local digest. 
I specifically chose not to do that for this demo because this was meant to simulate an AJAX request with $http, 
which does not provide a localApply feature.</p>
</blockquote>
<p>First, the current beta version of Angular 1.4 already adds something similar to this in the way of
<code>$http.useApplyAsync(true)</code> that combines multiple <code>scope.$apply</code> calls from <code>$http</code> service into one. 
I feel a full support option for skipping the root scope apply call could be added next.</p>
<p>Second, Angular is a pretty flexible framework. Any data fetch mechanism used from a React
application (remember, React is just a View library, so it needs something extra to actually fetch the data)
could be easily used from an Angular app too. For example you can use <a target="_blank" rel="noopener" href="https://fetch.spec.whatwg.org/">fetch API</a>,
which replaced the painful XMLHttpRequest mechanism.</p>
<p>I always find two bottlenecks in my angular applications: my code and the digest cycle. I can optimize
the problems in my code using CPU profiler, Chrome DevTools for example warns me about functions that
cannot be optimized for some reason (like having try-catch block). To improve the digest cycle I can
minimize number of expensive watchers, for example by precomputing filtered results, or by using
one way data binding.</p>
<h3><span id="angular-digest-cycle-and-the-prototyping-speed">Angular digest cycle and the prototyping speed</span></h3><p>In general I believe that Angular gives me a great power to develop any application in three simple steps</p>
<ul>
<li>Create static page prototype with most HTML layout and CSS styles applied<ul>
<li>I can show the page to other people to get feedback and quickly get to the look I need.</li>
<li>Most of this is done by the designer more familiar with the HTML / CSS tools rather than web programming.</li>
</ul>
</li>
<li>Add several directives to get live data via two-way binding.<ul>
<li>The static page suddenly becomes a live web application. </li>
<li>The built-in scopes and directives are simple enough for people without programming experience to use</li>
<li>This step is used again to refine the desired application features</li>
</ul>
</li>
<li>Improve the performance by removing some degrees of freedom<ul>
<li>This is where I would come in as a developer</li>
<li>Replace the flexibility of two-way data binding with more performance one-way binding</li>
<li>Replace global application digest cycle with local ones. The data flow is known and individual
pieces can be isolated</li>
<li>Stop attaching everything to the scope and use controller instances instead, see 
<a href="../separate-model-from-view-in-angular/">Separate model from view</a></li>
</ul>
</li>
</ul>
<p>The beauty of step 1 and 2 is the simplicity and the fact that it just works. Yes, comparing plain scope
objects when performing dirty checking is slow. But optimizing this operation before knowing what the final
features seems a little premature to me, just like putting a concrete path before one knows where the
people would walk.</p>
<p><img src="https://raw.githubusercontent.com/bahmutov/talks/master/images/desired-paths.png" alt="desired paths"></p>
<p>Angular team is working on replacing the plain scope objects with their graphs of relationships
with trees of data, where the data flows are acyclical (watch Victor Savkin&#39;s 
<a target="_blank" rel="noopener" href="https://youtu.be/jvKGQSFQf10">Change detection reinvented</a> talk).
While this will lead to faster performance we will loose some of the &quot;it just works&quot; magic I 
like about using Angular to prototype. Instead I would prefer to be able to isolate the digest cycle
to subcomponents. Imagine the follow data flow</p>
<p><img src="https://raw.githubusercontent.com/bahmutov/talks/master/images/angular-plus-react/digest-flow.png" alt="combined digest flow"></p>
<p>Inside the custom directives we have the current dirty checking because a scope property is allowed
to access any other <em>local</em> scope property. Between the components we can use unidirectional
data flow without cycles (for example by broadcasting events). Each custom directive&#39;s scope 
is isolated from other directives&#39; scopes.
This should speed up the global digest cycle while leaving each directive simple to program.</p>
<p><strong>Disclaimer:</strong> When talking about the application development speed in the steps 1 and 2, 
I am talking about a prototype coded by a design-inclined web developer. I love the 
immutable data and functional javascript myself (as a proof, see all my blog posts on 
<a href="../tags/functional/">functional programming</a>). I just think that creating a live web app
using Angular provides a more visual and intuitive path than writing JSX code!
For example, see <a target="_blank" rel="noopener" href="http://onehungrymind.com/just-enough-angular-for-designers/">Just Enough Angular for Designers</a>
tutorial - I honestly believe a designer who can code static site in HTML and CSS can turn
it into a web app with ease.</p>

      
    </div>

    
      <footer class="article-footer personal-links">
  <p>
    Follow Gleb Bahmutov <a target="_blank" rel="noopener" href="https://twitter.com/bahmutov">@bahmutov</a>,
    see his projects at <a href="https://glebbahmutov.com">glebbahmutov.com</a>,
    watch his Cypress <a target="_blank" rel="noopener" href="https://www.youtube.com/c/glebbahmutov/videos">videos</a>,
    browse his <a target="_blank" rel="noopener" href="https://slides.com/bahmutov">presentations</a>
  </p>
  <p>
    Want to know more about Cypress? Check out <a href="https://cypress.tips" target="_blank">cypress.tips</a>
  </p>
</footer>
<script src="https://rawgit.com/toddmotto/linkjuice/702066a37124081e7ad1a972844a9a91115be05a/dist/linkjuice.js"></script>
<script>
function contentFn (node, icon) {
  const s = '<a href="#' + node.id + '" class="linkjuice">' +
    node.innerHTML + ' ' + icon + '</a>\n'
  return s
}
linkjuice.init('.article-entry', {
  selectors: ['h2 span'],
  icon: '<span class="link-symbol">#</span>',
  contentFn: contentFn
});
</script>

    

    <footer class="article-footer">
      <a data-url="https://glebbahmutov.com/blog/angular-plus-react-equals-speed-revisited/" data-id="cku2u48t301r8qovg6c6f6e4h" class="article-share-link">Share</a>
      
        <a href="https://glebbahmutov.com/blog/angular-plus-react-equals-speed-revisited/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/angularjs/" rel="tag">angularjs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/performance/" rel="tag">performance</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/reactjs/" rel="tag">reactjs</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../web-working-like-a-boss/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Web working like a boss
        
      </div>
    </a>
  
  
    <a href="../remove-boilerplate-from-promise-chains/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Remove boilerplate from promise chains</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    <style>
#carbonads {
  display: block;
  overflow: hidden;
  font-size: 11px;
  font-family: Verdana, "Helvetica Neue", Helvetica, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: #258fb8;
  text-decoration: none;
}

#carbonads a:hover {
  text-decoration: underline;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  float: left;
  margin-right: 1em;
}

.carbon-img img { display: block; }

.carbon-text {
  display: block;
  float: left;
  text-align: left;
  margin-top: 0.5em;
}
@media screen and (min-width: 1024px) {
  .carbon-text {
    max-width: calc(100% - 130px - 1em);
  }
}

.carbon-poweredby {
  /*position: absolute;
  right: 0;
  bottom: 0;*/
  float: right;
  display: block;
  font-size: 11px;
}
</style>
<div class="widget-wrap">
  <div class="widget-title">&nbsp;</div>
  <div class="widget">
    <!-- Carbon Ads -->
    <script async type="text/javascript"
      src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=glebbahmutovcom"
      id="_carbonads_js"></script>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/climate/">climate</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">138</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">418</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="../tags/11ty/" rel="tag">11ty</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/" rel="tag">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/a11y/" rel="tag">a11y</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/" rel="tag">advice</a><span class="tag-list-count">109</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/algolia/" rel="tag">algolia</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/" rel="tag">angularjs</a><span class="tag-list-count">58</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/" rel="tag">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/" rel="tag">assertions</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ast/" rel="tag">ast</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/" rel="tag">boilerplate</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/" rel="tag">browser</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ci/" rel="tag">ci</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/circle/" rel="tag">circle</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/climate/" rel="tag">climate</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/code-coverage/" rel="tag">code coverage</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cyclejs/" rel="tag">cyclejs</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cypress/" rel="tag">cypress</a><span class="tag-list-count">144</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cypress-dashboard/" rel="tag">cypress dashboard</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/" rel="tag">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/" rel="tag">db</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/docker/" rel="tag">docker</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/documentation/" rel="tag">documentation</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/" rel="tag">es6</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/" rel="tag">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/" rel="tag">functional</a><span class="tag-list-count">68</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/" rel="tag">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/" rel="tag">git</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/github/" rel="tag">github</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/graphql/" rel="tag">graphql</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/" rel="tag">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/" rel="tag">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/hiring/" rel="tag">hiring</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/hyperapp/" rel="tag">hyperapp</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/" rel="tag">immutable</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/" rel="tag">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/" rel="tag">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">165</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/" rel="tag">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/markdown/" rel="tag">markdown</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/model-based-testing/" rel="tag">model-based testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/" rel="tag">modular development</a><span class="tag-list-count">28</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/netlify/" rel="tag">netlify</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/" rel="tag">nodejs</a><span class="tag-list-count">84</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/" rel="tag">performance</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/presentation/" rel="tag">presentation</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/" rel="tag">promises</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/" rel="tag">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ramda/" rel="tag">ramda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/react/" rel="tag">react</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/react-native/" rel="tag">react native</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/" rel="tag">reactive</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/" rel="tag">reactjs</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/renovate/" rel="tag">renovate</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/screencast/" rel="tag">screencast</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/" rel="tag">security</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/" rel="tag">sentry</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/service-workers/" rel="tag">service workers</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/state-machine/" rel="tag">state machine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/" rel="tag">testing</a><span class="tag-list-count">130</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/" rel="tag">tutorial</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/typescript/" rel="tag">typescript</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/" rel="tag">ui</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/vercel/" rel="tag">vercel</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/visual-testing/" rel="tag">visual testing</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/vuejs/" rel="tag">vuejs</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/" rel="tag">web workers</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/webpack/" rel="tag">webpack</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/11ty/" style="font-size: 10.38px;">11ty</a> <a href="../tags/QUnit/" style="font-size: 11.54px;">QUnit</a> <a href="../tags/a11y/" style="font-size: 10.77px;">a11y</a> <a href="../tags/advice/" style="font-size: 18.85px;">advice</a> <a href="../tags/algolia/" style="font-size: 10.38px;">algolia</a> <a href="../tags/angularjs/" style="font-size: 17.69px;">angularjs</a> <a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a> <a href="../tags/assertions/" style="font-size: 13.08px;">assertions</a> <a href="../tags/ast/" style="font-size: 12.69px;">ast</a> <a href="../tags/boilerplate/" style="font-size: 15px;">boilerplate</a> <a href="../tags/browser/" style="font-size: 15.77px;">browser</a> <a href="../tags/ci/" style="font-size: 16.54px;">ci</a> <a href="../tags/circle/" style="font-size: 12.69px;">circle</a> <a href="../tags/climate/" style="font-size: 14.62px;">climate</a> <a href="../tags/code-coverage/" style="font-size: 13.46px;">code coverage</a> <a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a> <a href="../tags/cyclejs/" style="font-size: 12.31px;">cyclejs</a> <a href="../tags/cypress/" style="font-size: 19.62px;">cypress</a> <a href="../tags/cypress-dashboard/" style="font-size: 13.85px;">cypress dashboard</a> <a href="../tags/d3/" style="font-size: 10.77px;">d3</a> <a href="../tags/db/" style="font-size: 14.62px;">db</a> <a href="../tags/docker/" style="font-size: 14.23px;">docker</a> <a href="../tags/documentation/" style="font-size: 11.92px;">documentation</a> <a href="../tags/es6/" style="font-size: 14.62px;">es6</a> <a href="../tags/es7/" style="font-size: 10px;">es7</a> <a href="../tags/functional/" style="font-size: 18.08px;">functional</a> <a href="../tags/generators/" style="font-size: 11.54px;">generators</a> <a href="../tags/git/" style="font-size: 15px;">git</a> <a href="../tags/github/" style="font-size: 15.38px;">github</a> <a href="../tags/graphql/" style="font-size: 11.15px;">graphql</a> <a href="../tags/grunt/" style="font-size: 12.31px;">grunt</a> <a href="../tags/gulp/" style="font-size: 10.77px;">gulp</a> <a href="../tags/hiring/" style="font-size: 10.77px;">hiring</a> <a href="../tags/hyperapp/" style="font-size: 12.31px;">hyperapp</a> <a href="../tags/immutable/" style="font-size: 11.54px;">immutable</a> <a href="../tags/interview/" style="font-size: 10.77px;">interview</a> <a href="../tags/jade/" style="font-size: 11.15px;">jade</a> <a href="../tags/javascript/" style="font-size: 20px;">javascript</a> <a href="../tags/jshint/" style="font-size: 10.77px;">jshint</a> <a href="../tags/markdown/" style="font-size: 13.85px;">markdown</a> <a href="../tags/model-based-testing/" style="font-size: 10px;">model-based testing</a> <a href="../tags/modular-development/" style="font-size: 16.92px;">modular development</a> <a href="../tags/netlify/" style="font-size: 11.15px;">netlify</a> <a href="../tags/nodejs/" style="font-size: 18.46px;">nodejs</a> <a href="../tags/performance/" style="font-size: 16.15px;">performance</a> <a href="../tags/presentation/" style="font-size: 12.31px;">presentation</a> <a href="../tags/promises/" style="font-size: 17.31px;">promises</a> <a href="../tags/proposal/" style="font-size: 10.38px;">proposal</a> <a href="../tags/ramda/" style="font-size: 10px;">ramda</a> <a href="../tags/react/" style="font-size: 11.54px;">react</a> <a href="../tags/react-native/" style="font-size: 11.15px;">react native</a> <a href="../tags/reactive/" style="font-size: 14.23px;">reactive</a> <a href="../tags/reactjs/" style="font-size: 11.15px;">reactjs</a> <a href="../tags/renovate/" style="font-size: 11.54px;">renovate</a> <a href="../tags/screencast/" style="font-size: 10px;">screencast</a> <a href="../tags/security/" style="font-size: 13.08px;">security</a> <a href="../tags/sentry/" style="font-size: 13.85px;">sentry</a> <a href="../tags/service-workers/" style="font-size: 11.92px;">service workers</a> <a href="../tags/state-machine/" style="font-size: 10px;">state machine</a> <a href="../tags/testing/" style="font-size: 19.23px;">testing</a> <a href="../tags/tutorial/" style="font-size: 15.77px;">tutorial</a> <a href="../tags/typescript/" style="font-size: 11.92px;">typescript</a> <a href="../tags/ui/" style="font-size: 10.38px;">ui</a> <a href="../tags/vercel/" style="font-size: 13.08px;">vercel</a> <a href="../tags/visual-testing/" style="font-size: 11.15px;">visual testing</a> <a href="../tags/vuejs/" style="font-size: 11.54px;">vuejs</a> <a href="../tags/web-workers/" style="font-size: 11.92px;">web workers</a> <a href="../tags/webpack/" style="font-size: 10.77px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/09/">September 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/08/">August 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/07/">July 2021</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/06/">June 2021</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/05/">May 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/04/">April 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/03/">March 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/02/">February 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/01/">January 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/12/">December 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/11/">November 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/10/">October 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/09/">September 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/07/">July 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/04/">April 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/03/">March 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/02/">February 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/01/">January 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/12/">December 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/11/">November 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/10/">October 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/09/">September 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/08/">August 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/07/">July 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/06/">June 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/05/">May 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/04/">April 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/03/">March 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/01/">January 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/12/">December 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/11/">November 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/09/">September 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/08/">August 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/06/">June 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/04/">April 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/03/">March 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/01/">January 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/11/">November 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/09/">September 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/07/">July 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/06/">June 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/05/">May 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/04/">April 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/03/">March 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/02/">February 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/01/">January 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/12/">December 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/10/">October 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/09/">September 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/08/">August 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/07/">July 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/06/">June 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/05/">May 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/04/">April 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/03/">March 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/02/">February 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/01/">January 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../dynamic-tests-from-fixture/">Dynamic Tests From Cypress Fixture</a>
          </li>
        
          <li>
            <a href="../what-i-do-after-a-conference/">What I Do After A Conference</a>
          </li>
        
          <li>
            <a href="../test-plain-or-markdown-file/">Test Plain Or Markdown File Using Cypress</a>
          </li>
        
          <li>
            <a href="../skip-cypress-install-on-ci/">Skip Cypress Install On CI</a>
          </li>
        
          <li>
            <a href="../verify-phone-part-two/">How To Verify Phone Number During Tests Part 2</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'https://glebbahmutov.com/blog/angular-plus-react-equals-speed-revisited/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="../fancybox/jquery.fancybox.css">

  
<script src="../fancybox/jquery.fancybox.pack.js"></script>




<script src="../js/script.js"></script>


  </div>
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
<script>
(function centerMainOnAsideScroll () {
  // when aside side bar scrolls outside the view
  // it centers the main content.
  const main = document.querySelector('#main')
  const aside = document.querySelector('aside#sidebar')
  console.assert(main, 'could not get #main')
  console.assert(aside, 'could not get aside')
  // initially the aside sidebar is visible
  let asideVisible = true

  function centerMain () {
    console.log('adding class center-main')
    main.classList.add('center-main')
  }
  function leftMain () {
    main.classList.remove('center-main')
  }

  function callWhenAsideScrollsUp (becameInvisible, becameVisible) {
    return function () {
      const border = 50
      const rect = aside.getBoundingClientRect()
      if (asideVisible && rect.bottom < -border) {
        asideVisible = false
        becameInvisible()
      }

      if (!asideVisible && window.scrollY < border) {
        asideVisible = true
        becameVisible()
      }
    }
  }
  const throttleWaitMs = 250
  const onScroll = _.throttle(
    callWhenAsideScrollsUp(centerMain, leftMain),
    throttleWaitMs
  )
  window.addEventListener('scroll', onScroll)
}())
</script>

</body>
</html>
