<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Pick latest promise | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Problem: as the user types text, asynchronously search using the
entered text. Display the results from the latest search.
This problem is classic power showcase of the functional reactive
programming">
<meta property="og:type" content="article">
<meta property="og:title" content="Pick latest promise">
<meta property="og:url" content="http://glebbahmutov.com/blog/pick-latest-promise/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="Problem: as the user types text, asynchronously search using the
entered text. Display the results from the latest search.
This problem is classic power showcase of the functional reactive
programming">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pick latest promise">
<meta name="twitter:description" content="Problem: as the user types text, asynchronously search using the
entered text. Display the results from the latest search.
This problem is classic power showcase of the functional reactive
programming">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="../css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="..//" id="logo">Better world by better software</a>
      </h1>
      <!--
      
        <h2 id="subtitle-wrap">
          <a href="..//" id="subtitle">Software advice from Dr. Gleb Bahmutov PhD</a>
        </h2>
      
      -->
      <h2 id="subtitle-wrap">
        <span class="subtitle"><span class="no-mobile">Software advice from</span>
        <a id="subtitle" href="http://glebbahmutov.com">Dr. Gleb Bahmutov PhD</a></span>
      </h2>
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="..//">Home</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://glebbahmutov.com/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-pick-latest-promise" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2014-07-23T04:00:00.000Z" itemprop="datePublished">Jul 23 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/products/">products</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Pick latest promise
    </h1>

    <h2 class="article-title" itemprop="name">
      Promise throttling and flatMapLatest equivalent
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Problem: as the user types text, asynchronously search using the
entered text. Display the results from the latest search.</p>
<p>This problem is classic power showcase of the functional reactive
programming. Here is sample implementation using
<a href="https://github.com/Reactive-Extensions/RxJS#why-rxjs" target="_blank" rel="external">RxJs</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $input = $(<span class="string">&apos;#input&apos;</span>);</span><br><span class="line"><span class="comment">/* Only get the value from each key up */</span></span><br><span class="line"><span class="keyword">var</span> keyups = Rx.Observable.fromEvent($input, <span class="string">&apos;keyup&apos;</span>)</span><br><span class="line">    .map(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>{</span><br><span class="line">        <span class="keyword">return</span> e.target.value;</span><br><span class="line">    })</span><br><span class="line">    .filter(<span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>{</span><br><span class="line">        <span class="keyword">return</span> text.length &gt; <span class="number">2</span>;</span><br><span class="line">    });</span><br><span class="line"><span class="comment">/* Now throttle/debounce the input for 500ms */</span></span><br><span class="line"><span class="keyword">var</span> throttled = keyups</span><br><span class="line">    .throttle(<span class="number">500</span> <span class="comment">/* ms */</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="comment">/* Now get only distinct values, so we eliminate the arrows and other control characters */</span></span><br><span class="line"><span class="keyword">var</span> distinct = throttled</span><br><span class="line">    .distinctUntilChanged();</span><br><span class="line"><span class="comment">/* search Wikipedia, returns a promise */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">searchWikipedia</span> (<span class="params">term</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> $.ajax({</span><br><span class="line">        url: <span class="string">&apos;http://en.wikipedia.org/w/api.php&apos;</span>,</span><br><span class="line">        dataType: <span class="string">&apos;jsonp&apos;</span>,</span><br><span class="line">        data: {</span><br><span class="line">            action: <span class="string">&apos;opensearch&apos;</span>,</span><br><span class="line">            format: <span class="string">&apos;json&apos;</span>,</span><br><span class="line">            search: term</span><br><span class="line">        }</span><br><span class="line">    }).promise();</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> suggestions = distinct</span><br><span class="line">    .flatMapLatest(searchWikipedia); <span class="comment">// 2</span></span><br><span class="line">suggestions.subscribe(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>{</span><br><span class="line">    <span class="comment">// display results</span></span><br><span class="line">  }, <span class="function"><span class="keyword">function</span> <span class="title">onError</span>(<span class="params">error</span>) </span>{</span><br><span class="line">    <span class="comment">// display error message</span></span><br><span class="line">  });</span><br></pre></td></tr></table></figure>
<p>Notice several interesting features reactive programming implements that are difficult
to implement even using promises, and a major pain to implement using callbacks.</p>
<ul>
<li><p>we throttle key events and only generate an event with entered text once the user
stopped typing for 500ms, line <code>// 1</code></p>
</li>
<li><p>Because AJAX requests could return out of order, we need to make sure we only display
results from the <em>last</em> search request. We are ignoring any search results from non-last
search requests, line <code>// 2</code></p>
</li>
</ul>
<p>Can we implement same features using promises?</p>
<h2 id="throttling">Throttling</h2><p><a href="https://twitter.com/auser" target="_blank" rel="external">Ari Lerner</a> in his <a href="https://www.ng-book.com/" target="_blank" rel="external">ng-book</a> gives
good example how to throttle requests using AngularJs
<a href="https://docs.angularjs.org/api/ng/service/$timeout" target="_blank" rel="external">$timeout</a> service.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app.controller(<span class="string">&apos;ServiceController&apos;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope, $timeout, githubService</span>) </span>{</span><br><span class="line">  $scope.$watch(<span class="string">&apos;username&apos;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">newUserName</span>) </span>{ <span class="comment">// 1</span></span><br><span class="line">    <span class="comment">// If there is a timeout already in progress, cancel it</span></span><br><span class="line">    <span class="keyword">if</span> (timeout) $timeout.cancel(timeout); <span class="comment">// 2</span></span><br><span class="line">    timeout = $timeout(<span class="function"><span class="keyword">function</span> <span class="title">search</span>(<span class="params"></span>) </span>{</span><br><span class="line">      githubService.search(newUserName)</span><br><span class="line">                   .success(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>{</span><br><span class="line">                      <span class="comment">// render data</span></span><br><span class="line">                   });</span><br><span class="line">    }, <span class="number">350</span>); }</span><br><span class="line">  });</span><br><span class="line">});</span><br></pre></td></tr></table></figure>
<p>Any time user changes the <code>username</code> value by typing into a text box, a callback function
will execute (line <code>// 1</code>). Instead of searching immediately, we set a timeout of 350ms.
If there is already a timeout, we cancel it (line <code>// 2</code>).</p>
<h2 id="using-latest-result">Using latest result</h2><p>The above implementation still suffers from a huge issue. We still might execute several
search requests in parallel.</p>
<pre><code>at 0 ms user types &apos;john&apos;
at 350ms we <span class="operator"><span class="keyword">call</span> the <span class="keyword">search</span> service <span class="keyword">for</span> <span class="string">&apos;john&apos;</span>
<span class="keyword">at</span> <span class="number">1000</span>ms <span class="keyword">user</span> gets tired <span class="keyword">of</span> waiting <span class="keyword">and</span> types <span class="string">&apos;mary&apos;</span>
<span class="keyword">at</span> <span class="number">1350</span>ms we <span class="keyword">call</span> the <span class="keyword">search</span> service <span class="keyword">for</span> <span class="string">`mary`</span>
<span class="keyword">at</span> <span class="number">1400</span>ms <span class="keyword">search</span> <span class="keyword">returns</span> results <span class="keyword">for</span> <span class="string">`mary`</span>
<span class="keyword">at</span> <span class="number">1600</span>ms <span class="keyword">search</span> <span class="keyword">returns</span> results <span class="keyword">for</span> <span class="string">`john`</span></span>
</code></pre><p>Because the first search takes longer, user briefly sees <em>second</em> search results,
then the screen flips to <em>first</em> results.
How do we use only the results of the latest promise?</p>
<p>Promises are easy to either chain <code>p1.then(p2).then ...</code> or execute in parallel
<code>Q.all([p1, p2]).then ...</code>. It is much harder to control them when promises <code>p1</code> and <code>p2</code>
can execute in parallel, but only the <code>p2</code> should be used.</p>
<h3 id="chaining">chaining</h3><p>We could make sure the last promise is always used by chaining it to the current latest
one</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> latest;</span><br><span class="line"><span class="comment">// same timeout code as above</span></span><br><span class="line"><span class="keyword">var</span> search = githubService.search(userName); <span class="comment">// 1</span></span><br><span class="line">Q(latest).then(search);</span><br></pre></td></tr></table></figure>
<p>This code always adds new search promise returned in <code>// 1</code> to the current latest
promise. The searches execute in parallel, but they will be displayed in order.</p>
<p>Unfortunately this code has a huge problem. Every promise in the chain has to resolve, before
latest results can be displayed, even if the last search request has returned.</p>
<pre><code><span class="keyword">at</span> <span class="number">350</span>ms latest promise <span class="keyword">is</span> search <span class="keyword">for</span> `john`
<span class="keyword">at</span> <span class="number">1350</span>ms we add <span class="keyword">second</span> link <span class="keyword">to</span> search <span class="keyword">for</span> `mary`
    search(&apos;john&apos;).<span class="keyword">then</span>(search(`mary&apos;))
<span class="keyword">at</span> <span class="number">1400</span>ms <span class="keyword">the</span> search <span class="keyword">for</span> &apos;mary&apos; gets resolved AND WAITS
<span class="keyword">at</span> <span class="number">1600</span>ms <span class="keyword">the</span> search <span class="keyword">for</span> &apos;john&apos; gets resolved,
    <span class="keyword">then</span> <span class="keyword">the</span> search <span class="keyword">for</span> `mary` starts (already resolved)
    <span class="keyword">then</span> `mary` results are displayed
</code></pre><p>We are correctly ignoring search results from non-latest promise, but we still wait
for 200ms. This code also has another problem - if non-latest promise fails, the entire
chain fails!</p>
<h3 id="detecting-latest-promise">detecting latest promise</h3><p>Instead of using chaining to get the latest results, we could just ignore results from
non-latest promises. We can keep each promise separate, but add on a check</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> latest;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ensureLatest</span>(<span class="params">p</span>) </span>{</span><br><span class="line">  latest = p;</span><br><span class="line">  <span class="keyword">return</span> latest.then(<span class="function"><span class="keyword">function</span> (<span class="params">myPromise, value</span>) </span>{ <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">if</span> (myPromise !== latest) {</span><br><span class="line">      <span class="comment">// this promise is no longer latest, ignore</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&apos;not latest&apos;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  }.bind(<span class="literal">null</span>, latest));</span><br><span class="line">}</span><br><span class="line">ensureLatest(githubService.search(userName)).then(...)</span><br></pre></td></tr></table></figure>
<p>We keep a reference to the latest promise, and after a promise has been resolved
check if it is the same. If not, we throw an error we can detect in other parts of code.
Our search example now executes correctly and efficiently</p>
<pre><code><span class="keyword">at</span> <span class="number">350</span>ms latest promise is search <span class="keyword">for</span> `john`
<span class="keyword">at</span> <span class="number">1350</span>ms latest promise is search <span class="keyword">for</span> `mary`
<span class="keyword">at</span> <span class="number">1400</span>ms search <span class="keyword">for</span> `mary` resolves
  <span class="keyword">it</span> checks <span class="keyword">if</span> <span class="keyword">it</span> is still <span class="operator">the</span> latest promise (<span class="built_in">line</span><span class="comment"> // 1) - true</span>
  prints results <span class="keyword">for</span> `mary`
<span class="keyword">at</span> <span class="number">1600</span>ms search <span class="keyword">for</span> `john` resolves
  <span class="keyword">it</span> checks <span class="keyword">if</span> <span class="keyword">it</span> is still <span class="operator">the</span> latest promise (<span class="built_in">line</span><span class="comment"> // 1) - false</span>
  throws <span class="operator">an</span> error
</code></pre><p>Only the results from the latest executed search are displayed, just like the problem
requires.</p>
<h2 id="update-1">Update 1</h2><p>I published the <a href="https://github.com/bahmutov/latest-promise" target="_blank" rel="external">latest-promise</a> as NPM package.
It works should work with any promise and allows the rejected promise to check if it was cancelled
because it became obsolete</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pickLatest = <span class="built_in">require</span>(<span class="string">&apos;latest-promise&apos;</span>);</span><br><span class="line"><span class="keyword">var</span> first = pickLatest(makeSlow());</span><br><span class="line"><span class="keyword">var</span> second = pickLatest(makeFast());</span><br><span class="line"><span class="comment">// first promise takes a long time to finish, while second is quick</span></span><br><span class="line"><span class="comment">// second promise has valid value, but the first one gets rejected</span></span><br><span class="line">first.catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (pickLatest.wasObsolete(err)) {</span><br><span class="line">        <span class="comment">// well, this promise finished AFTER second</span></span><br><span class="line">        <span class="comment">// and should be ignored</span></span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></table></figure>
      
    </div>

    
      <footer class="article-footer personal-links">
  Follow Gleb Bahmutov <a href="https://twitter.com/bahmutov">@bahmutov</a>,
  see his projects at <a href="http://glebbahmutov.com">glebbahmutov.com</a>
</footer>

    

    <footer class="article-footer">
      <a data-url="http://glebbahmutov.com/blog/pick-latest-promise/" data-id="cijgodb0f00ewttur30jazppd" class="article-share-link">Share</a>
      
        <a href="http://glebbahmutov.com/blog/pick-latest-promise/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/promises/">promises</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../fluent-getters-setters/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Fluent getters and setters
        
      </div>
    </a>
  
  
    <a href="../review-how-not-to-be-wrong/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Review &quot;How Not to Be Wrong&quot; by Jordan Ellenberg</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">72</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">192</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/">advice</a><span class="tag-list-count">84</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angular/">angular</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/">angularjs</a><span class="tag-list-count">54</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/">assertions</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/">boilerplate</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/">browser</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ci/">ci</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/database/">database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/">db</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/">es6</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/">functional</a><span class="tag-list-count">42</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/">git</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/">immutable</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/">javascript</a><span class="tag-list-count">147</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/">modular development</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/">nodejs</a><span class="tag-list-count">55</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/">performance</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/">promises</a><span class="tag-list-count">30</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/">reactive</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/">reactjs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/">security</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/">sentry</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/">testing</a><span class="tag-list-count">44</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/">tutorial</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/">ui</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/">web workers</a><span class="tag-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/QUnit/" style="font-size: 12.35px;">QUnit</a><a href="../tags/advice/" style="font-size: 19.41px;">advice</a><a href="../tags/angular/" style="font-size: 10px;">angular</a><a href="../tags/angularjs/" style="font-size: 18.24px;">angularjs</a><a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a><a href="../tags/assertions/" style="font-size: 13.53px;">assertions</a><a href="../tags/boilerplate/" style="font-size: 15.29px;">boilerplate</a><a href="../tags/browser/" style="font-size: 14.71px;">browser</a><a href="../tags/ci/" style="font-size: 11.18px;">ci</a><a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a><a href="../tags/d3/" style="font-size: 11.18px;">d3</a><a href="../tags/database/" style="font-size: 10px;">database</a><a href="../tags/db/" style="font-size: 12.35px;">db</a><a href="../tags/es6/" style="font-size: 14.12px;">es6</a><a href="../tags/es7/" style="font-size: 10px;">es7</a><a href="../tags/functional/" style="font-size: 17.06px;">functional</a><a href="../tags/generators/" style="font-size: 12.35px;">generators</a><a href="../tags/git/" style="font-size: 13.53px;">git</a><a href="../tags/grunt/" style="font-size: 13.53px;">grunt</a><a href="../tags/gulp/" style="font-size: 11.18px;">gulp</a><a href="../tags/immutable/" style="font-size: 10px;">immutable</a><a href="../tags/interview/" style="font-size: 11.18px;">interview</a><a href="../tags/jade/" style="font-size: 11.76px;">jade</a><a href="../tags/javascript/" style="font-size: 20px;">javascript</a><a href="../tags/jshint/" style="font-size: 11.18px;">jshint</a><a href="../tags/modular-development/" style="font-size: 15.29px;">modular development</a><a href="../tags/nodejs/" style="font-size: 18.82px;">nodejs</a><a href="../tags/performance/" style="font-size: 15.88px;">performance</a><a href="../tags/promises/" style="font-size: 16.47px;">promises</a><a href="../tags/proposal/" style="font-size: 10.59px;">proposal</a><a href="../tags/reactive/" style="font-size: 10.59px;">reactive</a><a href="../tags/reactjs/" style="font-size: 10.59px;">reactjs</a><a href="../tags/security/" style="font-size: 11.76px;">security</a><a href="../tags/sentry/" style="font-size: 13.53px;">sentry</a><a href="../tags/testing/" style="font-size: 17.65px;">testing</a><a href="../tags/tutorial/" style="font-size: 12.94px;">tutorial</a><a href="../tags/ui/" style="font-size: 10px;">ui</a><a href="../tags/web-workers/" style="font-size: 12.35px;">web workers</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/01/">January 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../javascript-needs-compile-step/">JavaScript needs the compile step (on install)</a>
          </li>
        
          <li>
            <a href="../i-write-3-types-of-software/">I write 3 types of software</a>
          </li>
        
          <li>
            <a href="../run-express-server-in-your-browser/">Run Express server in your browser</a>
          </li>
        
          <li>
            <a href="../using-webpack/">Using webpack</a>
          </li>
        
          <li>
            <a href="../the-senior-engineer-role/">The senior engineer role</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="..//" class="mobile-nav-link">Home</a>
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'http://glebbahmutov.com/blog/pick-latest-promise/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="../fancybox/jquery.fancybox.css" type="text/css">
  <script src="../fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="../js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>