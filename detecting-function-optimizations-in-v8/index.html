<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Detecting function optimizations in V8 | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Recently I have watched Unorthodox Performance
presentation by lodash author John-David Dalton.
Some claims were more unorthodox than others, but one stood out to me. At some level,
it sounded too goo">
<meta property="og:type" content="article">
<meta property="og:title" content="Detecting function optimizations in V8">
<meta property="og:url" content="http://glebbahmutov.com/blog/detecting-function-optimizations-in-v8/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="Recently I have watched Unorthodox Performance
presentation by lodash author John-David Dalton.
Some claims were more unorthodox than others, but one stood out to me. At some level,
it sounded too goo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Detecting function optimizations in V8">
<meta name="twitter:description" content="Recently I have watched Unorthodox Performance
presentation by lodash author John-David Dalton.
Some claims were more unorthodox than others, but one stood out to me. At some level,
it sounded too goo">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="../css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="..//" id="logo">Better world by better software</a>
      </h1>
      <!--
      
        <h2 id="subtitle-wrap">
          <a href="..//" id="subtitle">Software advice from Dr. Gleb Bahmutov PhD</a>
        </h2>
      
      -->
      <h2 id="subtitle-wrap">
        <span class="subtitle">Software advice from <a id="subtitle" href="http://glebbahmutov.com">Dr. Gleb Bahmutov PhD</a></span>
      </h2>
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="..//">Home</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://glebbahmutov.com/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-detecting-function-optimizations-in-v8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2014-09-06T04:00:00.000Z" itemprop="datePublished">Sep 6 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/products/">products</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Detecting function optimizations in V8
    </h1>

    <h2 class="article-title" itemprop="name">
      How to observe JavaScript v8 JIT events
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Recently I have watched <a href="https://www.youtube.com/watch?v=NthmeLEhDDM" target="_blank" rel="external">Unorthodox Performance</a>
presentation by <a href="lodash.com">lodash</a> author <a href="https://twitter.com/jdalton" target="_blank" rel="external">John-David Dalton</a>.
Some claims were more unorthodox than others, but one stood out to me. At some level,
it sounded too good to be true: refactoring into simpler smaller functions allows engine
to optimize some of them, leading to better performance.</p>
<p>Let me restate the above statement (as I understood from the video) in more details:</p>
<p>When designing functions for performance, we must allow the JavaScript engine to
optimize <em>hot</em> functions that execute often. In general, js engine can optimize a function that
is small and does not modify its <em>arguments</em> object. This conflicts with designing a
robust library with versatile API.
The library must guard against invalid inputs, and support multiple execution paths.
The engine will not optimize a typical library top level (public) function due to its size
and complex argument handling.</p>
<p>Then the author suggests splitting top level public API functions that must deal with
input arguments from inner private executor functions that can make assumptions about inputs.
The JavaScript engine will optimize the executor functions, but will leave the public function
unoptimized.</p>
<blockquote>
<p>Does splitting functions and handling arguments at the entry point to the library lead
to high(-er|-est) performance?</p>
</blockquote>
<p>In this blog post I will show how to observe the optimizations as they are decided and executed
by the most populate javascript engine: <a href="https://code.google.com/p/v8/" target="_blank" rel="external">V8</a> that is at the heart of
Chrome browser and Nodejs. Note of caution: I am using node v0.11 which has very recent version of v8.
The stable node v0.10.30 has an older version of v8 (from 2012!), so these results might be different
for other engines or versions of v8.</p>
<h2 id="just-in-time-optimizations">Just in time optimizations</h2><p>Let us start with simple function that adds two arguments</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>We will execute this function 1 million times with integer arguments and will measure the total time</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> k = <span class="number">1e+6</span>;</span><br><span class="line"><span class="keyword">var</span> started = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">while</span> (k--) {</span><br><span class="line">  <span class="keyword">var</span> result = add(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">  <span class="built_in">console</span>.assert(result === <span class="number">5</span>);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> finished = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&apos;1m adds took&apos;</span>, finished - started + <span class="string">&apos;ms&apos;</span>);</span><br><span class="line"><span class="comment">// 1m adds took 312ms</span></span><br></pre></td></tr></table></figure>
<p>We can display notifications when the v8 decided to mark a function for optimization and
when it optimizes it. We just need to pass <code>--trace_opt</code> flag to node. I will also grep <code>add</code>
to filter out updates for other functions</p>
<pre><code>$ node --trace_opt add.js | grep add
<span class="number">1</span>m adds took <span class="number">297</span>ms
[marking <span class="number">0x3366180057a1</span> &lt;JS Function add&gt; <span class="keyword">for</span> recompilation,
  reason: small function, ICs with typeinfo: <span class="number">1</span>/<span class="number">1</span> (<span class="number">100</span>%)]
[optimizing <span class="number">0x3366180057a1</span> &lt;JS Function add&gt; - took <span class="number">0.004</span>, <span class="number">0.027</span>, <span class="number">0.007</span> ms]
</code></pre><p>Our function <code>add</code> in fact was optimized by the engine after it proved to be a good candidate:
small and invoked with same argument types.</p>
<h2 id="showing-function-optimization-status">Showing function optimization status</h2><p>We can even ask the v8 engine if a given function is optimized, never optimized, etc.
We need to use command line option <code>--allow-natives-syntax</code> and special function
<code>%GetOptimizationStatus</code> (I suggest you use <a href="https://www.npmjs.org/package/v8-natives" target="_blank" rel="external">v8-natives</a>
in anything but a simple example).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// same add code as above</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printStatus</span>(<span class="params">fn</span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> name = fn.name;</span><br><span class="line">  <span class="keyword">switch</span> (%GetOptimizationStatus(fn)) {</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: <span class="built_in">console</span>.log(fn.name, <span class="string">&quot;function is optimized&quot;</span>); <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: <span class="built_in">console</span>.log(fn.name, <span class="string">&quot;function is not optimized&quot;</span>); <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>: <span class="built_in">console</span>.log(fn.name, <span class="string">&quot;function is always optimized&quot;</span>); <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>: <span class="built_in">console</span>.log(fn.name, <span class="string">&quot;function is never optimized&quot;</span>); <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>: <span class="built_in">console</span>.log(fn.name, <span class="string">&quot;function is maybe deoptimized&quot;</span>); <span class="keyword">break</span>;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">printStatus(add);</span><br><span class="line"><span class="comment">// $ node --allow-natives-syntax add.js</span></span><br><span class="line"><span class="comment">//=&gt; add function is optimized</span></span><br></pre></td></tr></table></figure>
<p>Let us now look at adding variable number of arguments and compare single function
to factored out approach recommended by the lodash team</p>
<h2 id="using-constant-raw-arguments">Using constant raw arguments</h2><p>First, let us simply sum arguments without making new array</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumArguments</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> n = <span class="built_in">arguments</span>.length;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (n--) {</span><br><span class="line">    sum += <span class="built_in">arguments</span>[n];</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> k = <span class="number">1e+6</span>;</span><br><span class="line"><span class="keyword">while</span> (k--) {</span><br><span class="line">  sumArguments(<span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">2</span>, -<span class="number">2</span>);</span><br><span class="line">}</span><br><span class="line">printStatus(sumArguments);</span><br></pre></td></tr></table></figure>
<p>We will run and measure time using external <code>time</code> command</p>
<pre><code>$ time node --allow-natives-syntax --trace_opt --trace_deopt index.js
[marking <span class="number">0x7475c004149</span> &lt;JS Function sumArguments&gt; <span class="keyword">for</span> recompilation,
  reason: small function, ICs with typeinfo: <span class="number">5</span>/<span class="number">5</span> (<span class="number">100</span>%)]
[optimizing <span class="number">0x7475c004149</span> &lt;JS Function sumArguments&gt; - took <span class="number">0.055</span>, <span class="number">0.142</span>, <span class="number">0.037</span> ms]
sumArguments Function is optimized
real  <span class="number">0</span>m0<span class="number">.069</span>s
user  <span class="number">0</span>m0<span class="number">.054</span>s
sys <span class="number">0</span>m0<span class="number">.015</span>s
</code></pre><p>Using <code>arguments</code> object without modifying it is fast and can be optimized.</p>
<h2 id="pass-arguments-into-dedicated-function">Pass arguments into dedicated function</h2><p>Let us now factor out the addition into small function. This is suggested by the video
in order to validate arguments and select the appropriate function. Function <code>sumArguments</code>
would be public API function, directing to appropriate inner function.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumArray</span>(<span class="params">arr</span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> n = arr.length;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (n--) {</span><br><span class="line">    sum += arr[n];</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumArguments</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> sumArray(<span class="built_in">arguments</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// same loop</span></span><br><span class="line">printStatus(sumArray);</span><br><span class="line">printStatus(sumArguments);</span><br></pre></td></tr></table></figure>
<p>This version takes 5 times longer!</p>
<pre><code>$ <span class="typename">time</span> node <span class="comment">--allow-natives-syntax --trace_opt --trace_deopt index.js</span>
[marking <span class="number">0</span>x410fa005751 &lt;JS <span class="keyword">Function</span> sumArguments&gt; <span class="keyword">for</span> recompilation,
  reason: small <span class="keyword">function</span>, ICs <span class="keyword">with</span> typeinfo: <span class="number">0</span>/<span class="number">0</span> (<span class="number">100</span>%)]
[disabled optimization <span class="keyword">for</span> <span class="number">0</span>x1b3acb869d71 &lt;SharedFunctionInfo sumArguments&gt;,
  reason: bad value <span class="keyword">context</span> <span class="keyword">for</span> arguments value]
[marking <span class="number">0</span>x57cb8926cb1 &lt;JS <span class="keyword">Function</span> sumArray (SharedFunctionInfo <span class="number">0</span>x1b3acb869ce1)&gt; <span class="keyword">for</span> recompilation,
  reason: small <span class="keyword">function</span>, ICs <span class="keyword">with</span> typeinfo: <span class="number">5</span>/<span class="number">5</span> (<span class="number">100</span>%)]
[optimizing <span class="number">0</span>x57cb8926cb1 &lt;JS <span class="keyword">Function</span> sumArray&gt; - took <span class="number">0.016</span>, <span class="number">0.068</span>, <span class="number">0.016</span> ms]
sumArray <span class="keyword">Function</span> <span class="keyword">is</span> optimized
sumArguments <span class="keyword">Function</span> <span class="keyword">is</span> <span class="keyword">not</span> optimized
real  <span class="number">0</span>m0.<span class="number">377</span>s
user  <span class="number">0</span>m0.<span class="number">362</span>s
sys <span class="number">0</span>m0.<span class="number">015</span>s
</code></pre><p>This is a very weird result. Just passing <code>arguments</code> from top level (maybe public interface) function
into small simple function gets a huge penalty hit. I think this is due to arguments reference being
copied into <code>arr</code> value, and causing the outer function <code>sumArguments</code> to be NOT optimized.</p>
<h2 id="converting-arguments-to-array">Converting arguments to array</h2><p>Let us convert <code>arguments</code> into array first, something we see in lodash a lot.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumArguments</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> arr = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> sumArray(arr);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>I often code using the same conversion too. This leads even to worse performance</p>
<pre><code>$ time <span class="keyword">node</span><span class="identifier"> </span><span class="title">--allow-natives-syntax</span> --trace_opt --trace_deopt index.js
sumArray Function is optimized
sumArguments Function is not optimized
real  <span class="number">0m</span>0.<span class="number">540s</span>
<span class="keyword">user</span>  <span class="title">0m0</span>.<span class="number">518s</span>
sys <span class="number">0m</span>0.<span class="number">019s</span>
</code></pre><p>Turns out, calling native <code>Array.prototype.slice</code> on <code>arguments</code> is an expensive operation!</p>
<h2 id="conclusion">Conclusion</h2><p>Before doing <strong>any</strong> optimization, please measure first. Profiling might show surprising
bottlenecks in unexpected places. In most cases, I prefer code that is clear and easy to understand
to fast but brittle one. If you must create performant code, you might benefit
from C-like macros that would expand in place (kind of like poor man&apos;s inlining)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumArguments</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> sum = ADD_ARGUMENTS</span><br><span class="line">  <span class="comment">// where ADD_ARGUMENTS would be a macro</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>Related: <a href="https://github.com/petkaantonov/bluebird/wiki/Optimization-killers" target="_blank" rel="external">Optimization killers</a>,
<a href="http://www.html5rocks.com/en/tutorials/speed/v8/" target="_blank" rel="external">Performance Tips for JavaScript in V8</a></p>

      
    </div>

    
      <footer class="article-footer personal-links">
  Follow Gleb Bahmutov <a href="https://twitter.com/bahmutov">@bahmutov</a>,
  see his projects at <a href="http://glebbahmutov.com">glebbahmutov.com</a>
</footer>

    

    <footer class="article-footer">
      <a data-url="http://glebbahmutov.com/blog/detecting-function-optimizations-in-v8/" data-id="ciikqsb9k00q2vzurbetoc4o5" class="article-share-link">Share</a>
      
        <a href="http://glebbahmutov.com/blog/detecting-function-optimizations-in-v8/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/performance/">performance</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../code-quality-as-a-service/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Code quality as a service
        
      </div>
    </a>
  
  
    <a href="../object-iterators/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Object iterators</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">70</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">190</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/">advice</a><span class="tag-list-count">83</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angular/">angular</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/">angularjs</a><span class="tag-list-count">54</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/">assertions</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/">boilerplate</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/">browser</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/database/">database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/">db</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/">es6</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/">functional</a><span class="tag-list-count">42</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/">git</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/">immutable</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/">javascript</a><span class="tag-list-count">143</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/">modular development</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/">nodejs</a><span class="tag-list-count">54</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/">performance</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/">promises</a><span class="tag-list-count">30</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/">reactive</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/">reactjs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/">security</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/">sentry</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/">testing</a><span class="tag-list-count">44</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/">tutorial</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/">ui</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/">web workers</a><span class="tag-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/QUnit/" style="font-size: 12.86px;">QUnit</a><a href="../tags/advice/" style="font-size: 19.29px;">advice</a><a href="../tags/angular/" style="font-size: 10px;">angular</a><a href="../tags/angularjs/" style="font-size: 18.57px;">angularjs</a><a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a><a href="../tags/assertions/" style="font-size: 13.57px;">assertions</a><a href="../tags/boilerplate/" style="font-size: 15px;">boilerplate</a><a href="../tags/browser/" style="font-size: 14.29px;">browser</a><a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a><a href="../tags/d3/" style="font-size: 11.43px;">d3</a><a href="../tags/database/" style="font-size: 10px;">database</a><a href="../tags/db/" style="font-size: 12.86px;">db</a><a href="../tags/es6/" style="font-size: 14.29px;">es6</a><a href="../tags/es7/" style="font-size: 10px;">es7</a><a href="../tags/functional/" style="font-size: 17.14px;">functional</a><a href="../tags/generators/" style="font-size: 12.86px;">generators</a><a href="../tags/git/" style="font-size: 13.57px;">git</a><a href="../tags/grunt/" style="font-size: 13.57px;">grunt</a><a href="../tags/gulp/" style="font-size: 11.43px;">gulp</a><a href="../tags/immutable/" style="font-size: 10px;">immutable</a><a href="../tags/interview/" style="font-size: 11.43px;">interview</a><a href="../tags/jade/" style="font-size: 12.14px;">jade</a><a href="../tags/javascript/" style="font-size: 20px;">javascript</a><a href="../tags/jshint/" style="font-size: 11.43px;">jshint</a><a href="../tags/modular-development/" style="font-size: 15px;">modular development</a><a href="../tags/nodejs/" style="font-size: 18.57px;">nodejs</a><a href="../tags/performance/" style="font-size: 15.71px;">performance</a><a href="../tags/promises/" style="font-size: 16.43px;">promises</a><a href="../tags/proposal/" style="font-size: 10.71px;">proposal</a><a href="../tags/reactive/" style="font-size: 10.71px;">reactive</a><a href="../tags/reactjs/" style="font-size: 10.71px;">reactjs</a><a href="../tags/security/" style="font-size: 12.14px;">security</a><a href="../tags/sentry/" style="font-size: 13.57px;">sentry</a><a href="../tags/testing/" style="font-size: 17.86px;">testing</a><a href="../tags/tutorial/" style="font-size: 12.86px;">tutorial</a><a href="../tags/ui/" style="font-size: 10px;">ui</a><a href="../tags/web-workers/" style="font-size: 12.86px;">web workers</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../instant-web-application/">Instant Web Application</a>
          </li>
        
          <li>
            <a href="../hydrate-at-build-time/">Hydrate at build time</a>
          </li>
        
          <li>
            <a href="../hydrate-your-apps/">Hydrate your apps</a>
          </li>
        
          <li>
            <a href="../my-node-tools/">My Node tools</a>
          </li>
        
          <li>
            <a href="../pass-the-logic/">Pass the logic</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="..//" class="mobile-nav-link">Home</a>
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'http://glebbahmutov.com/blog/detecting-function-optimizations-in-v8/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="../fancybox/jquery.fancybox.css" type="text/css">
  <script src="../fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="../js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>