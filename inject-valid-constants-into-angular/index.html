<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Inject valid constants into Angular | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This is an update to
&amp;quot;Server-side constants injection into Angular modules&amp;quot; blog
post
I wrote earlier. After using the server side injection in several apps by
several developers, we have de">
<meta property="og:type" content="article">
<meta property="og:title" content="Inject valid constants into Angular">
<meta property="og:url" content="http://glebbahmutov.com/blog/inject-valid-constants-into-angular/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="This is an update to
&amp;quot;Server-side constants injection into Angular modules&amp;quot; blog
post
I wrote earlier. After using the server side injection in several apps by
several developers, we have de">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Inject valid constants into Angular">
<meta name="twitter:description" content="This is an update to
&amp;quot;Server-side constants injection into Angular modules&amp;quot; blog
post
I wrote earlier. After using the server side injection in several apps by
several developers, we have de">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="../css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="..//" id="logo">Better world by better software</a>
      </h1>
      <!--
      
        <h2 id="subtitle-wrap">
          <a href="..//" id="subtitle">Software advice from Dr. Gleb Bahmutov PhD</a>
        </h2>
      
      -->
      <h2 id="subtitle-wrap">
        <span class="subtitle">Software advice from <a id="subtitle" href="http://glebbahmutov.com">Dr. Gleb Bahmutov PhD</a></span>
      </h2>
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="..//">Home</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://glebbahmutov.com/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-inject-valid-constants-into-angular" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2014-05-20T05:00:00.000Z" itemprop="datePublished">May 20 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/products/">products</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Inject valid constants into Angular
    </h1>

    <h2 class="article-title" itemprop="name">
      Using providers to inject runtime values into modules.
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is an update to
&quot;Server-side constants injection into Angular modules&quot; blog
<a href="../server-side-constants-injection-into-angular-modules/">post</a>
I wrote earlier. After using the server side injection in several apps by
several developers, we have decided to change our approach. We still keep
the spirit of the original post: server-side constants are injected into the angular
app. We have extended our approach with default values, validation and removing
separate module just to keep the constants.</p>
<h2 id="step-1-the-base">Step 1 - the base</h2><p>You can see an example of the way we used to inject constants in this
<a href="http://jsbin.com/gilaw/2/edit?html,output" target="_blank" rel="external">jsbin</a> example and the in code below</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">&quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular.min.js&quot;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Validated constants<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">  <span class="comment">// 1 - declare dependency on the constants module, but keep it undefined</span></span><br><span class="line">  angular.module(<span class="string">&apos;MyApp&apos;</span>, [<span class="string">&apos;MyApp.Constants&apos;</span>])</span><br><span class="line">  .run(<span class="function"><span class="keyword">function</span> <span class="params">($rootScope, username)</span> </span>{</span><br><span class="line">    <span class="comment">// 3 - start using constants module</span></span><br><span class="line">    $rootScope.username = username;</span><br><span class="line">  });</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">&quot;MyApp&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="comment">// 2 - create constants module in the page and inject values</span></span><br><span class="line">    angular.module(<span class="string">&apos;MyApp.Constants&apos;</span>, [])</span><br><span class="line">    .constant(<span class="string">&apos;username&apos;</span>, <span class="string">&apos;World&apos;</span>);</span><br><span class="line">  </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">p</span>&gt;</span>Hello, {{ username }}<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>We declared the application module dependent on a nonexistent module <code>MyApp.Constants</code> (line <code>// 1</code>),
and we only defined this module in the HTML template rendered by the server-side engine (line <code>// 2</code>).
The constants were then dependency-injected by Angular framework into the actual module (line <code>// 3</code>).</p>
<p>This approach worked ok, but has certain downsides</p>
<ul>
<li>We have decoupled a module from its constants, moving the two modules very far away.</li>
<li>When bringing several modules together into a single app, a developer often had to create dummy
empty constants modules just to make angular module resolution happy.</li>
<li>We could not provide any default values to the constants</li>
<li>We could not validate the constants passed to the module until much later, or
by making dummy <code>.run</code> call just to validate them.</li>
</ul>
<p>The next several steps show how our approach has changed.</p>
<h2 id="step-2-move-constants-module-closer">Step 2 - move constants module closer</h2><p>We have moved the creation of the constants module closer to the module using it,
while leaving constant injection in the HTML template.
See <a href="http://jsbin.com/xosuy/1/edit?html,output" target="_blank" rel="external">jsbin</a> and below</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">&quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular.min.js&quot;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Validated constants<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">  angular.module(<span class="string">&apos;MyApp.Constants&apos;</span>, []);</span><br><span class="line">  angular.module(<span class="string">&apos;MyApp&apos;</span>, [<span class="string">&apos;MyApp.Constants&apos;</span>])</span><br><span class="line">  .run(<span class="function"><span class="keyword">function</span> <span class="params">($rootScope, username)</span> </span>{</span><br><span class="line">    <span class="comment">// start using constants module</span></span><br><span class="line">    $rootScope.username = username;</span><br><span class="line">  });</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">&quot;MyApp&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="comment">// inject actual values when needed, the module already exists</span></span><br><span class="line">    angular.module(<span class="string">&apos;MyApp.Constants&apos;</span>).constant(<span class="string">&apos;username&apos;</span>, <span class="string">&apos;World&apos;</span>);</span><br><span class="line">  </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">p</span>&gt;</span>Hello, {{ username }}<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Notice that the we still do not declare or validate constants, or provide default values.</p>
<h2 id="step-3-failed-decorating-constant-service">Step 3 - FAILED decorating constant service</h2><p>We tried <a href="http://www.cli-nerd.com/blog/2014/05/08/$provide-dot-decorator/" target="_blank" rel="external">decorating</a>
<code>module.constant</code> service using the <code>$provide</code> mechanism, but unfortunately
it cannot be done due to <a href="https://gist.github.com/demisx/9605099" target="_blank" rel="external">Angular restrictions</a>.</p>
<p>You can see our attempt <a href="http://jsbin.com/xosuy/12/edit" target="_blank" rel="external">here</a>. It is mainly doing this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">&apos;MyApp.Constants&apos;</span>, [])</span><br><span class="line">.config(<span class="function"><span class="keyword">function</span> (<span class="params">$provide</span>) </span>{</span><br><span class="line">  $provide.decorator(<span class="string">&apos;constant&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$delegate</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>) </span>{</span><br><span class="line">      <span class="comment">// validate name/value</span></span><br><span class="line">      <span class="keyword">return</span> $delegate(name, value);</span><br><span class="line">    };</span><br><span class="line">  });</span><br><span class="line">});</span><br></pre></td></tr></table></figure>
<p>I even thought about overriding <code>module.constant</code> method directly, as I have done
in <a href="../stop-angular-overrides/">stop angular overrides</a> but decided
against introducing any 3rd party code.</p>
<h2 id="step-4-using-custom-provider">Step 4 - using custom provider</h2><p>Finally we determined a better approach: defining a custom provider that would return
a configuration object. The configuration object can keep defaults and perform validation,
and can be injected into controller and other angular functions. Based on
this <a href="https://gist.github.com/demisx/9605099#provider" target="_blank" rel="external">example</a> we have written a simple
object that just supplied the defaults, see <a href="http://jsbin.com/tenaw/2/edit?html,output" target="_blank" rel="external">jsbin</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">&quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular.js&quot;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Validated constants<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">  angular.module(<span class="string">&apos;MyApp&apos;</span>, [])</span><br><span class="line">  .provider(<span class="string">&apos;MyAppConstants&apos;</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// default values</span></span><br><span class="line">    <span class="keyword">var</span> values = {</span><br><span class="line">      username: <span class="string">&apos;World&apos;</span></span><br><span class="line">    };</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      $<span class="keyword">get</span>: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> values;</span><br><span class="line">      }</span><br><span class="line">    };</span><br><span class="line">  })</span><br><span class="line">  .run(<span class="function"><span class="keyword">function</span> <span class="params">($rootScope, MyAppConstants)</span> </span>{</span><br><span class="line">    $rootScope.username = MyAppConstants.username;</span><br><span class="line">  });</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">&quot;MyApp&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">p</span>&gt;</span>Hello, {{ username }}<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>This example only shows using the default values.</p>
<h2 id="step-5-overriding-default-values">Step 5 - overriding default values</h2><p>Let us override default values with values provided by the HTML injection, for example.
This <a href="http://jsbin.com/pelani/2/edit?html,output" target="_blank" rel="external">jsbin</a> uses the provider to set
extend default values with new ones</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">&quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular.js&quot;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Validated constants<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">  angular.module(<span class="string">&apos;MyApp&apos;</span>, [])</span><br><span class="line">  .provider(<span class="string">&apos;MyAppConfiguration&apos;</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// default values</span></span><br><span class="line">    <span class="keyword">var</span> values = {</span><br><span class="line">      username: <span class="string">&apos;World&apos;</span></span><br><span class="line">    };</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="keyword">set</span>: <span class="function"><span class="keyword">function</span> <span class="params">(constants)</span> </span>{ <span class="comment">// 1</span></span><br><span class="line">        angular.extend(values, constants);</span><br><span class="line">      },</span><br><span class="line">      $<span class="keyword">get</span>: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{ <span class="comment">// 2</span></span><br><span class="line">        <span class="keyword">return</span> values;</span><br><span class="line">      }</span><br><span class="line">    };</span><br><span class="line">  })</span><br><span class="line">  .run(<span class="function"><span class="keyword">function</span> <span class="params">($rootScope, MyAppConfiguration)</span> </span>{ <span class="comment">// 3</span></span><br><span class="line">    $rootScope.username = MyAppConfiguration.username;</span><br><span class="line">  });</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">&quot;MyApp&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="comment">// override default values</span></span><br><span class="line">    angular.module(<span class="string">&apos;MyApp&apos;</span>).config(<span class="function"><span class="keyword">function</span> <span class="params">(MyAppConfigurationProvider)</span> </span>{</span><br><span class="line">      MyAppConfigurationProvider.<span class="keyword">set</span>({</span><br><span class="line">        username: <span class="string">&apos;Angular&apos;</span></span><br><span class="line">      });</span><br><span class="line">    });</span><br><span class="line">  </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">p</span>&gt;</span>Hello, {{ username }}<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong> method name <code>set</code> inside the returned object (line <code>// 1</code>)
is arbitrary, you can have multiple methods named whatever you like. Only required
name is <code>$get</code> that will return the object to be injected into any function via
dependency injection (line <code>// 3</code>).</p>
<h2 id="step-6-lock-down-the-configuration">Step 6 - lock down the configuration</h2><p>Let us add configuration validation using a custom function added to
<a href="../assertions/">my favorite assert library</a>
<a href="https://github.com/philbooth/check-types.js" target="_blank" rel="external">check-types</a>.
See <a href="http://jsbin.com/tehiq/2/edit?html,output" target="_blank" rel="external">jsbin</a> or the code below</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">&quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular.js&quot;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">&quot;https://cdn.rawgit.com/philbooth/check-types.js/master/src/check-types.js&quot;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Validated constants<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">  check.verify.myConstants = <span class="function"><span class="keyword">function</span> <span class="params">(values)</span> </span>{ <span class="comment">// 1</span></span><br><span class="line">    check.verify.object(values, <span class="string">&apos;missing constants&apos;</span>);</span><br><span class="line">    check.verify.unemptyString(values.username, <span class="string">&apos;need username&apos;</span>);</span><br><span class="line">  };</span><br><span class="line">  angular.module(<span class="string">&apos;MyApp&apos;</span>, [])</span><br><span class="line">  .provider(<span class="string">&apos;MyAppConstants&apos;</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// default values</span></span><br><span class="line">    <span class="keyword">var</span> values = {</span><br><span class="line">      username: <span class="string">&apos;World&apos;</span></span><br><span class="line">    };</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="keyword">set</span>: <span class="function"><span class="keyword">function</span> <span class="params">(constants)</span> </span>{</span><br><span class="line">        check.verify.myConstants(constants); <span class="comment">// 2</span></span><br><span class="line">        angular.extend(values, constants);</span><br><span class="line">        values = Object.freeze(values); <span class="comment">// 4</span></span><br><span class="line">      },</span><br><span class="line">      $<span class="keyword">get</span>: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> values;</span><br><span class="line">      }</span><br><span class="line">    };</span><br><span class="line">  })</span><br><span class="line">  .run(<span class="function"><span class="keyword">function</span> <span class="params">($rootScope, MyAppConstants)</span> </span>{</span><br><span class="line">    check.verify.myConstants(MyAppConstants, <span class="string">&apos;MyApp is configured incorrectly&apos;</span>); <span class="comment">// 3</span></span><br><span class="line">    $rootScope.username = MyAppConstants.username;</span><br><span class="line">  });</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">&quot;MyApp&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="comment">// override default values</span></span><br><span class="line">    angular.module(<span class="string">&apos;MyApp&apos;</span>).config(<span class="function"><span class="keyword">function</span> <span class="params">(MyAppConstantsProvider)</span> </span>{</span><br><span class="line">      MyAppConstantsProvider.<span class="keyword">set</span>({</span><br><span class="line">        username: <span class="string">&apos;Angular&apos;</span></span><br><span class="line">      });</span><br><span class="line">    });</span><br><span class="line">  </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">p</span>&gt;</span>Hello, {{ username }}<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>We use custom assertion function (defined in line <code>// 1</code>) when we set config
object (line <code>// 2</code>) and use constants at run time (line <code>// 3</code>). We can be flexible
how we merge constants with defaults, but I like freezing the result (line <code>// 4</code>)
to prevent accidental configuration errors.</p>
<h2 id="update-1-the-final-approach">Update 1 - the final approach</h2><p>We finally settled on the following pattern for injecting settings (not limited to constants)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">&apos;AppConfig&apos;</span>, [])</span><br><span class="line">  <span class="comment">// config module has provider with same name</span></span><br><span class="line">  .provider(<span class="string">&apos;AppConfig&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="comment">// initial / default config</span></span><br><span class="line">    <span class="keyword">var</span> config = {</span><br><span class="line">      bar: <span class="string">&apos;bar&apos;</span> </span><br><span class="line">    };</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      set: <span class="function"><span class="keyword">function</span> (<span class="params">settings</span>) </span>{</span><br><span class="line">        config = settings;</span><br><span class="line">      },</span><br><span class="line">      $get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">      }</span><br><span class="line">    };</span><br><span class="line">  });</span><br></pre></td></tr></table></figure>
<p>Any module that needs configuration can inject <code>AppConfig</code> (which calls the special <code>$get</code> method)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">&apos;App&apos;</span>, [<span class="string">&apos;AppConfig&apos;</span>]) <span class="comment">// AppConfig is module name</span></span><br><span class="line">  .service(<span class="string">&apos;foo&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">AppConfig</span>) </span>{ <span class="comment">// AppConfig is provider name</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>{</span><br><span class="line">      <span class="keyword">return</span> AppConfig.bar;</span><br><span class="line">    };</span><br><span class="line">  });</span><br></pre></td></tr></table></figure>
<p>During testing we can easily swap values in the config module</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">beforeEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">  angular.mock.module(<span class="string">&apos;App&apos;</span>);</span><br><span class="line">  angular.module(<span class="string">&apos;AppConfig&apos;</span>).config(<span class="function"><span class="keyword">function</span> (<span class="params">AppConfigProvider</span>) </span>{</span><br><span class="line">    AppConfigProvider.set({</span><br><span class="line">      bar: <span class="string">&apos;test bar value&apos;</span></span><br><span class="line">    });</span><br><span class="line">  });</span><br><span class="line">});</span><br><span class="line"><span class="comment">// App foo service will return &apos;test bar value&apos; after injection</span></span><br></pre></td></tr></table></figure>
<p>We follow the same approach when injecting values from the server template. In the code
Jade template engine will inject <code>runtime.value</code> variable.</p>
<pre><code><span class="xml">// index.jade
<span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript">
  angular.module(<span class="string">&apos;AppConfig&apos;</span>).config(<span class="function"><span class="keyword">function</span> <span class="params">(AppConfigProvider)</span> </span></span></span><span class="expression">{
    <span class="variable">AppConfigProvider.set</span>({
      <span class="variable">bar</span>: #{<span class="variable">runtime.value</span>}</span><span class="xml"><span class="undefined">
    });
  });
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span>
</code></pre><h2 id="update-2-async-config">Update 2 - async config</h2><p>Several people have asked if the config could be fetched asynchronously by the <code>AppConfig</code> provider.
Sure, although I think this will greatly delay the application&apos;s startup. Remember every module that injects
the config object will have to wait. </p>
<p>In details: just return a promise from the <code>$get</code> method. You can use <code>$http</code> service to fetch the config,
or in the example below I am using <code>$timeout</code>. You can only inject these dependencies in to the <code>$get</code> method
itself, not into the provider function (<code>// 1</code>).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">&apos;AppConfig&apos;</span>, [])</span><br><span class="line">  <span class="comment">// config module has provider with same name</span></span><br><span class="line">  .provider(<span class="string">&apos;AppConfig&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{ <span class="comment">// 1</span></span><br><span class="line">    <span class="comment">// initial / default config</span></span><br><span class="line">    <span class="keyword">var</span> config = {</span><br><span class="line">      bar: <span class="string">&apos;bar&apos;</span> </span><br><span class="line">    };</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      set: <span class="function"><span class="keyword">function</span> (<span class="params">settings</span>) </span>{</span><br><span class="line">        config = settings;</span><br><span class="line">      },</span><br><span class="line">      $get: <span class="function"><span class="keyword">function</span> (<span class="params">$timeout</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&apos;AppConfig.$get&apos;</span>);</span><br><span class="line">        <span class="keyword">return</span> $timeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&apos;resolving AppConfig after 2 seconds&apos;</span>);</span><br><span class="line">          <span class="keyword">return</span> config;</span><br><span class="line">        }, <span class="number">2000</span>);</span><br><span class="line">      }</span><br><span class="line">    };</span><br><span class="line">  });</span><br></pre></td></tr></table></figure>
<p>Any module injecting <code>AppConfig</code> should expect a promise</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">&apos;App&apos;</span>, [<span class="string">&apos;AppConfig&apos;</span>]) <span class="comment">// AppConfig is module name</span></span><br><span class="line">  .run(<span class="function"><span class="keyword">function</span> (<span class="params">AppConfig</span>) </span>{ <span class="comment">// AppConfig is provider name</span></span><br><span class="line">    AppConfig.then(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>{</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;App has async config.bar&apos;</span>, config.bar);</span><br><span class="line">    });</span><br><span class="line">  });</span><br></pre></td></tr></table></figure>
<p>You can see this in action at <a href="http://plnkr.co/edit/lNcrLX9GgpFQleJEI3qQ?p=preview" target="_blank" rel="external">plnkr.co</a> - just
open the DevTools console to see the output. I copied the output with timestamps to better show the delay of 2 seconds.</p>
<pre><code><span class="number">2015</span>-<span class="number">01</span>-<span class="number">27</span> <span class="number">11</span>:<span class="number">21</span>:<span class="number">09.608</span> AppConfig.$get
<span class="number">2015</span>-<span class="number">01</span>-<span class="number">27</span> <span class="number">11</span>:<span class="number">21</span>:<span class="number">11.612</span> resolving AppConfig after <span class="number">2</span> seconds
<span class="number">2015</span>-<span class="number">01</span>-<span class="number">27</span> <span class="number">11</span>:<span class="number">21</span>:<span class="number">11.615</span> App has async config.bar bar
</code></pre><h2 id="update-3-delayed-bootstrap">Update 3 - delayed bootstrap</h2><p>If you really want to keep object syntax without promises, then you can delay the application bootstrapping
until the config has been loaded. Let us switch back to simple module with constant configuration object.
By default it has hardcoded values. The application uses explicit bootstrap command.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">&apos;AppConfig&apos;</span>, [])</span><br><span class="line">  <span class="comment">// constant object with default values</span></span><br><span class="line">  .constant(<span class="string">&apos;AppConfig&apos;</span>, {</span><br><span class="line">      bar: <span class="string">&apos;bar&apos;</span> </span><br><span class="line">    });</span><br><span class="line">angular.module(<span class="string">&apos;App&apos;</span>, [<span class="string">&apos;AppConfig&apos;</span>])</span><br><span class="line">  .run(<span class="function"><span class="keyword">function</span> (<span class="params">AppConfig</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&apos;App has async config.bar&apos;</span>, AppConfig.bar);</span><br><span class="line">  });</span><br><span class="line"><span class="comment">// explicit application bootstrap      </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startApp</span>(<span class="params"></span>) </span>{</span><br><span class="line">  angular.element(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&apos;starting application&apos;</span>);</span><br><span class="line">    angular.bootstrap(<span class="built_in">document</span>, [<span class="string">&apos;App&apos;</span>]);</span><br><span class="line">  });</span><br><span class="line">}</span><br><span class="line">startApp(); to use <span class="keyword">default</span> values</span><br></pre></td></tr></table></figure>
<p>If we want to fetch the config first, then start the application, we can even avoid using
anything but Angular (inspired by <a href="http://stackoverflow.com/a/21189057/4168257" target="_blank" rel="external">this</a> StackOverflow answer).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">setConfigAndStart</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> $timeout = angular.injector([<span class="string">&apos;ng&apos;</span>]).get(<span class="string">&apos;$timeout&apos;</span>);</span><br><span class="line">  <span class="comment">// or grab $http service, etc.</span></span><br><span class="line">  $timeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&apos;overwriting the entire config module after 2 seconds&apos;</span>);</span><br><span class="line">    <span class="keyword">var</span> newConfig = { bar: <span class="string">&apos;foo&apos;</span> };</span><br><span class="line">    angular.module(<span class="string">&apos;AppConfig&apos;</span>, []).constant(<span class="string">&apos;AppConfig&apos;</span>, newConfig);</span><br><span class="line">    startApp();</span><br><span class="line">  }, <span class="number">2000</span>);</span><br><span class="line">}());</span><br></pre></td></tr></table></figure>
<p>Notice that we explicitly overwrite the entire <code>AppConfig</code> module in order to override the <code>AppConfig</code> constant.
The output in the browser console:</p>
<pre><code><span class="number">2015</span>-<span class="number">01</span>-<span class="number">27</span> <span class="number">13</span>:<span class="number">07</span>:<span class="number">40.652</span> overwriting entire config module after <span class="number">2</span> seconds
<span class="number">2015</span>-<span class="number">01</span>-<span class="number">27</span> <span class="number">13</span>:<span class="number">07</span>:<span class="number">40.657</span> starting application
<span class="number">2015</span>-<span class="number">01</span>-<span class="number">27</span> <span class="number">13</span>:<span class="number">07</span>:<span class="number">40.659</span> App has async config.bar foo
</code></pre><p>You can find this code at <a href="http://plnkr.co/edit/qJNEXnp3CSSnzqH0tibM?p=preview" target="_blank" rel="external">plnkr.co</a></p>
<h2 id="update-4">Update 4</h2><p>I described how to use config provider to configure a module to be distributed as a 3rd party module
in <a href="../configuring-angular-3rd-party-module/">Configuring AngularJS 3rd party module</a></p>

      
    </div>

    
      <footer class="article-footer personal-links">
  Follow Gleb Bahmutov <a href="https://twitter.com/bahmutov">@bahmutov</a>,
  see his projects at <a href="http://glebbahmutov.com">glebbahmutov.com</a>
</footer>

    

    <footer class="article-footer">
      <a data-url="http://glebbahmutov.com/blog/inject-valid-constants-into-angular/" data-id="ciieww7s300kj37urn645raqd" class="article-share-link">Share</a>
      
        <a href="http://glebbahmutov.com/blog/inject-valid-constants-into-angular/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/angularjs/">angularjs</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../angular-from-browser-console/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Angular from browser console
        
      </div>
    </a>
  
  
    <a href="../keeping-async-data-non-shared-in-singletons/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Keeping async data non-shared in singletons</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">68</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">190</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/">advice</a><span class="tag-list-count">82</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angular/">angular</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/">angularjs</a><span class="tag-list-count">54</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/">assertions</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/">boilerplate</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/">browser</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/database/">database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/">db</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/">es6</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/">functional</a><span class="tag-list-count">42</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/">git</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/">immutable</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/">javascript</a><span class="tag-list-count">142</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/">modular development</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/">nodejs</a><span class="tag-list-count">54</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/">performance</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/">promises</a><span class="tag-list-count">30</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/">reactive</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/">reactjs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/">security</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/">sentry</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/">testing</a><span class="tag-list-count">44</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/">tutorial</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/">ui</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/">web workers</a><span class="tag-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/QUnit/" style="font-size: 12.86px;">QUnit</a><a href="../tags/advice/" style="font-size: 19.29px;">advice</a><a href="../tags/angular/" style="font-size: 10px;">angular</a><a href="../tags/angularjs/" style="font-size: 18.57px;">angularjs</a><a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a><a href="../tags/assertions/" style="font-size: 13.57px;">assertions</a><a href="../tags/boilerplate/" style="font-size: 15.71px;">boilerplate</a><a href="../tags/browser/" style="font-size: 14.29px;">browser</a><a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a><a href="../tags/d3/" style="font-size: 11.43px;">d3</a><a href="../tags/database/" style="font-size: 10px;">database</a><a href="../tags/db/" style="font-size: 12.86px;">db</a><a href="../tags/es6/" style="font-size: 14.29px;">es6</a><a href="../tags/es7/" style="font-size: 10px;">es7</a><a href="../tags/functional/" style="font-size: 17.14px;">functional</a><a href="../tags/generators/" style="font-size: 12.86px;">generators</a><a href="../tags/git/" style="font-size: 13.57px;">git</a><a href="../tags/grunt/" style="font-size: 13.57px;">grunt</a><a href="../tags/gulp/" style="font-size: 11.43px;">gulp</a><a href="../tags/immutable/" style="font-size: 10px;">immutable</a><a href="../tags/interview/" style="font-size: 11.43px;">interview</a><a href="../tags/jade/" style="font-size: 12.14px;">jade</a><a href="../tags/javascript/" style="font-size: 20px;">javascript</a><a href="../tags/jshint/" style="font-size: 11.43px;">jshint</a><a href="../tags/modular-development/" style="font-size: 15.71px;">modular development</a><a href="../tags/nodejs/" style="font-size: 18.57px;">nodejs</a><a href="../tags/performance/" style="font-size: 15px;">performance</a><a href="../tags/promises/" style="font-size: 16.43px;">promises</a><a href="../tags/proposal/" style="font-size: 10.71px;">proposal</a><a href="../tags/reactive/" style="font-size: 10.71px;">reactive</a><a href="../tags/reactjs/" style="font-size: 10.71px;">reactjs</a><a href="../tags/security/" style="font-size: 12.14px;">security</a><a href="../tags/sentry/" style="font-size: 13.57px;">sentry</a><a href="../tags/testing/" style="font-size: 17.86px;">testing</a><a href="../tags/tutorial/" style="font-size: 12.86px;">tutorial</a><a href="../tags/ui/" style="font-size: 10px;">ui</a><a href="../tags/web-workers/" style="font-size: 12.86px;">web workers</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../hydrate-your-apps/">Hydrate your apps</a>
          </li>
        
          <li>
            <a href="../my-node-tools/">My Node tools</a>
          </li>
        
          <li>
            <a href="../pass-the-logic/">Pass the logic</a>
          </li>
        
          <li>
            <a href="../use-some-es6-in-cli-apps/">Use some ES6 in CLI apps</a>
          </li>
        
          <li>
            <a href="../1-2-3-linted/">1, 2, 3, linted</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="..//" class="mobile-nav-link">Home</a>
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'http://glebbahmutov.com/blog/inject-valid-constants-into-angular/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="../fancybox/jquery.fancybox.css" type="text/css">
  <script src="../fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="../js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>