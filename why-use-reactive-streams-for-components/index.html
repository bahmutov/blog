<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Why use reactive streams for components? | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="TL;DR - the parent component passes an object of reactive streams to the child component  When working with a web framework, a parent component often needs to pass a property that will change over ti">
<meta property="og:type" content="article">
<meta property="og:title" content="Why use reactive streams for components?">
<meta property="og:url" content="https://glebbahmutov.com/blog/why-use-reactive-streams-for-components/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="TL;DR - the parent component passes an object of reactive streams to the child component  When working with a web framework, a parent component often needs to pass a property that will change over ti">
<meta property="og:locale">
<meta property="article:published_time" content="2016-12-18T05:00:00.000Z">
<meta property="article:modified_time" content="2021-06-15T13:13:30.391Z">
<meta property="article:author" content="Gleb Bahmutov">
<meta property="article:tag" content="reactive">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="preload" href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" as="style">
  
<link rel="stylesheet" href="../css/style.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-titles">
      <div id="header-title" class="inner">
        <h1 id="logo-wrap">
          <a href="../index.html" id="logo">Better world by better software</a>
        </h1>
        <!--
        
        -->
        <!-- <span class="no-mobile">Software advice from</span> -->
        <h2 id="subtitle-wrap">
          <span class="subtitle">
            <a id="subtitle" href="https://glebbahmutov.com">Gleb Bahmutov PhD</a>
            <a id="nav-house-link" class="nav-icon" href="/" title="Home"></a>
            
              <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
            
            <a id="nav-search-btn" class="nav-icon" title="Search"></a>
            <div id="search-form-wrap">
              <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://glebbahmutov.com/blog"></form>
            </div>
          </span>
        </h2>

      </div>
    </div>
    <div id="climate-crisis">
      <h2>Our planet üåè is in danger</h2>
      <h3>Act today: <a href="/blog/climate-emergency/">what you can do</a></h3>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-why-use-reactive-streams-for-components" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2016-12-18T05:00:00.000Z" itemprop="datePublished">Dec 18 2016</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/process/">process</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Why use reactive streams for components?
    </h1>

    <h2 class="article-title" itemprop="name">
      How exchanging a set of streams solves component communication.
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>TL;DR - the parent component passes an object of reactive streams to
the child component</p>
</blockquote>
<p>When working with a web framework, a parent component often needs to
pass a property that will change over time into a child component.
Typically, the template-based frameworks
use special syntax for specifying the parent to child property
mapping. Whenever the property value changes in the parent component,
it will &quot;magically&quot; update in the child component too.</p>
<p>Let me list how several modern frameworks specify this mapping before
showing how reactive frameworks can implement the same feature in more
a powerful way.</p>
<h2><span id="mapping-properties-from-parent-to-child-in-angular-1">Mapping properties from parent to child in Angular 1</span></h2><p>For example Angular 1 uses
<a target="_blank" rel="noopener" href="https://docs.angularjs.org/guide/directive">directives</a> to map properties.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">angular.directive(<span class="string">&#x27;person&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    restrict: <span class="string">&#x27;E&#x27;</span>,</span><br><span class="line">    scope: &#123;</span><br><span class="line">      firstName: <span class="string">&#x27;=first&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    templateUrl: <span class="string">&#x27;person.html&#x27;</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Notice that the property <code>scope.firstName</code> in the child (directive)
is mapped to whatever will be specified as attribute <code>first</code> in the HTML
of the parent component. The parent component gives the name of its own
property to be passed. In this case the parent&#39;s <code>manager.ownName</code> is mapped
to the child&#39;s property <code>firstName</code> via the HTML tag attribute <code>first</code>.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- parent template --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">person</span> <span class="attr">first</span>=<span class="string">&quot;manager.ownName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The communication between the parent thus requires 3 things</p>
<ul>
<li>the parent component lists which property of its own (<code>manager.ownName</code>)
to map to the child component &quot;bind name&quot;, in this case <code>first</code>.</li>
<li>the child component looks under this &quot;bind name&quot; and maps the passed
attribute to its own local name <code>firstName</code>.</li>
<li>this map is &quot;live&quot; - every time the parent updates <code>manager.ownName</code>,
the child will have a new value in <code>firstName</code>. This is implemented
perhaps less than efficiently (but very simply) using the dirty checking
algorithm during the digest cycle.</li>
</ul>
<h2><span id="one-time-binding">One time binding</span></h2><p>What if the child is only interested in the <em>initial</em> property value?
In that case there is a slightly different notation. The parent component
selects to pass only the initial value of its own property.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- parent template --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">person</span> <span class="attr">first</span>=<span class="string">&quot;::manager.ownName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Source: <a target="_blank" rel="noopener" href="http://blog.thoughtram.io/angularjs/2014/10/14/exploring-angular-1.3-one-time-bindings.html">ONE-TIME BINDINGS IN ANGULAR 1.3</a></p>
<p>To the child directive <code>person</code> the property still looks the same.
Yet the parent will only pass the first value and will cut the connection.
This improves the performance, yet makes it hard for ensure that the
<em>right initial</em> value is passed. Consider a case when the name is fetched
from the server. If we never assign anything to the expression
<code>manager.ownName</code>, then the right value is passed to the <code>person</code> component.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.controller(<span class="string">&#x27;parent&#x27;</span>, <span class="function">(<span class="params">$scope, $http</span>) =&gt;</span> &#123;</span><br><span class="line">  $http.get(<span class="string">&#x27;/name&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">      $scope.manager = &#123;</span><br><span class="line">        ownName = name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>But if we assign something to the <code>$scope.manager</code> <em>before</em> HTTP call, for
example for clarity, then <em>that initial value</em> will be passed to the child.
The value received from the HTTP call will become the second and will NOT
make it to the child component <code>person</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.controller(<span class="string">&#x27;parent&#x27;</span>, <span class="function">(<span class="params">$scope, $http</span>) =&gt;</span> &#123;</span><br><span class="line">  $scope.manager = &#123;<span class="attr">ownName</span>: <span class="literal">undefined</span>&#125;</span><br><span class="line">  <span class="comment">// the child component will only receive `undefined`</span></span><br><span class="line">  <span class="comment">// and not the fetched &quot;second&quot; value</span></span><br><span class="line">  $http.get(<span class="string">&#x27;/name&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">      $scope.manager = &#123;</span><br><span class="line">        ownName = name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>If we really wanted a flexible communication system, the <em>child component</em>
should control when to receive the values from the parent, and when to
unsubscribe.</p>
<h2><span id="mapping-values-in-vuejs">Mapping values in Vue.js</span></h2><p>Before we consider this convoluted system an Angular-specific problem,
here is the same two way property binding in Vue.js</p>
<p>The custom directive has to declare every expected property, and the
parent component has to pass the name of its own property, just like
in Angular 1, but with more explicit parts.</p>
<p>See <a target="_blank" rel="noopener" href="http://vuejs.org/v2/guide/components.html#Passing-Data-with-Props">Passing data with props</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;person&#x27;</span>, &#123;</span><br><span class="line">  props: [<span class="string">&#x27;first&#x27;</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- parent template --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">person</span> <span class="attr">v-bind:first</span>=<span class="string">&quot;manager.ownName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>For one time binding (a rare case in Vue.js because there is no dirty checking
performance penalty), there is <code>v-once</code> directive, but it does not really
give you much in this case.</p>
<p>To solve the HTTP async case and only display the second changed value,
one can &quot;watch&quot; the child&#39;s data property and keep the track of the change
number manually.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// inside the child component</span></span><br><span class="line"><span class="keyword">var</span> gotFirstCount = <span class="number">0</span></span><br><span class="line">&#123;</span><br><span class="line">  data: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="comment">// our own property</span></span><br><span class="line">    name: <span class="literal">undefined</span></span><br><span class="line">  &#125;),</span><br><span class="line">  props: [<span class="string">&#x27;first&#x27;</span>], <span class="comment">// passed from the parent</span></span><br><span class="line">  watch: &#123;</span><br><span class="line">    first: <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (gotFirstCount &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = val</span><br><span class="line">        gotFirstCount += <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We have to write a lot more boilerplate code if we want to be flexible
with multiple values passed into the component.</p>
<h2><span id="mapping-values-in-react-jsx">Mapping values in React / JSX</span></h2><p>React and its template language JSX requires very little custom syntax,
yet a &quot;simple&quot; logic like &quot;only the first non-empty string&quot; value
requires the imperative &quot;if / else&quot; statement, implemented using boolean
expressions.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// inside the parent component</span></span><br><span class="line"><span class="comment">// this.props.manager = &#123;ownName: ...&#125;</span></span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">person</span> <span class="attr">first</span>=<span class="string">&#123;props.manager.ownName&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span></span><br><span class="line"><span class="comment">// inside the &quot;person&quot; component</span></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &#123;props.first &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>name &#123;props.first&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;</span><br><span class="line">  &#123;!props.first &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>loading ...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>I find this style a slight improvement, yet also imperative and confusing.</p>
<h2><span id="property-passing-using-reactive-programming">Property passing using reactive programming</span></h2><p>The above approaches all used custom syntax to map a property name
from the parent object to make it accessible as a property in the child object.
Yet, the solutions are opaque and only deal well with &quot;live&quot; data that flows
from the parent to the child, without much control over the data flow
by the child object.</p>
<p>What I would like to do instead:</p>
<ul>
<li>replace framework-specific &quot;magic&quot; properties with clear explicit types.</li>
<li>make the mapping from the parent property to the child clear and easy to see.</li>
<li>allow the child component to fully control <em>how it listens</em> to the value
updates, or when it stops listening.</li>
</ul>
<p>Here is my solution (which is similar to the way
<a target="_blank" rel="noopener" href="https://cycle.js.org/">Cycle.js</a> enabled the communication between its
<a target="_blank" rel="noopener" href="https://cycle.js.org/components.html">components</a>).</p>
<blockquote>
<p>A parent component passes an object of properties it allows the child component to &quot;use&quot;.
Only it is not a &quot;plain&quot; object, but every property value is a reactive stream.</p>
</blockquote>
<p>That&#39;s it.</p>
<p>If the child needs every value of the parent&#39;s property, it just
subscribes to the updates. The code looks something like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;<span class="attr">manager</span>: &#123;ownName&#125;&#125; = parent</span><br><span class="line">  ownName.subscribe(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;person got new name&#x27;</span>, name)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here is the entire code with &quot;child&quot;, &quot;parent&quot; components and their
connection</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Rx = <span class="built_in">require</span>(<span class="string">&#x27;rxjs/Rx&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// child &quot;component&quot; definition</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;<span class="attr">manager</span>: &#123;ownName&#125;&#125; = parent</span><br><span class="line">  ownName.subscribe(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;person got new name&#x27;</span>, name)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// parent creates its data</span></span><br><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  manager: &#123;</span><br><span class="line">    ownName: Rx.Observable.of(<span class="literal">undefined</span>, <span class="string">&#x27;Joe&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// create child &quot;component&quot;</span></span><br><span class="line"><span class="comment">// note that we have full control over which properties</span></span><br><span class="line"><span class="comment">// we allow the child to access</span></span><br><span class="line"><span class="keyword">const</span> child = person(parent)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  output:</span></span><br><span class="line"><span class="comment">  person got new name undefined</span></span><br><span class="line"><span class="comment">  person got new name Joe</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>If the child needs only the first value of the parent&#39;s property,
it can efficiently get it without any custom template syntax, using
regular Rx operator. The change is 1 word.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// child &quot;component&quot; definition</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;<span class="attr">manager</span>: &#123;ownName&#125;&#125; = parent</span><br><span class="line">  ownName</span><br><span class="line">    .first() <span class="comment">// or .take(1)</span></span><br><span class="line">    .subscribe(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;person got new name&#x27;</span>, name)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Let us test this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parent creates its data</span></span><br><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  manager: &#123;</span><br><span class="line">    ownName: Rx.Observable.of(<span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Mary&#x27;</span>, <span class="string">&#x27;Ann&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// person got new name Joe</span></span><br></pre></td></tr></table></figure>
<p>What if we want to reject all invalid names, and only take the first
non-empty string? Pass a predicate to the
<a target="_blank" rel="noopener" href="http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html#instance-method-first">first()</a> method.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;<span class="attr">manager</span>: &#123;ownName&#125;&#125; = parent</span><br><span class="line">  ownName</span><br><span class="line">    .first(<span class="function"><span class="params">s</span> =&gt;</span> s) <span class="comment">// &lt;= right here!</span></span><br><span class="line">    .subscribe(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;person got new name&#x27;</span>, name)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  parent stream [undefined, &#x27;&#x27;, &#x27;Mary&#x27;] produces</span></span><br><span class="line"><span class="comment">  person got new name Mary</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>What if we want to be more performant and avoid multiple child messages if the
name passed from the parent does not change?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parent creates its data</span></span><br><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  manager: &#123;</span><br><span class="line">    ownName: Rx.Observable.of(<span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Mary&#x27;</span>, <span class="string">&#x27;Mary&#x27;</span>, <span class="string">&#x27;Mary&#x27;</span>, <span class="string">&#x27;Ann&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Again, this is a data flow problem, which is solved using a regular Rx operator</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;<span class="attr">manager</span>: &#123;ownName&#125;&#125; = parent</span><br><span class="line">  ownName</span><br><span class="line">    .distinctUntilChanged() <span class="comment">// &lt;= right here!</span></span><br><span class="line">    .subscribe(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;person got new name&#x27;</span>, name)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output shows only the changes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">person got new name Joe</span><br><span class="line">person got new name Mary</span><br><span class="line">person got new name Ann</span><br></pre></td></tr></table></figure>
<p>Pretty cool, and if the stream passes an immutable data structure, the
effect in the <code>.subscribe</code> function (printing to the console, rendering
to the DOM) becomes very efficient since it is executed only for if the
data has changed.</p>
<h2><span id="conclusion">Conclusion</span></h2><p>With the above approach we have the following advantages</p>
<h3><span id="simplicity">Simplicity</span></h3><blockquote>
<p>We can avoid framework-specific unnatural textual description of the
complex runtime data flow that maps one property to another.</p>
</blockquote>
<p>No need to invent <code>&lt;parent name-will-be-camel-cased=&quot;foo-bar&quot; /&gt;</code>
weird intermediate HTML-compatible grammars.
The explicit library operator <code>s.first()</code>
is always going to be simpler to understand and remember than
the framework-specific <code>::name=&quot;property&quot;</code> notation.</p>
<h3><span id="power">Power</span></h3><blockquote>
<p>The child component gets more power over the data flow from the parent</p>
</blockquote>
<p>The child can grab every / first / distinct / first passing predicate
value from the parent.</p>
<h3><span id="isolation">Isolation</span></h3><blockquote>
<p>the parent component can still have control over <em>what</em> gets passed
into the child.</p>
</blockquote>
<p>For example, the parent component can create a stream of the first value
when passing into the child component</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// data stream with everything</span></span><br><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  manager: &#123;</span><br><span class="line">    ownName: Rx.Observable.of(<span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Mary&#x27;</span>, <span class="string">&#x27;Ann&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// child component can only get the first value</span></span><br><span class="line"><span class="keyword">const</span> child = person(&#123;</span><br><span class="line">  manager: &#123;<span class="attr">ownName</span>: parent.manager.ownName.first()&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3><span id="performance">Performance</span></h3><blockquote>
<p>The application can get to the high performance mark because only the running subscriptions are processed</p>
</blockquote>
<p>If the child stopped listening after the first passed value by using
<code>.first()</code> the parent stream will be freed automatically.</p>
<h2><span id="addendum-1">Addendum 1</span></h2><p>Once one is passing properties as objects full of reactive streams,
one can derive a user-friendly API to simplify basic cases. I prefer
passing an object with properties because it is
<a href="../parameter-destructuring/">simple to destruct</a>. The only improvement
would be to automatically wrap primitive values as Observables.</p>
<p>In the code below we recursively walk the properties object and convert
any non-object to an observable of a single value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> R = <span class="built_in">require</span>(<span class="string">&#x27;ramda&#x27;</span>)</span><br><span class="line"><span class="comment">// parent only has static data</span></span><br><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  manager: &#123;</span><br><span class="line">    ownName: <span class="string">&#x27;Joe&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// create child &quot;component&quot;</span></span><br><span class="line"><span class="comment">// pass primitive data as streams</span></span><br><span class="line"><span class="keyword">const</span> child = person(observe(parent))</span><br><span class="line"><span class="comment">// the utility API function &#x27;observe&#x27; ensures all</span></span><br><span class="line"><span class="comment">// primitives are converted to Observables</span></span><br><span class="line"><span class="comment">// before being passed to the child function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">what</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> toObservable = <span class="function">(<span class="params">value, key</span>) =&gt;</span></span><br><span class="line">    R.is(<span class="built_in">Object</span>, value) ? observe(value) : Rx.Observable.of(value)</span><br><span class="line">  <span class="keyword">return</span> R.mapObjIndexed(toObservable, what)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  output:</span></span><br><span class="line"><span class="comment">  person got new name Joe</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>In another abstraction we could delay creating observables until they are
requested by the child component. For example, we can pass an object
that will only create an Observable when the child component calls
<code>.need(&lt;path&gt;)</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Rx = <span class="built_in">require</span>(<span class="string">&#x27;rxjs/Rx&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> R = <span class="built_in">require</span>(<span class="string">&#x27;ramda&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// child &quot;component&quot; definition</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ask only for a property by name</span></span><br><span class="line">  ownName = parent.need(<span class="string">&#x27;manager.ownName&#x27;</span>)</span><br><span class="line">  ownName</span><br><span class="line">    .subscribe(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;person got new name&#x27;</span>, name)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// parent only has static data</span></span><br><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  manager: &#123;</span><br><span class="line">    ownName: <span class="string">&#x27;Joe&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// create child &quot;component&quot;</span></span><br><span class="line"><span class="keyword">const</span> child = person(creator(parent))</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">creator</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// returns a new Observable of a static value</span></span><br><span class="line">    need: <span class="function"><span class="params">path</span> =&gt;</span></span><br><span class="line">      Rx.Observable.of(R.path(path.split(<span class="string">&#x27;.&#x27;</span>), data))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  output:</span></span><br><span class="line"><span class="comment">  person got new name Joe</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>In a real system, the parent&#39;s data would already have Observable
values and our <code>.need(&lt;path&gt;)</code> method would convert them into shared
&quot;hot&quot; streams instead.</p>
<h2><span id="addendum-2">Addendum 2</span></h2><p>The child component function is isolated from the parent environment,
yet they can coexist and communicate via the &quot;in-&quot; stream.
Because the child component &quot;picks&quot; the properties it uses by subscribing
there is almost no performance penalty in passing more properties
than necessary (there is a tiny overhead for creating an idle Observable).
I would use the data encapsulation by the parent heuristic when deciding
which properties to expose to other components.</p>
<p>Similarly, any component can be isolated from the DOM environment
by creating a &quot;wrapper&quot; object that allows one to subscribe to the
events. In this case the performance is even better because no one
should create unnecessary streams in the first place.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> DOM = &#123;</span><br><span class="line">  select: <span class="function">(<span class="params">what, eventName</span>) =&gt;</span> Rx.Observable.fromEvent($(what), eventName)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">dom</span>) </span>&#123;</span><br><span class="line">  dom.select(<span class="string">&#x27;body&#x27;</span>, <span class="string">&#x27;clicks&#x27;</span>) <span class="comment">// creates stream</span></span><br><span class="line">    .scan(<span class="function">(<span class="params">count, e</span>) =&gt;</span> count + <span class="number">1</span>, <span class="number">0</span>) <span class="comment">// &quot;redux-lite&quot; inside the stream</span></span><br><span class="line">    .subscribe(<span class="function"><span class="params">counter</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`clicked <span class="subst">$&#123;counter&#125;</span> times`</span>))</span><br><span class="line">&#125;</span><br><span class="line">person(DOM)</span><br></pre></td></tr></table></figure>
<p>Looking at the native DOM as a reactive stream API is a
powerful abstraction.</p>
<h2><span id="addendum-3">Addendum 3</span></h2><p>So far we have only seen the data flow in one direction - from the parent
component function into the child component function. What if we want to
return data from the child component? Notice that in all examples,
we wrote variable name <code>child</code> and assigned the result of calling
<code>person(parent)</code> to this variable, yet function <code>person</code> has never
returned anything!</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// no return statement</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// create child &quot;component&quot;</span></span><br><span class="line"><span class="keyword">const</span> child = person(parent)</span><br></pre></td></tr></table></figure>
<p>Since we are dealing with the real world, it makes sense for the
child component to return multiple values. The way for a function
to return multiple values is to return an Observable.</p>
<p>I prefer to return again an object with individual property values
being Observables, to have symmetry with the input object full of
reactive streams.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Rx = <span class="built_in">require</span>(<span class="string">&#x27;rxjs/Rx&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// child &quot;component&quot; definition</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;<span class="attr">manager</span>: &#123;ownName&#125;&#125; = parent</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    reaction: ownName.map(<span class="function"><span class="params">name</span> =&gt;</span> <span class="string">`I like <span class="subst">$&#123;name&#125;</span>!`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// parent creates its data</span></span><br><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  manager: &#123;</span><br><span class="line">    ownName: Rx.Observable.of(<span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Mary&#x27;</span>, <span class="string">&#x27;Ann&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// create child &quot;component&quot;</span></span><br><span class="line"><span class="comment">// note that we have full control over which properties</span></span><br><span class="line"><span class="comment">// we allow the child to access</span></span><br><span class="line"><span class="keyword">const</span> child = person(parent)</span><br><span class="line">child.reaction.subscribe(<span class="built_in">console</span>.log)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  output:</span></span><br><span class="line"><span class="comment">  I like Joe!</span></span><br><span class="line"><span class="comment">  I like Mary!</span></span><br><span class="line"><span class="comment">  I like Ann!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3><span id="a-word-of-caution">A word of caution</span></h3><p>What if you want the two components &quot;talk to each other&quot;? For example,
you could wait for the &quot;child&quot; component&#39;s reaction before assigning
a new manager. When manually pushing events around like this,
it is important to remember when to stop and &quot;complete&quot; the stream.</p>
<p>To demonstrate, let us try making a simple <code>Subject</code> which is an
Observable but allows us to push new events into it.
When the reply from the child component arrives
we will push the second value (and expect the child to reply with the second
reaction text).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// child &quot;component&quot; definition</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;<span class="attr">manager</span>: &#123;ownName&#125;&#125; = parent</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    reaction: ownName.map(<span class="function"><span class="params">name</span> =&gt;</span> <span class="string">`I like <span class="subst">$&#123;name&#125;</span>!`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// parent creates its data</span></span><br><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  manager: &#123;</span><br><span class="line">    ownName: <span class="keyword">new</span> Rx.Subject()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// create child &quot;component&quot;</span></span><br><span class="line"><span class="comment">// note that we have full control over which properties</span></span><br><span class="line"><span class="comment">// we allow the child to access</span></span><br><span class="line"><span class="keyword">const</span> child = person(parent)</span><br><span class="line">child.reaction.subscribe(<span class="function"><span class="params">s</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(s)</span><br><span class="line">  parent.manager.ownName.next(<span class="string">&#x27;Mary&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// start the ball rolling</span></span><br><span class="line">parent.manager.ownName.next(<span class="string">&#x27;Joe&#x27;</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  output:</span></span><br><span class="line"><span class="comment">  I like Joe!</span></span><br><span class="line"><span class="comment">  I like Mary!</span></span><br><span class="line"><span class="comment">  I like Mary!</span></span><br><span class="line"><span class="comment">  ...</span></span><br><span class="line"><span class="comment">  RangeError: Maximum call stack size exceeded</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>Hmm, we cannot have a reactive stream go into a loop, pushing new event
over and over. We need to know when to stop! In this case we never sent
<code>complete</code> event to the <code>manager.ownName</code> stream, thus we got into the
infinite loop. We need to send the &quot;complete&quot; event after sending the
data AND we need to do this asynchronously to allow the &quot;complete&quot;
propagate, rather just the data event (getting into the infinite loop
again).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">child.reaction.subscribe(<span class="function"><span class="params">s</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(s)</span><br><span class="line">  process.nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    parent.manager.ownName.next(<span class="string">&#x27;Mary&#x27;</span>)</span><br><span class="line">    parent.manager.ownName.complete()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  output:</span></span><br><span class="line"><span class="comment">  I like Joe!</span></span><br><span class="line"><span class="comment">  I like Mary!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>When connecting streams into loops, it is important to remember that
the stream cannot form a cycle, thus there has to be a &quot;breaker circuit&quot;
that stops the same event from traveling in circles.</p>
<h2><span id="related-resources">Related resources</span></h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/mobxjs/mobx">Mobx</a> is the closest implementation
to the above approach, but with non-Rx terms
(instead using terms like <code>observer</code>, <code>reactions</code>). Definitely check it out.</li>
<li><a target="_blank" rel="noopener" href="https://cycle.js.org/">Cycle.js</a> is a reactive framework that takes
modeling everything with streams and isolating components seriously.</li>
<li><a target="_blank" rel="noopener" href="http://reactivex.io/rxjs/">Rxjs</a> is a large library of reactive
streams with many many operators. Two good alternatives are
<a target="_blank" rel="noopener" href="https://github.com/staltz/xstream">xstream</a> and
<a target="_blank" rel="noopener" href="https://github.com/cujojs/most">most</a>.</li>
</ul>

      
    </div>

    
      <footer class="article-footer personal-links">
  <p>
    Follow Gleb Bahmutov <a target="_blank" rel="noopener" href="https://twitter.com/bahmutov">@bahmutov</a>,
    see his projects at <a href="https://glebbahmutov.com">glebbahmutov.com</a>,
    watch his Cypress <a target="_blank" rel="noopener" href="https://www.youtube.com/c/glebbahmutov/videos">videos</a>,
    browse his <a target="_blank" rel="noopener" href="https://slides.com/bahmutov">presentations</a>
  </p>
  <p>
    Want to know more about Cypress? Check out <a href="https://cypress.tips" target="_blank">cypress.tips</a>
  </p>
</footer>
<script src="https://rawgit.com/toddmotto/linkjuice/702066a37124081e7ad1a972844a9a91115be05a/dist/linkjuice.js"></script>
<script>
function contentFn (node, icon) {
  const s = '<a href="#' + node.id + '" class="linkjuice">' +
    node.innerHTML + ' ' + icon + '</a>\n'
  return s
}
linkjuice.init('.article-entry', {
  selectors: ['h2 span'],
  icon: '<span class="link-symbol">#</span>',
  contentFn: contentFn
});
</script>

    

    <footer class="article-footer">
      <a data-url="https://glebbahmutov.com/blog/why-use-reactive-streams-for-components/" data-id="ckt33uhzs01vh6yvg94n97srj" class="article-share-link">Share</a>
      
        <a href="https://glebbahmutov.com/blog/why-use-reactive-streams-for-components/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/reactive/" rel="tag">reactive</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../functors-encapsulate-imperative-logic/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Functors encapsulate imperative logic
        
      </div>
    </a>
  
  
    <a href="../connecting-crash-reporting-with-end-to-end-tests/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Connecting crash reporting with end to end tests</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    <style>
#carbonads {
  display: block;
  overflow: hidden;
  font-size: 11px;
  font-family: Verdana, "Helvetica Neue", Helvetica, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: #258fb8;
  text-decoration: none;
}

#carbonads a:hover {
  text-decoration: underline;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  float: left;
  margin-right: 1em;
}

.carbon-img img { display: block; }

.carbon-text {
  display: block;
  float: left;
  text-align: left;
  margin-top: 0.5em;
}
@media screen and (min-width: 1024px) {
  .carbon-text {
    max-width: calc(100% - 130px - 1em);
  }
}

.carbon-poweredby {
  /*position: absolute;
  right: 0;
  bottom: 0;*/
  float: right;
  display: block;
  font-size: 11px;
}
</style>
<div class="widget-wrap">
  <div class="widget-title">&nbsp;</div>
  <div class="widget">
    <!-- Carbon Ads -->
    <script async type="text/javascript"
      src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=glebbahmutovcom"
      id="_carbonads_js"></script>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/climate/">climate</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">138</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">415</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="../tags/11ty/" rel="tag">11ty</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/" rel="tag">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/a11y/" rel="tag">a11y</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/" rel="tag">advice</a><span class="tag-list-count">109</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/algolia/" rel="tag">algolia</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/" rel="tag">angularjs</a><span class="tag-list-count">58</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/" rel="tag">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/" rel="tag">assertions</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ast/" rel="tag">ast</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/" rel="tag">boilerplate</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/" rel="tag">browser</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ci/" rel="tag">ci</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/circle/" rel="tag">circle</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/climate/" rel="tag">climate</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/code-coverage/" rel="tag">code coverage</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cyclejs/" rel="tag">cyclejs</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cypress/" rel="tag">cypress</a><span class="tag-list-count">141</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cypress-dashboard/" rel="tag">cypress dashboard</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/" rel="tag">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/" rel="tag">db</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/docker/" rel="tag">docker</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/documentation/" rel="tag">documentation</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/" rel="tag">es6</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/" rel="tag">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/" rel="tag">functional</a><span class="tag-list-count">68</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/" rel="tag">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/" rel="tag">git</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/github/" rel="tag">github</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/graphql/" rel="tag">graphql</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/" rel="tag">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/" rel="tag">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/hiring/" rel="tag">hiring</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/hyperapp/" rel="tag">hyperapp</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/" rel="tag">immutable</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/" rel="tag">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/" rel="tag">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">165</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/" rel="tag">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/markdown/" rel="tag">markdown</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/model-based-testing/" rel="tag">model-based testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/" rel="tag">modular development</a><span class="tag-list-count">28</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/netlify/" rel="tag">netlify</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/" rel="tag">nodejs</a><span class="tag-list-count">84</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/" rel="tag">performance</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/presentation/" rel="tag">presentation</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/" rel="tag">promises</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/" rel="tag">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ramda/" rel="tag">ramda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/react/" rel="tag">react</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/react-native/" rel="tag">react native</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/" rel="tag">reactive</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/" rel="tag">reactjs</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/renovate/" rel="tag">renovate</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/screencast/" rel="tag">screencast</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/" rel="tag">security</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/" rel="tag">sentry</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/service-workers/" rel="tag">service workers</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/state-machine/" rel="tag">state machine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/" rel="tag">testing</a><span class="tag-list-count">130</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/" rel="tag">tutorial</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/typescript/" rel="tag">typescript</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/" rel="tag">ui</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/vercel/" rel="tag">vercel</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/visual-testing/" rel="tag">visual testing</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/vuejs/" rel="tag">vuejs</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/" rel="tag">web workers</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/webpack/" rel="tag">webpack</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/11ty/" style="font-size: 10.38px;">11ty</a> <a href="../tags/QUnit/" style="font-size: 11.54px;">QUnit</a> <a href="../tags/a11y/" style="font-size: 10.77px;">a11y</a> <a href="../tags/advice/" style="font-size: 18.85px;">advice</a> <a href="../tags/algolia/" style="font-size: 10.38px;">algolia</a> <a href="../tags/angularjs/" style="font-size: 17.69px;">angularjs</a> <a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a> <a href="../tags/assertions/" style="font-size: 13.08px;">assertions</a> <a href="../tags/ast/" style="font-size: 12.69px;">ast</a> <a href="../tags/boilerplate/" style="font-size: 15px;">boilerplate</a> <a href="../tags/browser/" style="font-size: 15.77px;">browser</a> <a href="../tags/ci/" style="font-size: 16.54px;">ci</a> <a href="../tags/circle/" style="font-size: 12.69px;">circle</a> <a href="../tags/climate/" style="font-size: 14.62px;">climate</a> <a href="../tags/code-coverage/" style="font-size: 13.46px;">code coverage</a> <a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a> <a href="../tags/cyclejs/" style="font-size: 12.31px;">cyclejs</a> <a href="../tags/cypress/" style="font-size: 19.62px;">cypress</a> <a href="../tags/cypress-dashboard/" style="font-size: 13.85px;">cypress dashboard</a> <a href="../tags/d3/" style="font-size: 10.77px;">d3</a> <a href="../tags/db/" style="font-size: 14.23px;">db</a> <a href="../tags/docker/" style="font-size: 14.23px;">docker</a> <a href="../tags/documentation/" style="font-size: 11.92px;">documentation</a> <a href="../tags/es6/" style="font-size: 14.62px;">es6</a> <a href="../tags/es7/" style="font-size: 10px;">es7</a> <a href="../tags/functional/" style="font-size: 18.08px;">functional</a> <a href="../tags/generators/" style="font-size: 11.54px;">generators</a> <a href="../tags/git/" style="font-size: 15px;">git</a> <a href="../tags/github/" style="font-size: 15.38px;">github</a> <a href="../tags/graphql/" style="font-size: 11.15px;">graphql</a> <a href="../tags/grunt/" style="font-size: 12.31px;">grunt</a> <a href="../tags/gulp/" style="font-size: 10.77px;">gulp</a> <a href="../tags/hiring/" style="font-size: 10.77px;">hiring</a> <a href="../tags/hyperapp/" style="font-size: 12.31px;">hyperapp</a> <a href="../tags/immutable/" style="font-size: 11.54px;">immutable</a> <a href="../tags/interview/" style="font-size: 10.77px;">interview</a> <a href="../tags/jade/" style="font-size: 11.15px;">jade</a> <a href="../tags/javascript/" style="font-size: 20px;">javascript</a> <a href="../tags/jshint/" style="font-size: 10.77px;">jshint</a> <a href="../tags/markdown/" style="font-size: 13.85px;">markdown</a> <a href="../tags/model-based-testing/" style="font-size: 10px;">model-based testing</a> <a href="../tags/modular-development/" style="font-size: 16.92px;">modular development</a> <a href="../tags/netlify/" style="font-size: 11.15px;">netlify</a> <a href="../tags/nodejs/" style="font-size: 18.46px;">nodejs</a> <a href="../tags/performance/" style="font-size: 16.15px;">performance</a> <a href="../tags/presentation/" style="font-size: 11.92px;">presentation</a> <a href="../tags/promises/" style="font-size: 17.31px;">promises</a> <a href="../tags/proposal/" style="font-size: 10.38px;">proposal</a> <a href="../tags/ramda/" style="font-size: 10px;">ramda</a> <a href="../tags/react/" style="font-size: 11.54px;">react</a> <a href="../tags/react-native/" style="font-size: 11.15px;">react native</a> <a href="../tags/reactive/" style="font-size: 14.23px;">reactive</a> <a href="../tags/reactjs/" style="font-size: 11.15px;">reactjs</a> <a href="../tags/renovate/" style="font-size: 11.54px;">renovate</a> <a href="../tags/screencast/" style="font-size: 10px;">screencast</a> <a href="../tags/security/" style="font-size: 13.08px;">security</a> <a href="../tags/sentry/" style="font-size: 13.85px;">sentry</a> <a href="../tags/service-workers/" style="font-size: 11.92px;">service workers</a> <a href="../tags/state-machine/" style="font-size: 10px;">state machine</a> <a href="../tags/testing/" style="font-size: 19.23px;">testing</a> <a href="../tags/tutorial/" style="font-size: 15.77px;">tutorial</a> <a href="../tags/typescript/" style="font-size: 11.92px;">typescript</a> <a href="../tags/ui/" style="font-size: 10.38px;">ui</a> <a href="../tags/vercel/" style="font-size: 12.69px;">vercel</a> <a href="../tags/visual-testing/" style="font-size: 11.15px;">visual testing</a> <a href="../tags/vuejs/" style="font-size: 11.54px;">vuejs</a> <a href="../tags/web-workers/" style="font-size: 11.92px;">web workers</a> <a href="../tags/webpack/" style="font-size: 10.77px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/08/">August 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/07/">July 2021</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/06/">June 2021</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/05/">May 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/04/">April 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/03/">March 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/02/">February 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2021/01/">January 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/12/">December 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/11/">November 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/10/">October 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/09/">September 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/07/">July 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/04/">April 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/03/">March 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/02/">February 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2020/01/">January 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/12/">December 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/11/">November 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/10/">October 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/09/">September 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/08/">August 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/07/">July 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/06/">June 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/05/">May 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/04/">April 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/03/">March 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2019/01/">January 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/12/">December 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/11/">November 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/09/">September 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/08/">August 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/06/">June 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/04/">April 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/03/">March 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/01/">January 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/11/">November 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/09/">September 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/07/">July 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/06/">June 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/05/">May 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/04/">April 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/03/">March 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/02/">February 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/01/">January 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/12/">December 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/10/">October 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/09/">September 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/08/">August 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/07/">July 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/06/">June 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/05/">May 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/04/">April 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/03/">March 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/02/">February 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/01/">January 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../verify-phone-part-two/">How To Verify Phone Number During Tests Part 2</a>
          </li>
        
          <li>
            <a href="../verify-phone-part-one/">How To Verify Phone Number During Tests Part 1</a>
          </li>
        
          <li>
            <a href="../detached/">Solving The Element Is Detached From DOM Error In Cypress</a>
          </li>
        
          <li>
            <a href="../scrape-slides/">Scrape Slides</a>
          </li>
        
          <li>
            <a href="../code-coverage-for-chat-tests/">Code Coverage For Chat App</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'https://glebbahmutov.com/blog/why-use-reactive-streams-for-components/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="../fancybox/jquery.fancybox.css">

  
<script src="../fancybox/jquery.fancybox.pack.js"></script>




<script src="../js/script.js"></script>


  </div>
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
<script>
(function centerMainOnAsideScroll () {
  // when aside side bar scrolls outside the view
  // it centers the main content.
  const main = document.querySelector('#main')
  const aside = document.querySelector('aside#sidebar')
  console.assert(main, 'could not get #main')
  console.assert(aside, 'could not get aside')
  // initially the aside sidebar is visible
  let asideVisible = true

  function centerMain () {
    console.log('adding class center-main')
    main.classList.add('center-main')
  }
  function leftMain () {
    main.classList.remove('center-main')
  }

  function callWhenAsideScrollsUp (becameInvisible, becameVisible) {
    return function () {
      const border = 50
      const rect = aside.getBoundingClientRect()
      if (asideVisible && rect.bottom < -border) {
        asideVisible = false
        becameInvisible()
      }

      if (!asideVisible && window.scrollY < border) {
        asideVisible = true
        becameVisible()
      }
    }
  }
  const throttleWaitMs = 250
  const onScroll = _.throttle(
    callWhenAsideScrollsUp(centerMain, leftMain),
    throttleWaitMs
  )
  window.addEventListener('scroll', onScroll)
}())
</script>

</body>
</html>
