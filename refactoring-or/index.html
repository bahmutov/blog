<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Refactoring OR | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Problem: find if a flag was passed in the command line arguments.
The flag can have several aliases.
node index.js --verbose
node index.js -v
We can of course use a dedicated 3rd party library to robu">
<meta property="og:type" content="article">
<meta property="og:title" content="Refactoring OR">
<meta property="og:url" content="http://glebbahmutov.com/blog/refactoring-or/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="Problem: find if a flag was passed in the command line arguments.
The flag can have several aliases.
node index.js --verbose
node index.js -v
We can of course use a dedicated 3rd party library to robu">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Refactoring OR">
<meta name="twitter:description" content="Problem: find if a flag was passed in the command line arguments.
The flag can have several aliases.
node index.js --verbose
node index.js -v
We can of course use a dedicated 3rd party library to robu">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="../css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="..//" id="logo">Better world by better software</a>
      </h1>
      <!--
      
        <h2 id="subtitle-wrap">
          <a href="..//" id="subtitle">Software advice from Dr. Gleb Bahmutov PhD</a>
        </h2>
      
      -->
      <h2 id="subtitle-wrap">
        <span class="subtitle">Software advice from <a id="subtitle" href="http://glebbahmutov.com">Dr. Gleb Bahmutov PhD</a></span>
      </h2>
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="..//">Home</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://glebbahmutov.com/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-refactoring-or" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2014-07-29T04:00:00.000Z" itemprop="datePublished">Jul 29 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/process/">process</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Refactoring OR
    </h1>

    <h2 class="article-title" itemprop="name">
      Example refactoring a block of code containing OR condition
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Problem:</strong> find if a flag was passed in the command line arguments.
The flag can have several aliases.</p>
<pre><code><span class="keyword">node</span><span class="identifier"> </span><span class="title">index</span>.js --verbose
<span class="keyword">node</span><span class="identifier"> </span><span class="title">index</span>.js -v
</code></pre><p>We can of course use a dedicated 3rd party library to robustly handle command line
options. But sometimes all we want is quick and dependency-free solution.
Here is our first solution:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> verbose = process.argv.some(<span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> arg === <span class="string">&apos;--verbose&apos;</span> || arg === <span class="string">&apos;-v&apos;</span>;</span><br><span class="line">});</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&apos;verbose?&apos;</span>, verbose);</span><br></pre></td></tr></table></figure>
<p>output</p>
<pre><code>$ <span class="keyword">node</span><span class="identifier"> </span><span class="title">index</span>.js -v
verbose? <span class="literal">true</span>
</code></pre><p>This implementation certainly works, but it mixes 3 different features:</p>
<ul>
<li>Iterating through process arguments</li>
<li>Checking if an argument matches given keyword</li>
<li>Combining several checks into result using OR</li>
</ul>
<p>Mixing goals like this in single piece of code leads to complex and brittle code.
Let us refactor this code into easy to read and test parts.</p>
<h2 id="split-iteration">Split iteration</h2><p>First refactoring: make argument check its own function</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isVerboseArgument</span>(<span class="params">arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> arg === <span class="string">&apos;--verbose&apos;</span> || arg === <span class="string">&apos;-v&apos;</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> verbose = process.argv.some(isVerboseArgument);</span><br></pre></td></tr></table></figure>
<p>We separated two concerns: iterating through command line arguments and
checking an individual argument.</p>
<h2 id="separate-check">Separate check</h2><p>Second refactoring actually makes the code longer, but we are increasing the code
clarity. We are replacing inlined string equalities with function calls</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMatch</span>(<span class="params">word, arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> word === arg;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isVerboseArgument</span>(<span class="params">arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> isMatch(<span class="string">&apos;--verbose&apos;</span>, arg) || isMatch(<span class="string">&apos;-v&apos;</span>, arg);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> verbose = process.argv.some(isVerboseArgument);</span><br></pre></td></tr></table></figure>
<p>Having function <code>isMatch</code> will make next refactoring much simpler. Notice,
that I am putting actual string value first, leaving the free <code>arg</code> parameter
second. I generally <a href="../put-callback-first-for-elegance/">recommend</a>
this order because this will simplify future partial application in left to right order.</p>
<h2 id="form-each-check">Form each check</h2><p>We can factor out each side of the OR condition using <code>.bind</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMatch</span>(<span class="params">word, arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> word === arg;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> isVerbose = isMatch.bind(<span class="literal">null</span>, <span class="string">&apos;--verbose&apos;</span>);</span><br><span class="line"><span class="keyword">var</span> isV = isMatch.bind(<span class="literal">null</span>, <span class="string">&apos;-v&apos;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isVerboseArgument</span>(<span class="params">arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> isVerbose(arg) || isV(arg);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> verbose = process.argv.some(isVerboseArgument);</span><br></pre></td></tr></table></figure>
<h2 id="introduce-or-function">Introduce OR function</h2><p>Just like we replaced inlined <code>===</code> with calling <code>isMatch</code> function, let us
replace OR with a function</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMatch</span>(<span class="params">word, arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> word === arg;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> isVerbose = isMatch.bind(<span class="literal">null</span>, <span class="string">&apos;--verbose&apos;</span>);</span><br><span class="line"><span class="keyword">var</span> isV = isMatch.bind(<span class="literal">null</span>, <span class="string">&apos;-v&apos;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">or</span>(<span class="params">predicates</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> predicates.some(<span class="function"><span class="keyword">function</span> (<span class="params">predicate</span>) </span>{</span><br><span class="line">      <span class="keyword">return</span> predicate(arg);</span><br><span class="line">    });</span><br><span class="line">  };</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isVerboseArgument</span>(<span class="params">arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> or([isVerbose, isV])(arg);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> verbose = process.argv.some(isVerboseArgument);</span><br></pre></td></tr></table></figure>
<p>Let us refine <code>or</code> function to work with plain arguments without array</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">or</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> predicates = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> predicates.some(<span class="function"><span class="keyword">function</span> (<span class="params">predicate</span>) </span>{</span><br><span class="line">      <span class="keyword">return</span> predicate(arg);</span><br><span class="line">    });</span><br><span class="line">  };</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isVerboseArgument</span>(<span class="params">arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> or(isVerbose, isV)(arg);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>This is very simple <code>or</code> function that passes single argument to each predicate function.
We probably can transform it to accept multiple arguments, if needed</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">or</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> predicates = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> orArguments = <span class="built_in">arguments</span>;</span><br><span class="line">    <span class="keyword">return</span> predicates.some(<span class="function"><span class="keyword">function</span> (<span class="params">predicate</span>) </span>{</span><br><span class="line">      <span class="keyword">return</span> predicate.call(<span class="literal">null</span>, orArguments);</span><br><span class="line">    });</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="remove-code">Remove code</h2><p>Finally, let us remove the code that is no longer necessary. Notice that <code>isVerboseArgument</code>
is only calling <code>or</code> without doing anything else. Thus we can remove it, leaving only this
simple code</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// isMatch, isVerbose, isV, &apos;or&apos; function like above</span></span><br><span class="line"><span class="keyword">var</span> verbose = process.argv.some(or(isVerbose, isV));</span><br></pre></td></tr></table></figure>
<p>Each individual function <code>isMatch</code>, <code>isVerbose</code>, etc.
has a single purpose and is <em>pure</em> - its output depends only on the
inputs. The <em>pure</em> functions are simple to test. Pure functions that only have a single purpose
are easy to test and to combine into more advanced logic.</p>
<p>In this particular case, we can move <code>isMatch</code> and <code>or</code> into a library, add unit tests
(very simple for pure functions) and then reuse in our application. The final code
<code>or(isVerbose, isV)</code> is really hard to mess accidentally, and should be simple to fix.</p>
<h2 id="alternative-final-solution">Alternative final solution</h2><p>Let us say that you measured the previous solution, and looked at actual users entering
command line arguments. You have noticed that most users prefer using <code>-v</code> to typing <code>--verbose</code>.
In this case you can iterate through all arguments looking for <code>-v</code> first, then, only if
not found, we will look for <code>--verbose</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> anyVerbose = process.argv.some.bind(process.argv, isVerbose);</span><br><span class="line"><span class="keyword">var</span> anyV = process.argv.some.bind(process.argv, isV);</span><br><span class="line"><span class="keyword">var</span> findVerbose = or(anyVerbose, anyV); <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">var</span> isVerbose = findVerbose();</span><br></pre></td></tr></table></figure>
<p>Again, we are creating 3 new functions, binding data to individual callbacks.
Because we have already bound data, we can call the last function <code>findVerbose</code> without
any arguments.</p>
<h2 id="alternative-solution-using-ramda">Alternative solution using Ramda</h2><p>I do not like the previous solution - using only the array iterator methods included in EcmaScript5
does not really play nicely with functional style. You can use 3rd party functional library
to make work with arrays simpler. For example, here is the same logic implemented
using <a href="https://github.com/CrossEye/ramda" target="_blank" rel="external">Ramda</a> library</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> R = <span class="built_in">require</span>(<span class="string">&apos;ramda&apos;</span>);</span><br><span class="line"><span class="keyword">var</span> anyVerbose = R.some(isVerbose);</span><br><span class="line"><span class="keyword">var</span> anyV = R.some(isV);</span><br><span class="line"><span class="keyword">var</span> findVerbose = or(anyVerbose, anyV);</span><br><span class="line"><span class="keyword">var</span> isVerbose = findVerbose(process.argv);</span><br></pre></td></tr></table></figure>
<p>This is my favorite solution, partly because we are building all logic into
<code>findVerbose</code> function. Then we call the function with given data.</p>
<h2 id="conclusion">Conclusion</h2><p>You can only effectively refactor JavaScript code if you are comfortable creating functions.
In the original code before refactoring we had a single anonymous callback function (line <code>// 1</code>)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> verbose = process.argv.some(<span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>{ <span class="comment">// 1</span></span><br><span class="line">  <span class="keyword">return</span> arg === <span class="string">&apos;--verbose&apos;</span> || arg === <span class="string">&apos;-v&apos;</span>;</span><br><span class="line">});</span><br></pre></td></tr></table></figure>
<p>In the final result, we created several tiny functions. Some of them were created
using closures (anonymous function returned from <code>or</code>), other functions were
created by partially applying arguments (using <code>.bind</code>)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// explicit function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMatch</span>(<span class="params">word, arg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> word === arg;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// create new functions using .bind</span></span><br><span class="line"><span class="keyword">var</span> isVerbose = isMatch.bind(<span class="literal">null</span>, <span class="string">&apos;--verbose&apos;</span>);</span><br><span class="line"><span class="keyword">var</span> isV = isMatch.bind(<span class="literal">null</span>, <span class="string">&apos;-v&apos;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">or</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> predicates = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="comment">// return new function from this closure</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> predicates.some(<span class="function"><span class="keyword">function</span> (<span class="params">predicate</span>) </span>{</span><br><span class="line">      <span class="keyword">return</span> predicate(arg);</span><br><span class="line">    });</span><br><span class="line">  };</span><br><span class="line">}</span><br><span class="line"><span class="comment">// create callback function by calling `or(...)`</span></span><br><span class="line"><span class="keyword">var</span> verbose = process.argv.some(or(isVerbose, isV));</span><br></pre></td></tr></table></figure>
<p>Returning new functions (as in <code>or</code>) and partial application (using <code>.bind</code>)
are the basic blocks of functional programming.</p>
<p>Another important point is to clearly see the difference between creating a function
and calling it. For example, <code>or(isVerbose, isV)</code> calls <code>or</code> which returns a function.
This function (let us call it <em>orPredicates</em> is then passed to <code>.some</code> function that
will call it once for each item (or until <em>orPredicates</em> returns true).</p>
<p><strong>related:</strong> <a href="../simplify-filtering-conditions/">refactor AND</a></p>

      
    </div>

    
      <footer class="article-footer personal-links">
  Follow Gleb Bahmutov <a href="https://twitter.com/bahmutov">@bahmutov</a>,
  see his projects at <a href="http://glebbahmutov.com">glebbahmutov.com</a>
</footer>

    

    <footer class="article-footer">
      <a data-url="http://glebbahmutov.com/blog/refactoring-or/" data-id="cij05sg7600c4vpurbxtybh8e" class="article-share-link">Share</a>
      
        <a href="http://glebbahmutov.com/blog/refactoring-or/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/functional/">functional</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../promise-paths/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Promise paths
        
      </div>
    </a>
  
  
    <a href="../agile-software-quality/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Agile software quality</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">70</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">192</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/">advice</a><span class="tag-list-count">84</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angular/">angular</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/">angularjs</a><span class="tag-list-count">54</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/">assertions</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/">boilerplate</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/">browser</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/database/">database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/">db</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/">es6</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/">functional</a><span class="tag-list-count">42</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/">git</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/">immutable</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/">javascript</a><span class="tag-list-count">145</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/">modular development</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/">nodejs</a><span class="tag-list-count">55</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/">performance</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/">promises</a><span class="tag-list-count">30</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/">reactive</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/">reactjs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/">security</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/">sentry</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/">testing</a><span class="tag-list-count">44</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/">tutorial</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/">ui</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/">web workers</a><span class="tag-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/QUnit/" style="font-size: 12.35px;">QUnit</a><a href="../tags/advice/" style="font-size: 19.41px;">advice</a><a href="../tags/angular/" style="font-size: 10px;">angular</a><a href="../tags/angularjs/" style="font-size: 18.24px;">angularjs</a><a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a><a href="../tags/assertions/" style="font-size: 13.53px;">assertions</a><a href="../tags/boilerplate/" style="font-size: 15.29px;">boilerplate</a><a href="../tags/browser/" style="font-size: 14.71px;">browser</a><a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a><a href="../tags/d3/" style="font-size: 11.18px;">d3</a><a href="../tags/database/" style="font-size: 10px;">database</a><a href="../tags/db/" style="font-size: 12.35px;">db</a><a href="../tags/es6/" style="font-size: 14.12px;">es6</a><a href="../tags/es7/" style="font-size: 10px;">es7</a><a href="../tags/functional/" style="font-size: 17.06px;">functional</a><a href="../tags/generators/" style="font-size: 12.35px;">generators</a><a href="../tags/git/" style="font-size: 13.53px;">git</a><a href="../tags/grunt/" style="font-size: 13.53px;">grunt</a><a href="../tags/gulp/" style="font-size: 11.18px;">gulp</a><a href="../tags/immutable/" style="font-size: 10px;">immutable</a><a href="../tags/interview/" style="font-size: 11.18px;">interview</a><a href="../tags/jade/" style="font-size: 11.76px;">jade</a><a href="../tags/javascript/" style="font-size: 20px;">javascript</a><a href="../tags/jshint/" style="font-size: 11.18px;">jshint</a><a href="../tags/modular-development/" style="font-size: 15.29px;">modular development</a><a href="../tags/nodejs/" style="font-size: 18.82px;">nodejs</a><a href="../tags/performance/" style="font-size: 15.88px;">performance</a><a href="../tags/promises/" style="font-size: 16.47px;">promises</a><a href="../tags/proposal/" style="font-size: 10.59px;">proposal</a><a href="../tags/reactive/" style="font-size: 10.59px;">reactive</a><a href="../tags/reactjs/" style="font-size: 10.59px;">reactjs</a><a href="../tags/security/" style="font-size: 11.76px;">security</a><a href="../tags/sentry/" style="font-size: 13.53px;">sentry</a><a href="../tags/testing/" style="font-size: 17.65px;">testing</a><a href="../tags/tutorial/" style="font-size: 12.94px;">tutorial</a><a href="../tags/ui/" style="font-size: 10px;">ui</a><a href="../tags/web-workers/" style="font-size: 12.35px;">web workers</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../run-express-server-in-your-browser/">Run Express server in your browser</a>
          </li>
        
          <li>
            <a href="../using-webpack/">Using webpack</a>
          </li>
        
          <li>
            <a href="../the-senior-engineer-role/">The senior engineer role</a>
          </li>
        
          <li>
            <a href="../instant-web-application/">Instant Web Application</a>
          </li>
        
          <li>
            <a href="../hydrate-at-build-time/">Hydrate at build time</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="..//" class="mobile-nav-link">Home</a>
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'http://glebbahmutov.com/blog/refactoring-or/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="../fancybox/jquery.fancybox.css" type="text/css">
  <script src="../fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="../js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>