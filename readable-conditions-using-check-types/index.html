<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Readable conditions using check-types.js | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="I practice defensive programming where each
function starts by checking its input arguments. If any input has unexpected value, the
function throws an exception or returns false. The number and strict">
<meta property="og:type" content="article">
<meta property="og:title" content="Readable conditions using check-types.js">
<meta property="og:url" content="http://glebbahmutov.com/blog/readable-conditions-using-check-types/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="I practice defensive programming where each
function starts by checking its input arguments. If any input has unexpected value, the
function throws an exception or returns false. The number and strict">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Readable conditions using check-types.js">
<meta name="twitter:description" content="I practice defensive programming where each
function starts by checking its input arguments. If any input has unexpected value, the
function throws an exception or returns false. The number and strict">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="../css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="..//" id="logo">Better world by better software</a>
      </h1>
      <!--
      
        <h2 id="subtitle-wrap">
          <a href="..//" id="subtitle">Software advice from Dr. Gleb Bahmutov PhD</a>
        </h2>
      
      -->
      <h2 id="subtitle-wrap">
        <span class="subtitle">Software advice from <a id="subtitle" href="http://glebbahmutov.com">Dr. Gleb Bahmutov PhD</a></span>
      </h2>
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="..//">Home</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://glebbahmutov.com/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-readable-conditions-using-check-types" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2014-08-28T04:00:00.000Z" itemprop="datePublished">Aug 28 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/products/">products</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Readable conditions using check-types.js
    </h1>

    <h2 class="article-title" itemprop="name">
      Clear and easy to read defensive programming with check-types.js and check-more-types.js
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I practice <a href="../paranoid-coding/">defensive programming</a> where each
function starts by checking its input arguments. If any input has unexpected value, the
function throws an exception or returns false. The number and strictness of checks is directly
proportional to the <a href="../defensive-distance/">defensive distance</a>.
I described a number of predicates one can use to check input arguments in
<a href="../defensive-coding-examples/">Defensive coding examples</a>.</p>
<p>In this post I will describe how to transform clunky input checks into compact and clear
predicate functions. As base I will use a library of predicates
<a href="https://github.com/philbooth/check-types.js" target="_blank" rel="external">check-types.js</a>. We love this library and
extended it with additional predicates and published the extension as
<a href="https://github.com/kensho/check-more-types" target="_blank" rel="external">check-more-types</a>.</p>
<h2 id="predicate-vs-assertion">Predicate vs assertion</h2><p>A typical predicate function returns true / false and can be used like this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>{</span><br><span class="line">  <span class="keyword">if</span> (!check.number(a) || !check.number(b)) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NaN</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p><em>check-types.js</em> has each predicate function added to <code>check.verify</code> object that throws an
exception if predicate returns false. I prefer throwing an exception to signal unexpected input</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>{</span><br><span class="line">  check.verify.number(a, <span class="string">&apos;invalid first argument &apos;</span> + a);</span><br><span class="line">  check.verify.number(b, <span class="string">&apos;invalid second argument &apos;</span> + b);</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>Notice that we concatenated error message in order to provide meaningful details.
The string concatenation is an expensive operation, and in most cases the result is
wasted (the predicate returns true). This is why I prefer using
<a href="https://github.com/bahmutov/lazy-ass" target="_blank" rel="external">lazy assertions</a> to throw exceptions. This library
only concatenates arguments if predicate returns false, avoiding performance penalty
hit</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>{</span><br><span class="line">  lazyAss(check.number(a) &amp;&amp; check.number(b), <span class="string">&apos;invalid add arguments&apos;</span>, a, b);</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>I will leave assertions out of the scope, instead describing common predicate
patterns. In each case I will show the predicate code before and after refactoring.
In each instance, I hope to get simpler and more readable function.</p>
<h2 id="checking-against-schema">Checking against schema</h2><p>Validating an object with several properties against a schema is the first common pattern.
Imagine we have an object describing a person. We require three properties: first and last names,
and address. We will require name parts to be valid strings (non-empty), but we do not know
how the address is going to be specified. Here is our initial code</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPerson</span>(<span class="params">p</span>) </span>{</span><br><span class="line">  <span class="keyword">if</span> (!p) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> (!check.unemptyString(p.first)) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> (!check.unemptyString(p.last)) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> (!check.has(p, <span class="string">&apos;address&apos;</span>)) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line">isPerson({</span><br><span class="line">  first: <span class="string">&apos;john&apos;</span>,</span><br><span class="line">  last: <span class="string">&apos;smith&apos;</span></span><br><span class="line">});</span><br><span class="line"><span class="comment">// returns false (p does not have address property)</span></span><br></pre></td></tr></table></figure>
<p>Instead of this multi-path if/else code we can validate against a <em>schema</em> object
using <a href="https://github.com/kensho/check-more-types#checkall" target="_blank" rel="external">check.all</a> method</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personSchema = {</span><br><span class="line">  first: check.unemptyString,</span><br><span class="line">  last: check.unemptyString,</span><br><span class="line">  address: check.defined</span><br><span class="line">};</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPerson</span>(<span class="params">p</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> check.object(p) &amp;&amp;</span><br><span class="line">    check.all(p, personSchema);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="removing-negation">Removing negation</h2><p>I noticed that my first coding pass always writes code that tries to return early on
obviously bad input. Here is an example that validates url string against regular expression,
but only if it a string</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> apiUrlFormat = <span class="regexp">/.../</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isApiUrl</span>(<span class="params">url</span>) </span>{</span><br><span class="line">  <span class="keyword">if</span> (!check.unemptyString(url)) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> apiUrlFormat.test(url);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>The negation and return are completely unnecessary and can be replaced with shorter code</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isApiUrl</span>(<span class="params">url</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> check.unemptyString(url) &amp;&amp;</span><br><span class="line">    apiUrlFormat.test(url);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="conditional-validation">Conditional validation</h2><p>If an input argument is optional, we usually write blocks like this one</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPerson</span>(<span class="params">p</span>) </span>{</span><br><span class="line">  <span class="keyword">if</span> (!check.object(p)) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// address is an optional string</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&apos;address&apos;</span> <span class="keyword">in</span> p &amp;&amp; check.unemptyString(p.address)) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> check.all(p, personSchema);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>Optional values that are either <code>null</code> or <code>undefined</code> can be checked using predicates in
<code>check.maybe</code> object (see <a href="https://github.com/philbooth/check-types.js#modifiers" target="_blank" rel="external">modifiers</a>).
Refactored code is a one-liner</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPerson</span>(<span class="params">p</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> check.object(p) &amp;&amp;</span><br><span class="line">    check.all(p, personSchema) &amp;&amp;</span><br><span class="line">    check.maybe.unemptyString(p.address);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>We can refactor this by moving optional check into the schema object</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personSchema = {</span><br><span class="line">  first: check.unemptyString,</span><br><span class="line">  last: check.unemptyString,</span><br><span class="line">  address: check.maybe.unemptyString</span><br><span class="line">};</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPerson</span>(<span class="params">p</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> check.object(p) &amp;&amp;</span><br><span class="line">    check.all(p, personSchema);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="inverse-predicate">Inverse predicate</h2><p><em>check-types.js</em> has automatic negation for each predicate function in <code>check.not</code> object.
For example these two statements are equivalent</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!check.number(foo)</span><br><span class="line">check.not.number(foo)</span><br></pre></td></tr></table></figure>
<p>Using <code>not</code> modifier helps to keep the condition with multiple parts look and read the same</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hard to read condition</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isValidId</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> check.string(id) &amp;&amp;</span><br><span class="line">    !check.emptyString(id);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>We can transform into positive predicates</p>
<pre><code>function isValidId(<span class="property">id</span>) {
<span class="command">  return</span> check.<span class="type">string</span>(<span class="property">id</span>) &amp;&amp;
    check.<span class="keyword">not</span>.emptyString(<span class="property">id</span>);
}
</code></pre><h2 id="adding-your-own-predicates">Adding your own predicates</h2><p><em>check-more-types</em> exposes a method to add your own functions as predicates to the <code>check</code> object
including its modifiers. For example, let us add the above <code>isValidId</code> function</p>
<pre><code>check.mixin(isValidId, <span class="string">&apos;id&apos;</span>);
<span class="comment">// check.id, check.not.id, check.maybe.id are created</span>
<span class="comment">// a person can have id assigned</span>
<span class="keyword">var</span> personSchema = {
  first: check.unemptyString,
  last: check.unemptyString,
  address: check.maybe.unemptyString,
  id: check.maybe.id
};
<span class="function"><span class="keyword">function</span> <span class="title">isPerson</span><span class="params">(p)</span> </span>{
  <span class="keyword">return</span> check.object(p) &amp;&amp;
    check.all(p, personSchema);
}
</code></pre><p>The second parameter <code>name</code> in <code>check.mixin(fn, name)</code> is optional. If missing, the
code will try to use <code>fn.name</code> property, which is risky, since functions can be renamed
during minification step. Thus I advise to always set predicate&apos;s name explicitly.</p>
<h2 id="callback-safety">Callback safety</h2><p>All predicates in <em>check-types.js</em> and <em>check-more-types</em> are safe to use as callbacks.</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">arePeople</span><span class="params">(people)</span> </span>{
  <span class="keyword">return</span> check.<span class="keyword">array</span>(people) &amp;&amp;
    people.every(check.isPerson);
}
</code></pre><p>You can even combine predicates on the fly using helper <code>and</code> function</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">and</span>(<span class="params"></span>) </span>{
  <span class="keyword">var</span> predicates = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">evaluateAnd</span>(<span class="params"></span>) </span>{
    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);
    <span class="keyword">return</span> predicates.every(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>{
      <span class="keyword">return</span> fn.apply(<span class="literal">null</span>, args);
    });
  };
}
<span class="keyword">var</span> peopleExist = and(check.unemptyArray, arePeople);
peopleExist([...]);
</code></pre><h2 id="conclusion">Conclusion</h2><p>After refactoring checks using the above patterns, I advise to refactor the conditions
even further by eliminating <code>&amp;&amp;</code> and <code>||</code> boolean functions. See my posts
<a href="../refactoring-or/">Refactoring OR</a>
and <a href="../simplify-filtering-conditions/">Refactoring AND</a>.
Read &quot;Breaking Down Giant Expressions&quot; in excellent
<a href="http://www.amazon.com/The-Readable-Code-Theory-Practice/dp/0596802293" target="_blank" rel="external">The Art of Readable Code</a>.</p>
<h2 id="update-1">Update 1</h2><p>I have added <code>check.schema(schema, object)</code> method to the
<a href="https://github.com/kensho/check-more-types" target="_blank" rel="external">check-more-types</a>
library that is inverse of <code>check.all</code>. Placing schema object first allows creating
validation method simply by using <code>Function.prototype.bind</code>, for example</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personSchema = {</span><br><span class="line">  name: check.unemptyString,</span><br><span class="line">  age: check.positiveNumber</span><br><span class="line">};</span><br><span class="line"><span class="keyword">var</span> isValidPerson = check.schema.bind(<span class="literal">null</span>, personSchema);</span><br><span class="line"><span class="keyword">var</span> h1 = {</span><br><span class="line">  name: <span class="string">&apos;joe&apos;</span>,</span><br><span class="line">  age: <span class="number">10</span></span><br><span class="line">};</span><br><span class="line"><span class="keyword">var</span> h2 = {</span><br><span class="line">  name: <span class="string">&apos;ann&apos;</span></span><br><span class="line">  <span class="comment">// missing age property</span></span><br><span class="line">}</span><br><span class="line">isValidPerson(h1); <span class="comment">// true</span></span><br><span class="line">isValidPerson(h2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h2 id="update-2">Update 2</h2><p>I have added <a href="https://github.com/kensho/check-more-types#defending-a-function" target="_blank" rel="external">check.defend(fn, predicates)</a>
method to separate function&apos;s logic from defensive checks. Instead of writing</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>{</span><br><span class="line">    la(check.number(a), <span class="string">&apos;first argument should be a number&apos;</span>, a);</span><br><span class="line">    la(check.number(a), <span class="string">&apos;second argument should be a number&apos;</span>, b);</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>You can write just the addition login and then add input argument checks dynamically</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="comment">// inner private function without any argument checks</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// return defended function</span></span><br><span class="line">  <span class="keyword">return</span> check.defend(add, check.number, check.number);</span><br><span class="line">}());</span><br><span class="line">add(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 5</span></span><br><span class="line">add(<span class="string">&apos;foo&apos;</span>, <span class="string">&apos;bar&apos;</span>);</span><br><span class="line"><span class="comment">// [Error: Argument 1 foo does not pass predicate]</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
      <footer class="article-footer personal-links">
  Follow Gleb Bahmutov <a href="https://twitter.com/bahmutov">@bahmutov</a>,
  see his projects at <a href="http://glebbahmutov.com">glebbahmutov.com</a>
</footer>

    

    <footer class="article-footer">
      <a data-url="http://glebbahmutov.com/blog/readable-conditions-using-check-types/" data-id="cij06eo2z00cmxuurmjxlpyyk" class="article-share-link">Share</a>
      
        <a href="http://glebbahmutov.com/blog/readable-conditions-using-check-types/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/assertions/">assertions</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../object-iterators/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Object iterators
        
      </div>
    </a>
  
  
    <a href="../tightening-project-with-grunt-build/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Tightening project with grunt build</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">70</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">192</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/">advice</a><span class="tag-list-count">84</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angular/">angular</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/">angularjs</a><span class="tag-list-count">54</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/">assertions</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/">boilerplate</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/">browser</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/database/">database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/">db</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/">es6</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/">functional</a><span class="tag-list-count">42</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/">git</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/">immutable</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/">javascript</a><span class="tag-list-count">145</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/">modular development</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/">nodejs</a><span class="tag-list-count">55</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/">performance</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/">promises</a><span class="tag-list-count">30</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/">reactive</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/">reactjs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/">security</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/">sentry</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/">testing</a><span class="tag-list-count">44</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/">tutorial</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/">ui</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/">web workers</a><span class="tag-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/QUnit/" style="font-size: 12.35px;">QUnit</a><a href="../tags/advice/" style="font-size: 19.41px;">advice</a><a href="../tags/angular/" style="font-size: 10px;">angular</a><a href="../tags/angularjs/" style="font-size: 18.24px;">angularjs</a><a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a><a href="../tags/assertions/" style="font-size: 13.53px;">assertions</a><a href="../tags/boilerplate/" style="font-size: 15.29px;">boilerplate</a><a href="../tags/browser/" style="font-size: 14.71px;">browser</a><a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a><a href="../tags/d3/" style="font-size: 11.18px;">d3</a><a href="../tags/database/" style="font-size: 10px;">database</a><a href="../tags/db/" style="font-size: 12.35px;">db</a><a href="../tags/es6/" style="font-size: 14.12px;">es6</a><a href="../tags/es7/" style="font-size: 10px;">es7</a><a href="../tags/functional/" style="font-size: 17.06px;">functional</a><a href="../tags/generators/" style="font-size: 12.35px;">generators</a><a href="../tags/git/" style="font-size: 13.53px;">git</a><a href="../tags/grunt/" style="font-size: 13.53px;">grunt</a><a href="../tags/gulp/" style="font-size: 11.18px;">gulp</a><a href="../tags/immutable/" style="font-size: 10px;">immutable</a><a href="../tags/interview/" style="font-size: 11.18px;">interview</a><a href="../tags/jade/" style="font-size: 11.76px;">jade</a><a href="../tags/javascript/" style="font-size: 20px;">javascript</a><a href="../tags/jshint/" style="font-size: 11.18px;">jshint</a><a href="../tags/modular-development/" style="font-size: 15.29px;">modular development</a><a href="../tags/nodejs/" style="font-size: 18.82px;">nodejs</a><a href="../tags/performance/" style="font-size: 15.88px;">performance</a><a href="../tags/promises/" style="font-size: 16.47px;">promises</a><a href="../tags/proposal/" style="font-size: 10.59px;">proposal</a><a href="../tags/reactive/" style="font-size: 10.59px;">reactive</a><a href="../tags/reactjs/" style="font-size: 10.59px;">reactjs</a><a href="../tags/security/" style="font-size: 11.76px;">security</a><a href="../tags/sentry/" style="font-size: 13.53px;">sentry</a><a href="../tags/testing/" style="font-size: 17.65px;">testing</a><a href="../tags/tutorial/" style="font-size: 12.94px;">tutorial</a><a href="../tags/ui/" style="font-size: 10px;">ui</a><a href="../tags/web-workers/" style="font-size: 12.35px;">web workers</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../run-express-server-in-your-browser/">Run Express server in your browser</a>
          </li>
        
          <li>
            <a href="../using-webpack/">Using webpack</a>
          </li>
        
          <li>
            <a href="../the-senior-engineer-role/">The senior engineer role</a>
          </li>
        
          <li>
            <a href="../instant-web-application/">Instant Web Application</a>
          </li>
        
          <li>
            <a href="../hydrate-at-build-time/">Hydrate at build time</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="..//" class="mobile-nav-link">Home</a>
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'http://glebbahmutov.com/blog/readable-conditions-using-check-types/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="../fancybox/jquery.fancybox.css" type="text/css">
  <script src="../fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="../js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>